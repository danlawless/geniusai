(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{5433:function(e,t,a){Promise.resolve().then(a.bind(a,4665))},4665:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return tg}});var s=a(7437),r=a(2265),i=a(9376),n=a(8906),l=a(2023),d=a(7769),c=a(2208),o=a(9637),x=a(8420),m=a(5805),g=a(2222),h=a(1047),u=a(2042),p=a(6221),y=a(8997),b=a(8728),j=a(2489),v=a(7692),N=a(8293),f=a(4766),k=a(265),w=a(5051),_=a(4401),Z=a(5252),S=a(1239),C=a(525);let A=[{id:"plan_starter",name:"starter",display_name:"Starter",description:"Perfect for small teams getting started with AI automation",price_monthly:29,price_yearly:290,limits:{agents:3,tasks:10,pipelines:2,users:5,monthly_ai_requests:1e3},features:["Basic AI Agents","Task Scheduling","Slack Integration","Email Support"],tier:1,is_active:!0,created_at:"2024-01-01T00:00:00Z"},{id:"plan_professional",name:"professional",display_name:"Professional",description:"Advanced features for growing teams and complex workflows",price_monthly:99,price_yearly:990,limits:{agents:15,tasks:50,pipelines:10,users:25,monthly_ai_requests:5e3},features:["Advanced AI Agents","Pipeline Automation","Analytics Dashboard","Priority Support","Custom Integrations"],tier:2,is_active:!0,created_at:"2024-01-01T00:00:00Z"},{id:"plan_enterprise",name:"enterprise",display_name:"Enterprise",description:"Unlimited power for large organizations",price_monthly:299,price_yearly:2990,limits:{agents:100,tasks:500,pipelines:50,users:100,monthly_ai_requests:25e3},features:["Unlimited AI Agents","Advanced Analytics","Custom Models","Dedicated Support","SLA Guarantee","White-label Options"],tier:3,is_active:!0,created_at:"2024-01-01T00:00:00Z"}],T={organizations:[{id:"org_1",slack_team_id:"T12345678",team_name:"TechCorp Innovations",domain:"techcorp.com",status:"active",created_at:"2024-01-15T10:30:00Z",updated_at:"2024-08-01T14:20:00Z",settings:{timezone:"America/New_York",notifications:!0},stripe_customer_id:"cus_techcorp123",billing_email:"billing@techcorp.com",bot_token:"xoxb-techcorp-token",bot_user_id:"U12345678",installed_at:"2024-01-15T10:30:00Z",monthly_ai_requests:3420,monthly_agent_executions:1250,monthly_task_executions:890,last_usage_reset:"2024-08-01T00:00:00Z",user_count:24,agent_count:12,task_count:35,pipeline_count:8,health_status:"healthy",subscription:{id:"sub_1",organization_id:"org_1",plan_id:"plan_professional",stripe_subscription_id:"sub_techcorp123",stripe_customer_id:"cus_techcorp123",status:"active",billing_cycle:"monthly",created_at:"2024-01-15T10:30:00Z",updated_at:"2024-08-01T14:20:00Z",current_period_start:"2024-08-01T00:00:00Z",current_period_end:"2024-09-01T00:00:00Z",current_agents:12,current_tasks:35,current_pipelines:8,current_users:24,plan:A[1]}},{id:"org_2",slack_team_id:"T87654321",team_name:"Digital Solutions Inc",domain:"digitalsolutions.io",status:"active",created_at:"2024-02-20T09:15:00Z",updated_at:"2024-08-01T16:45:00Z",settings:{timezone:"America/Los_Angeles",notifications:!0},stripe_customer_id:"cus_digital456",billing_email:"accounts@digitalsolutions.io",bot_token:"xoxb-digital-token",bot_user_id:"U87654321",installed_at:"2024-02-20T09:15:00Z",monthly_ai_requests:8750,monthly_agent_executions:3200,monthly_task_executions:2100,last_usage_reset:"2024-08-01T00:00:00Z",user_count:67,agent_count:28,task_count:85,pipeline_count:15,health_status:"healthy",subscription:{id:"sub_2",organization_id:"org_2",plan_id:"plan_enterprise",stripe_subscription_id:"sub_digital456",stripe_customer_id:"cus_digital456",status:"active",billing_cycle:"yearly",created_at:"2024-02-20T09:15:00Z",updated_at:"2024-08-01T16:45:00Z",current_period_start:"2024-02-20T00:00:00Z",current_period_end:"2025-02-20T00:00:00Z",current_agents:28,current_tasks:85,current_pipelines:15,current_users:67,plan:A[2]}},{id:"org_3",slack_team_id:"T11223344",team_name:"StartupFlow",domain:"startupflow.com",status:"active",created_at:"2024-06-10T14:22:00Z",updated_at:"2024-08-01T11:30:00Z",settings:{timezone:"Europe/London",notifications:!0},stripe_customer_id:"cus_startup789",billing_email:"finance@startupflow.com",bot_token:"xoxb-startup-token",bot_user_id:"U11223344",installed_at:"2024-06-10T14:22:00Z",monthly_ai_requests:890,monthly_agent_executions:420,monthly_task_executions:280,last_usage_reset:"2024-08-01T00:00:00Z",user_count:8,agent_count:3,task_count:12,pipeline_count:2,health_status:"healthy",subscription:{id:"sub_3",organization_id:"org_3",plan_id:"plan_starter",stripe_subscription_id:"sub_startup789",stripe_customer_id:"cus_startup789",status:"active",billing_cycle:"monthly",created_at:"2024-06-10T14:22:00Z",updated_at:"2024-08-01T11:30:00Z",current_period_start:"2024-08-01T00:00:00Z",current_period_end:"2024-09-01T00:00:00Z",current_agents:3,current_tasks:12,current_pipelines:2,current_users:8,plan:A[0]}},{id:"org_4",slack_team_id:"T55667788",team_name:"Global Dynamics",domain:"globaldynamics.com",status:"suspended",created_at:"2024-03-05T08:45:00Z",updated_at:"2024-07-28T13:15:00Z",settings:{timezone:"America/Chicago",notifications:!1},stripe_customer_id:"cus_global101",billing_email:"billing@globaldynamics.com",bot_token:"xoxb-global-token",bot_user_id:"U55667788",installed_at:"2024-03-05T08:45:00Z",monthly_ai_requests:0,monthly_agent_executions:0,monthly_task_executions:0,last_usage_reset:"2024-08-01T00:00:00Z",user_count:45,agent_count:18,task_count:62,pipeline_count:12,health_status:"critical",subscription:{id:"sub_4",organization_id:"org_4",plan_id:"plan_professional",stripe_subscription_id:"sub_global101",stripe_customer_id:"cus_global101",status:"past_due",billing_cycle:"monthly",created_at:"2024-03-05T08:45:00Z",updated_at:"2024-07-28T13:15:00Z",current_period_start:"2024-07-01T00:00:00Z",current_period_end:"2024-08-01T00:00:00Z",current_agents:18,current_tasks:62,current_pipelines:12,current_users:45,plan:A[1]}}],users:[{id:"user_1",organization_id:"org_1",slack_user_id:"U1234567890",email:"sarah.johnson@techcorp.com",full_name:"Sarah Johnson",avatar_url:"https://api.dicebear.com/7.x/avataaars/svg?seed=sarah",role:"owner",created_at:"2024-01-15T10:30:00Z",updated_at:"2024-08-01T14:20:00Z",last_active_at:"2024-08-01T16:45:00Z",preferences:{theme:"dark",notifications:!0},timezone:"America/New_York",monthly_ai_requests:450,monthly_agent_interactions:125},{id:"user_2",organization_id:"org_1",slack_user_id:"U2345678901",email:"mike.chen@techcorp.com",full_name:"Mike Chen",avatar_url:"https://api.dicebear.com/7.x/avataaars/svg?seed=mike",role:"admin",created_at:"2024-01-20T11:15:00Z",updated_at:"2024-08-01T15:30:00Z",last_active_at:"2024-08-01T15:30:00Z",preferences:{theme:"light",notifications:!0},timezone:"America/New_York",monthly_ai_requests:380,monthly_agent_interactions:95},{id:"user_3",organization_id:"org_2",slack_user_id:"U3456789012",email:"alex.rodriguez@digitalsolutions.io",full_name:"Alex Rodriguez",avatar_url:"https://api.dicebear.com/7.x/avataaars/svg?seed=alex",role:"owner",created_at:"2024-02-20T09:15:00Z",updated_at:"2024-08-01T16:45:00Z",last_active_at:"2024-08-01T17:20:00Z",preferences:{theme:"dark",notifications:!0},timezone:"America/Los_Angeles",monthly_ai_requests:720,monthly_agent_interactions:280},{id:"user_4",organization_id:"org_2",slack_user_id:"U4567890123",email:"emma.williams@digitalsolutions.io",full_name:"Emma Williams",avatar_url:"https://api.dicebear.com/7.x/avataaars/svg?seed=emma",role:"admin",created_at:"2024-03-01T10:30:00Z",updated_at:"2024-08-01T14:15:00Z",last_active_at:"2024-08-01T14:15:00Z",preferences:{theme:"light",notifications:!1},timezone:"America/Los_Angeles",monthly_ai_requests:520,monthly_agent_interactions:165},{id:"user_5",organization_id:"org_3",slack_user_id:"U5678901234",email:"james.taylor@startupflow.com",full_name:"James Taylor",avatar_url:"https://api.dicebear.com/7.x/avataaars/svg?seed=james",role:"owner",created_at:"2024-06-10T14:22:00Z",updated_at:"2024-08-01T11:30:00Z",last_active_at:"2024-08-01T12:45:00Z",preferences:{theme:"dark",notifications:!0},timezone:"Europe/London",monthly_ai_requests:180,monthly_agent_interactions:45}],agents:[{id:"agent_1",organization_id:"org_1",name:"CustomerSupport Pro",description:"Advanced customer support agent with sentiment analysis and escalation capabilities",prompt:"You are a professional customer support agent. Analyze customer inquiries, provide helpful solutions, and escalate complex issues when needed.",slack_channels:["#customer-support","#general"],respond_to_all_messages:!1,openai_assistant_id:"asst_customerSupport123",openai_thread_id:"thread_cs456",capabilities:{sentiment_analysis:!0,escalation:!0,knowledge_base:!0},function_calling_enabled:!0,settings:{max_response_length:2e3,temperature:.7},persistent_context:"Customer support context with company policies and procedures",status:"active",visibility:"public",created_at:"2024-01-16T09:00:00Z",updated_at:"2024-08-01T10:30:00Z",created_by:"user_1",last_interaction_at:"2024-08-01T16:20:00Z",total_interactions:1247,monthly_interactions:342,success_rate:94.5,energy:85,summary:"High-performing customer support agent with excellent satisfaction ratings"},{id:"agent_2",organization_id:"org_1",name:"Code Review Assistant",description:"AI-powered code review agent that analyzes pull requests and suggests improvements",prompt:"You are a senior software engineer specializing in code reviews. Analyze code quality, suggest improvements, and identify potential issues.",slack_channels:["#engineering","#code-review"],respond_to_all_messages:!0,openai_assistant_id:"asst_codeReview789",openai_thread_id:"thread_cr101",capabilities:{code_analysis:!0,security_check:!0,performance_optimization:!0},function_calling_enabled:!0,settings:{max_response_length:3e3,temperature:.3},persistent_context:"Code review guidelines and best practices for the engineering team",status:"active",visibility:"private",created_at:"2024-02-01T14:15:00Z",updated_at:"2024-08-01T11:45:00Z",created_by:"user_2",last_interaction_at:"2024-08-01T15:10:00Z",total_interactions:856,monthly_interactions:198,success_rate:97.2,energy:92,summary:"Highly accurate code review agent that has prevented numerous bugs"},{id:"agent_3",organization_id:"org_2",name:"Sales Intelligence Bot",description:"Advanced sales assistant that tracks leads, analyzes opportunities, and provides insights",prompt:"You are a sales intelligence expert. Analyze customer interactions, identify opportunities, and provide strategic sales insights.",slack_channels:["#sales","#leads","#opportunities"],respond_to_all_messages:!1,openai_assistant_id:"asst_salesIntel456",openai_thread_id:"thread_si789",capabilities:{lead_scoring:!0,opportunity_analysis:!0,forecasting:!0},function_calling_enabled:!0,settings:{max_response_length:2500,temperature:.6},persistent_context:"Sales methodology and customer data for Digital Solutions Inc",status:"active",visibility:"public",created_at:"2024-02-22T10:30:00Z",updated_at:"2024-08-01T13:20:00Z",created_by:"user_3",last_interaction_at:"2024-08-01T17:00:00Z",total_interactions:2134,monthly_interactions:567,success_rate:91.8,energy:88,summary:"Powerful sales agent that has contributed to 23% increase in conversion rates"},{id:"agent_4",organization_id:"org_2",name:"Content Creator AI",description:"Creative content generation agent for marketing campaigns and social media",prompt:"You are a creative content strategist. Generate engaging content for various marketing channels while maintaining brand voice and guidelines.",slack_channels:["#marketing","#content","#social-media"],respond_to_all_messages:!0,openai_assistant_id:"asst_contentAI123",openai_thread_id:"thread_cc456",capabilities:{content_generation:!0,brand_voice:!0,seo_optimization:!0},function_calling_enabled:!1,settings:{max_response_length:4e3,temperature:.8},persistent_context:"Brand guidelines and content strategy for Digital Solutions Inc",status:"active",visibility:"public",created_at:"2024-03-10T11:45:00Z",updated_at:"2024-08-01T14:30:00Z",created_by:"user_4",last_interaction_at:"2024-08-01T16:45:00Z",total_interactions:1567,monthly_interactions:423,success_rate:89.3,energy:76,summary:"Creative agent that has generated over 500 pieces of marketing content"},{id:"agent_5",organization_id:"org_3",name:"Project Manager Bot",description:"Intelligent project management assistant that tracks progress and identifies blockers",prompt:"You are an experienced project manager. Monitor project progress, identify risks, and suggest solutions to keep projects on track.",slack_channels:["#projects","#general"],respond_to_all_messages:!1,openai_assistant_id:"asst_projectMgr789",openai_thread_id:"thread_pm101",capabilities:{progress_tracking:!0,risk_analysis:!0,resource_planning:!0},function_calling_enabled:!0,settings:{max_response_length:2e3,temperature:.5},persistent_context:"Project management methodology and current project status for StartupFlow",status:"active",visibility:"public",created_at:"2024-06-12T15:30:00Z",updated_at:"2024-08-01T09:15:00Z",created_by:"user_5",last_interaction_at:"2024-08-01T11:30:00Z",total_interactions:234,monthly_interactions:67,success_rate:96.1,energy:91,summary:"Efficient project management agent that has improved delivery times by 18%"}],tasks:[{id:"task_1",organization_id:"org_1",name:"Daily Sales Report",description:"Generate and send daily sales performance report to management team",prompt:"Analyze yesterday's sales data and create a comprehensive report including metrics, trends, and recommendations.",agent_id:"agent_1",agent_name:"CustomerSupport Pro",schedule_type:"daily",schedule_config:{hour:9,minute:0},next_run_at:"2024-08-02T09:00:00Z",last_run_at:"2024-08-01T09:00:00Z",output_channels:["#management","#sales"],pipeline_id:"pipeline_1",enabled:!0,status:"active",visibility:"private",created_at:"2024-01-20T10:00:00Z",updated_at:"2024-08-01T08:30:00Z",created_by:"user_1",total_executions:195,successful_executions:189,failed_executions:6,average_duration_ms:4500},{id:"task_2",organization_id:"org_1",name:"Weekly Code Quality Check",description:"Automated code quality analysis and report generation for engineering team",prompt:"Analyze the week's code commits, identify quality issues, and suggest improvements.",agent_id:"agent_2",agent_name:"Code Review Assistant",schedule_type:"weekly",schedule_config:{day:"friday",hour:17,minute:0},next_run_at:"2024-08-02T17:00:00Z",last_run_at:"2024-07-26T17:00:00Z",output_channels:["#engineering"],enabled:!0,status:"active",visibility:"private",created_at:"2024-02-05T12:30:00Z",updated_at:"2024-07-30T16:45:00Z",created_by:"user_2",total_executions:26,successful_executions:25,failed_executions:1,average_duration_ms:12e3},{id:"task_3",organization_id:"org_2",name:"Lead Qualification Automation",description:"Automatically qualify and score new leads from various sources",prompt:"Analyze new lead information, score based on qualification criteria, and route to appropriate sales representative.",agent_id:"agent_3",agent_name:"Sales Intelligence Bot",schedule_type:"cron",schedule_config:{},cron_expression:"0 */2 * * *",next_run_at:"2024-08-01T18:00:00Z",last_run_at:"2024-08-01T16:00:00Z",output_channels:["#sales","#leads"],pipeline_id:"pipeline_2",enabled:!0,status:"active",visibility:"public",created_at:"2024-02-25T14:20:00Z",updated_at:"2024-08-01T15:10:00Z",created_by:"user_3",total_executions:1340,successful_executions:1298,failed_executions:42,average_duration_ms:3200},{id:"task_4",organization_id:"org_2",name:"Social Media Content Calendar",description:"Generate weekly social media content calendar with engaging posts",prompt:"Create a weekly social media content calendar with engaging posts, hashtags, and optimal posting times.",agent_id:"agent_4",agent_name:"Content Creator AI",schedule_type:"weekly",schedule_config:{day:"sunday",hour:10,minute:0},next_run_at:"2024-08-04T10:00:00Z",last_run_at:"2024-07-28T10:00:00Z",output_channels:["#marketing","#social-media"],enabled:!0,status:"active",visibility:"public",created_at:"2024-03-15T09:45:00Z",updated_at:"2024-07-30T11:20:00Z",created_by:"user_4",total_executions:20,successful_executions:19,failed_executions:1,average_duration_ms:8500},{id:"task_5",organization_id:"org_3",name:"Sprint Planning Assistant",description:"Automated sprint planning and capacity analysis for development team",prompt:"Analyze team capacity, review backlog items, and suggest optimal sprint composition.",agent_id:"agent_5",agent_name:"Project Manager Bot",schedule_type:"weekly",schedule_config:{day:"monday",hour:9,minute:30},next_run_at:"2024-08-05T09:30:00Z",last_run_at:"2024-07-29T09:30:00Z",output_channels:["#projects"],enabled:!0,status:"active",visibility:"private",created_at:"2024-06-15T11:00:00Z",updated_at:"2024-07-31T10:15:00Z",created_by:"user_5",total_executions:8,successful_executions:8,failed_executions:0,average_duration_ms:6800}],pipelines:[{id:"pipeline_1",organization_id:"org_1",name:"Customer Onboarding Flow",description:"Automated customer onboarding process with multiple touchpoints and follow-ups",steps:[{id:"step_1",name:"Welcome Message",agent_id:"agent_1",delay_minutes:0},{id:"step_2",name:"Setup Guidance",agent_id:"agent_1",delay_minutes:60},{id:"step_3",name:"Follow-up Check",agent_id:"agent_1",delay_minutes:1440}],agent_sequence:["agent_1"],output_channels:["#customer-success","#onboarding"],enabled:!0,status:"active",visibility:"private",created_at:"2024-01-25T13:15:00Z",updated_at:"2024-07-28T14:30:00Z",created_by:"user_1",total_executions:156,successful_executions:148,failed_executions:8,average_duration_ms:45e3},{id:"pipeline_2",organization_id:"org_2",name:"Lead Nurturing Campaign",description:"Multi-stage lead nurturing pipeline with personalized content and scoring",steps:[{id:"step_1",name:"Lead Qualification",agent_id:"agent_3",delay_minutes:0},{id:"step_2",name:"Content Personalization",agent_id:"agent_4",delay_minutes:30},{id:"step_3",name:"Follow-up Sequence",agent_id:"agent_3",delay_minutes:2880}],agent_sequence:["agent_3","agent_4"],output_channels:["#sales","#marketing"],enabled:!0,status:"active",visibility:"public",created_at:"2024-03-01T10:45:00Z",updated_at:"2024-08-01T09:20:00Z",created_by:"user_3",total_executions:423,successful_executions:398,failed_executions:25,average_duration_ms:78e3},{id:"pipeline_3",organization_id:"org_3",name:"Project Delivery Workflow",description:"End-to-end project delivery pipeline with automated status updates and notifications",steps:[{id:"step_1",name:"Project Kickoff",agent_id:"agent_5",delay_minutes:0},{id:"step_2",name:"Progress Tracking",agent_id:"agent_5",delay_minutes:1440},{id:"step_3",name:"Completion Report",agent_id:"agent_5",delay_minutes:0}],agent_sequence:["agent_5"],output_channels:["#projects","#management"],enabled:!0,status:"active",visibility:"private",created_at:"2024-06-20T16:30:00Z",updated_at:"2024-07-31T12:45:00Z",created_by:"user_5",total_executions:12,successful_executions:11,failed_executions:1,average_duration_ms:12e4}],subscriptionPlans:A,dashboardMetrics:{organizations:{total:4,active:3,suspended:1,cancelled:0,growth_rate:25.5},users:{total:144,active:132,new_this_month:18,growth_rate:15.2},resources:{total_agents:43,active_agents:41,total_tasks:132,active_tasks:128,total_pipelines:25,active_pipelines:24},revenue:{monthly_recurring:12750,annual_recurring:153e3,growth_rate:22.8,churn_rate:3.2},usage:{total_ai_requests:13060,total_executions:4870,average_response_time:1250,success_rate:94.7},health:{system_status:"healthy",database_health:98.5,api_health:97.2,uptime:99.9}},systemHealth:{overall_status:"healthy",database:{status:"healthy",response_time_ms:45,active_connections:12,last_check:"2024-08-01T17:00:00Z"},api:{status:"healthy",response_time_ms:120,success_rate:97.2,error_rate:2.8,last_check:"2024-08-01T17:00:00Z"},worker:{status:"healthy",memory_usage:68.5,cpu_usage:23.8,uptime:99.9,last_check:"2024-08-01T17:00:00Z"}},analytics:{timeRange:"30d",signups:{total:18,data:Array.from({length:30},(e,t)=>({date:new Date(Date.now()-(29-t)*864e5).toISOString().split("T")[0],count:Math.floor(3*Math.random())+(t>20?1:0)})),growth_rate:25.5},revenue:{total:12750,data:Array.from({length:30},(e,t)=>({date:new Date(Date.now()-(29-t)*864e5).toISOString().split("T")[0],amount:Math.floor(500*Math.random())+300})),growth_rate:22.8},engagement:{daily_active_users:89,monthly_active_users:132,average_session_time:1450,feature_adoption:[{feature:"AI Agents",adoption_rate:94.2},{feature:"Task Automation",adoption_rate:87.5},{feature:"Pipeline Workflows",adoption_rate:73.8},{feature:"Analytics Dashboard",adoption_rate:65.1},{feature:"Custom Integrations",adoption_rate:42.3}]},performance:{average_response_time:1250,success_rate:94.7,error_rate:5.3,uptime:99.9}},auditLogs:[{id:"audit_1",admin_user_id:"admin_1",action:"organization.suspend",resource_type:"organization",resource_id:"org_4",details:{reason:"Payment failure - multiple attempts",previous_status:"active"},ip_address:"192.168.1.100",user_agent:"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7)",created_at:"2024-07-28T13:15:00Z"},{id:"audit_2",admin_user_id:"admin_1",action:"organization.plan_change",resource_type:"organization",resource_id:"org_2",details:{from_plan:"professional",to_plan:"enterprise",reason:"Upgrade request"},ip_address:"192.168.1.100",user_agent:"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7)",created_at:"2024-07-25T10:30:00Z"},{id:"audit_3",admin_user_id:"admin_1",action:"user.role_change",resource_type:"user",resource_id:"user_4",details:{from_role:"user",to_role:"admin",organization:"Digital Solutions Inc"},ip_address:"192.168.1.100",user_agent:"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7)",created_at:"2024-07-20T14:45:00Z"}]};var z=a(257);let I=z.env.NEXT_PUBLIC_API_BASE_URL||"https://geniusai-v2-worker.dan-30f.workers.dev/api",L=z.env.NEXT_PUBLIC_ADMIN_PASSWORD||"admin123",P="true"===z.env.NEXT_PUBLIC_USE_MOCK_DATA;class O{async request(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(P)return this.getMockData(e,t);let a="".concat(this.baseURL,"/admin/").concat(e),s={headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(this.adminPassword),...t.headers},...t};try{let e=await fetch(a,s);if(!e.ok){let t=await e.text();throw Error("API Error ".concat(e.status,": ").concat(t))}return await e.json()}catch(t){throw console.error("API Request failed for ".concat(e,":"),t),t}}async getMockData(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1],await new Promise(e=>setTimeout(e,500*Math.random()+200));let[t]=e.split("?");switch(t){case"overview":return T.dashboardMetrics;case"organizations":let a=new URLSearchParams(e.split("?")[1]||""),s=parseInt(a.get("page")||"1"),r=parseInt(a.get("limit")||"10"),i=a.get("search")||"",n=a.get("status")||"",l=T.organizations;i&&(l=l.filter(e=>{var t;return e.team_name.toLowerCase().includes(i.toLowerCase())||(null===(t=e.domain)||void 0===t?void 0:t.toLowerCase().includes(i.toLowerCase()))})),n&&(l=l.filter(e=>e.status===n));let d=(s-1)*r;return{organizations:l.slice(d,d+r),total:l.length,page:s};case"users":let c=new URLSearchParams(e.split("?")[1]||"").get("organization_id"),o=T.users;return c&&(o=o.filter(e=>e.organization_id===c)),o;case"agents":let x=new URLSearchParams(e.split("?")[1]||"").get("organization_id"),m=T.agents;return x&&(m=m.filter(e=>e.organization_id===x)),m;case"tasks":let g=new URLSearchParams(e.split("?")[1]||"").get("organization_id"),h=T.tasks;return g&&(h=h.filter(e=>e.organization_id===g)),h;case"pipelines":let u=new URLSearchParams(e.split("?")[1]||"").get("organization_id"),p=T.pipelines;return u&&(p=p.filter(e=>e.organization_id===u)),p;case"plans":return T.subscriptionPlans;case"health":return T.systemHealth;case"analytics":return T.analytics;case"analytics/revenue":return{total_revenue:153e3,monthly_recurring:12750,annual_recurring:153e3,growth_rate:22.8,churn_rate:3.2,plan_distribution:[{plan:"Starter",count:1,revenue:290},{plan:"Professional",count:2,revenue:1980},{plan:"Enterprise",count:1,revenue:2990}]};case"analytics/usage":return{total_requests:13060,total_executions:4870,average_response_time:1250,success_rate:94.7,top_organizations:[{name:"Digital Solutions Inc",usage:8750},{name:"TechCorp Innovations",usage:3420},{name:"StartupFlow",usage:890}],usage_trends:Array.from({length:30},(e,t)=>({date:new Date(Date.now()-(29-t)*864e5).toISOString().split("T")[0],requests:Math.floor(500*Math.random())+200,executions:Math.floor(200*Math.random())+100}))};case"audit-logs":let y=new URLSearchParams(e.split("?")[1]||""),b=parseInt(y.get("page")||"1"),j=parseInt(y.get("limit")||"10"),v=(b-1)*j;return{logs:T.auditLogs.slice(v,v+j),total:T.auditLogs.length,page:b};default:if(t.startsWith("organizations/")){let e=t.split("/")[1];if(t.endsWith("/details")){let t=T.organizations.find(t=>t.id===e);if(t)return{organization:t,users:T.users.filter(t=>t.organization_id===e),agents:T.agents.filter(t=>t.organization_id===e),tasks:T.tasks.filter(t=>t.organization_id===e),pipelines:T.pipelines.filter(t=>t.organization_id===e),usage_stats:{monthly_requests:t.monthly_ai_requests,monthly_executions:t.monthly_agent_executions+t.monthly_task_executions,success_rate:94.7,average_response_time:1250},recent_activity:[{type:"agent",action:"Created new agent",timestamp:"2024-08-01T16:30:00Z",user:"Sarah Johnson"},{type:"task",action:"Scheduled task execution",timestamp:"2024-08-01T15:45:00Z",user:"Mike Chen"},{type:"pipeline",action:"Updated pipeline configuration",timestamp:"2024-08-01T14:20:00Z",user:"Alex Rodriguez"}]}}else{let t=T.organizations.find(t=>t.id===e);if(t)return t}}return console.warn("Mock data not implemented for endpoint: ".concat(e)),{}}}async getDashboardOverview(){return this.request("overview")}async getOrganizations(e){let t=new URLSearchParams;(null==e?void 0:e.page)&&t.set("page",e.page.toString()),(null==e?void 0:e.limit)&&t.set("limit",e.limit.toString()),(null==e?void 0:e.search)&&t.set("search",e.search),(null==e?void 0:e.status)&&t.set("status",e.status);let a=t.toString();return this.request(a?"organizations?".concat(a):"organizations")}async getOrganization(e){return this.request("organizations/".concat(e))}async updateOrganization(e,t){return this.request("organizations/".concat(e),{method:"PUT",body:JSON.stringify(t)})}async suspendOrganization(e,t){return this.request("organizations/".concat(e,"/suspend"),{method:"POST",body:JSON.stringify({reason:t})})}async activateOrganization(e){return this.request("organizations/".concat(e,"/activate"),{method:"POST"})}async changeOrganizationPlan(e,t,a){return this.request("organizations/change-plan",{method:"POST",body:JSON.stringify({organizationId:e,planId:t,reason:a})})}async getSubscriptionPlans(){return this.request("plans")}async getUsers(e){return this.request(e?"users?organization_id=".concat(e):"users")}async getAgents(e){return this.request(e?"agents?organization_id=".concat(e):"agents")}async getTasks(e){return this.request(e?"tasks?organization_id=".concat(e):"tasks")}async getPipelines(e){return this.request(e?"pipelines?organization_id=".concat(e):"pipelines")}async getSlackChannels(e){return this.request("slack-channels?organization_id=".concat(e))}async getAgentThreads(e){return this.request("agent-threads?agent_id=".concat(e))}async getSystemHealth(){return this.request("health")}async getAnalytics(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"30d";return this.request("analytics?range=".concat(e))}async getRevenueAnalytics(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"30d";return this.request("analytics/revenue?range=".concat(e))}async getUsageAnalytics(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"30d";return this.request("analytics/usage?range=".concat(e))}async getAuditLogs(e){let t=new URLSearchParams;(null==e?void 0:e.page)&&t.set("page",e.page.toString()),(null==e?void 0:e.limit)&&t.set("limit",e.limit.toString()),(null==e?void 0:e.action)&&t.set("action",e.action),(null==e?void 0:e.user)&&t.set("user",e.user),(null==e?void 0:e.dateFrom)&&t.set("date_from",e.dateFrom),(null==e?void 0:e.dateTo)&&t.set("date_to",e.dateTo);let a=t.toString();return this.request(a?"audit-logs?".concat(a):"audit-logs")}async getOrganizationDetails(e){return this.request("organizations/".concat(e,"/details"))}async search(e,t){let a=new URLSearchParams({q:e});return(null==t?void 0:t.type)&&a.set("type",t.type),(null==t?void 0:t.status)&&a.set("status",t.status),(null==t?void 0:t.organization_id)&&a.set("organization_id",t.organization_id),this.request("search?".concat(a.toString()))}constructor(){this.baseURL=I,this.adminPassword=L}}let D=new O,{getDashboardOverview:E,getOrganizations:U,getOrganization:M,updateOrganization:q,suspendOrganization:R,activateOrganization:F,changeOrganizationPlan:V,getSubscriptionPlans:W,getUsers:G,getAgents:B,getTasks:J,getPipelines:H,getSlackChannels:Y,getSystemHealth:K,getAnalytics:X,getRevenueAnalytics:$,getUsageAnalytics:Q,getAuditLogs:ee,getOrganizationDetails:et,search:ea}=D;function es(e){let{title:t,value:a,change:r,changeLabel:i,icon:n,color:l,loading:d,onClick:c}=e;return d?(0,s.jsx)("div",{className:"admin-card animate-pulse",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"h-4 bg-gray-200 dark:bg-gray-700 rounded w-24 mb-2"}),(0,s.jsx)("div",{className:"h-8 bg-gray-200 dark:bg-gray-700 rounded w-16"})]}),(0,s.jsx)("div",{className:"w-12 h-12 bg-gray-200 dark:bg-gray-700 rounded-xl"})]})}):(0,s.jsx)("div",{className:"admin-card hover:scale-105 transition-all duration-300 group ".concat(c?"cursor-pointer":""),onClick:c,children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400 group-hover:text-gray-800 dark:group-hover:text-gray-200 transition-colors",children:t}),(0,s.jsxs)("div",{className:"flex items-baseline space-x-2",children:[(0,s.jsx)("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"number"==typeof a?a.toLocaleString():a}),void 0!==r&&(0,s.jsxs)("div",{className:"flex items-center text-sm font-medium ".concat(r>=0?"text-success-600":"text-danger-600"),children:[r>=0?(0,s.jsx)(k.Z,{className:"w-4 h-4"}):(0,s.jsx)(w.Z,{className:"w-4 h-4"}),(0,s.jsxs)("span",{children:[Math.abs(r),"%"]})]})]}),i&&(0,s.jsx)("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:i})]}),(0,s.jsx)("div",{className:"p-3 rounded-xl bg-gradient-to-r ".concat({primary:"from-primary-500 to-primary-600 text-white",secondary:"from-secondary-500 to-secondary-600 text-white",success:"from-success-500 to-success-600 text-white",warning:"from-warning-500 to-warning-600 text-white",danger:"from-danger-500 to-danger-600 text-white"}[l]," shadow-lg group-hover:shadow-xl transition-all duration-300"),children:(0,s.jsx)(n,{className:"w-6 h-6"})})]})})}function er(){let{onNavigate:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},[t,a]=(0,r.useState)(null),[i,l]=(0,r.useState)(!0),[d,c]=(0,r.useState)("");(0,r.useEffect)(()=>{o();let e=setInterval(o,3e4);return()=>clearInterval(e)},[]);let o=async()=>{try{c("");let e=await D.getDashboardOverview();a(e)}catch(e){console.error("Error fetching dashboard data:",e),c(e.message),a({organizations:{total:47,active:42,suspended:3,cancelled:2,growth_rate:12.5},users:{total:186,active:164,new_this_month:23,growth_rate:18.3},resources:{total_agents:89,active_agents:81,total_tasks:156,active_tasks:142,total_pipelines:34,active_pipelines:31},revenue:{monthly_recurring:12750,annual_recurring:153e3,growth_rate:24.7,churn_rate:3.2},usage:{total_ai_requests:45680,total_executions:8934,average_response_time:1240,success_rate:98.7},health:{system_status:"healthy",database_health:99.2,api_health:98.9,uptime:99.8}})}finally{l(!1)}};return d&&!t?(0,s.jsxs)("div",{className:"text-center py-12",children:[(0,s.jsx)("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-danger-100 rounded-full mb-4",children:(0,s.jsx)(n.Z,{className:"w-8 h-8 text-danger-600"})}),(0,s.jsx)("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:"Unable to load dashboard data"}),(0,s.jsx)("p",{className:"text-gray-500 dark:text-gray-400 mb-4",children:d}),(0,s.jsx)("button",{onClick:o,className:"admin-button-primary",children:"Retry"})]}):(0,s.jsxs)("div",{className:"space-y-6 animate-fade-in",children:[(0,s.jsx)("div",{className:"bg-gradient-to-r from-primary-600 to-secondary-600 rounded-2xl p-8 text-white shadow-lg",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-3xl font-bold mb-2",children:"Welcome to GeniusAI Command Center"}),(0,s.jsx)("p",{className:"text-primary-100 text-lg",children:"Your complete platform overview and analytics dashboard"})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,s.jsxs)("div",{className:"text-right",children:[(0,s.jsx)("p",{className:"text-sm text-primary-200",children:"Last updated"}),(0,s.jsx)("p",{className:"font-medium",children:new Date().toLocaleTimeString()})]}),(0,s.jsx)("div",{className:"w-16 h-16 bg-white/20 rounded-2xl flex items-center justify-center backdrop-blur-sm",children:(0,s.jsx)(_.Z,{className:"w-8 h-8 animate-pulse"})})]})]})}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[(0,s.jsx)(es,{title:"Total Organizations",value:(null==t?void 0:t.organizations.total)||0,change:null==t?void 0:t.organizations.growth_rate,changeLabel:"vs last month",icon:x.Z,color:"primary",loading:i}),(0,s.jsx)(es,{title:"Active Users",value:(null==t?void 0:t.users.active)||0,change:null==t?void 0:t.users.growth_rate,changeLabel:"vs last month",icon:m.Z,color:"success",loading:i}),(0,s.jsx)(es,{title:"Monthly Revenue",value:"$".concat(((null==t?void 0:t.revenue.monthly_recurring)||0).toLocaleString()),change:null==t?void 0:t.revenue.growth_rate,changeLabel:"vs last month",icon:Z.Z,color:"warning",loading:i}),(0,s.jsx)(es,{title:"System Health",value:"".concat((null==t?void 0:t.health.uptime)||0,"%"),change:.2,changeLabel:"uptime",icon:n.Z,color:"success",loading:i})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,s.jsx)(es,{title:"AI Agents",value:"".concat((null==t?void 0:t.resources.active_agents)||0,"/").concat((null==t?void 0:t.resources.total_agents)||0),icon:g.Z,color:"secondary",loading:i,onClick:()=>null==e?void 0:e("agents")}),(0,s.jsx)(es,{title:"Scheduled Tasks",value:"".concat((null==t?void 0:t.resources.active_tasks)||0,"/").concat((null==t?void 0:t.resources.total_tasks)||0),icon:h.Z,color:"primary",loading:i,onClick:()=>null==e?void 0:e("tasks")}),(0,s.jsx)(es,{title:"Active Pipelines",value:"".concat((null==t?void 0:t.resources.active_pipelines)||0,"/").concat((null==t?void 0:t.resources.total_pipelines)||0),icon:u.Z,color:"success",loading:i,onClick:()=>null==e?void 0:e("pipelines")})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,s.jsxs)("div",{className:"admin-card",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Platform Performance"}),(0,s.jsx)(S.Z,{className:"w-5 h-5 text-warning-500"})]}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)("span",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Success Rate"}),(0,s.jsxs)("span",{className:"text-lg font-bold text-success-600",children:[(null==t?void 0:t.usage.success_rate)||0,"%"]})]}),(0,s.jsx)("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2",children:(0,s.jsx)("div",{className:"bg-gradient-to-r from-success-500 to-success-600 h-2 rounded-full",style:{width:"".concat((null==t?void 0:t.usage.success_rate)||0,"%")}})}),(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)("span",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Avg Response Time"}),(0,s.jsxs)("span",{className:"text-lg font-bold text-primary-600",children:[(null==t?void 0:t.usage.average_response_time)||0,"ms"]})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)("span",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Total Requests"}),(0,s.jsx)("span",{className:"text-lg font-bold text-gray-900 dark:text-white",children:((null==t?void 0:t.usage.total_ai_requests)||0).toLocaleString()})]})]})]}),(0,s.jsxs)("div",{className:"admin-card",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Revenue Overview"}),(0,s.jsx)(C.Z,{className:"w-5 h-5 text-success-500"})]}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)("span",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Monthly Recurring Revenue"}),(0,s.jsxs)("span",{className:"text-lg font-bold text-success-600",children:["$",((null==t?void 0:t.revenue.monthly_recurring)||0).toLocaleString()]})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)("span",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Annual Recurring Revenue"}),(0,s.jsxs)("span",{className:"text-lg font-bold text-primary-600",children:["$",((null==t?void 0:t.revenue.annual_recurring)||0).toLocaleString()]})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)("span",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Churn Rate"}),(0,s.jsxs)("span",{className:"text-lg font-bold text-danger-600",children:[(null==t?void 0:t.revenue.churn_rate)||0,"%"]})]}),(0,s.jsx)("div",{className:"pt-4 border-t border-gray-200 dark:border-gray-700",children:(0,s.jsxs)("div",{className:"flex items-center text-success-600",children:[(0,s.jsx)(k.Z,{className:"w-4 h-4 mr-1"}),(0,s.jsxs)("span",{className:"text-sm font-medium",children:["+",(null==t?void 0:t.revenue.growth_rate)||0,"% growth this month"]})]})})]})]})]}),(0,s.jsxs)("div",{className:"admin-card",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Quick Actions"}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,s.jsxs)("button",{className:"flex items-center p-4 bg-primary-50 dark:bg-primary-900/20 rounded-lg hover:bg-primary-100 dark:hover:bg-primary-900/30 transition-colors",children:[(0,s.jsx)(x.Z,{className:"w-5 h-5 text-primary-600 mr-3"}),(0,s.jsx)("span",{className:"text-sm font-medium text-primary-700 dark:text-primary-300",children:"Manage Organizations"})]}),(0,s.jsxs)("button",{className:"flex items-center p-4 bg-success-50 dark:bg-success-900/20 rounded-lg hover:bg-success-100 dark:hover:bg-success-900/30 transition-colors",children:[(0,s.jsx)(n.Z,{className:"w-5 h-5 text-success-600 mr-3"}),(0,s.jsx)("span",{className:"text-sm font-medium text-success-700 dark:text-success-300",children:"System Health"})]}),(0,s.jsxs)("button",{className:"flex items-center p-4 bg-warning-50 dark:bg-warning-900/20 rounded-lg hover:bg-warning-100 dark:hover:bg-warning-900/30 transition-colors",children:[(0,s.jsx)(C.Z,{className:"w-5 h-5 text-warning-600 mr-3"}),(0,s.jsx)("span",{className:"text-sm font-medium text-warning-700 dark:text-warning-300",children:"View Analytics"})]})]})]})]})}var ei=a(5302),en=a(3639),el=a(5131),ed=a(3247),ec=a(740),eo=a(4630),ex=a(7684),em=a(9202),eg=a(1473),eh=a(7586);function eu(e){let{view:t,onViewChange:a,className:r=""}=e;return(0,s.jsxs)("div",{className:"flex items-center bg-gray-100 dark:bg-dark-700 rounded-lg p-1 ".concat(r),children:[(0,s.jsxs)("button",{onClick:()=>a("card"),className:"flex items-center px-3 py-2 rounded-md text-sm font-medium transition-colors ".concat("card"===t?"bg-white dark:bg-dark-800 text-gray-900 dark:text-white shadow-sm":"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white"),children:[(0,s.jsx)(eg.Z,{className:"w-4 h-4 mr-2"}),"Cards"]}),(0,s.jsxs)("button",{onClick:()=>a("list"),className:"flex items-center px-3 py-2 rounded-md text-sm font-medium transition-colors ".concat("list"===t?"bg-white dark:bg-dark-800 text-gray-900 dark:text-white shadow-sm":"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white"),children:[(0,s.jsx)(eh.Z,{className:"w-4 h-4 mr-2"}),"List"]})]})}function ep(e){let{status:t}=e,a={active:{icon:ei.Z,className:"bg-success-100 text-success-800 dark:bg-success-900 dark:text-success-200",label:"Active"},suspended:{icon:en.Z,className:"bg-warning-100 text-warning-800 dark:bg-warning-900 dark:text-warning-200",label:"Suspended"},cancelled:{icon:el.Z,className:"bg-danger-100 text-danger-800 dark:bg-danger-900 dark:text-danger-200",label:"Cancelled"}}[t];return(0,s.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ".concat(a.className),children:a.label})}function ey(){let[e,t]=(0,r.useState)([]),[a,i]=(0,r.useState)(!0),[l,d]=(0,r.useState)(""),[o,p]=(0,r.useState)(""),[y,b]=(0,r.useState)("all"),[j,v]=(0,r.useState)("list"),[N,f]=(0,r.useState)(null),[k,w]=(0,r.useState)(!1);(0,r.useEffect)(()=>{Z()},[]);let Z=async()=>{try{i(!0),d("");let e=await D.getOrganizations({page:1,limit:100,search:o,status:"all"===y?void 0:y});t(e.organizations)}catch(e){console.error("Error fetching organizations:",e),d(e.message),t([{id:"1",slack_team_id:"T12345",team_name:"Acme Corporation",domain:"acme.com",status:"active",created_at:"2024-01-15T10:30:00Z",updated_at:"2024-01-20T14:20:00Z",settings:{},billing_email:"billing@acme.com",installed_at:"2024-01-15T10:30:00Z",monthly_ai_requests:1240,monthly_agent_executions:89,monthly_task_executions:156,last_usage_reset:"2024-01-01",user_count:12,agent_count:8,task_count:15,pipeline_count:4,health_status:"healthy"},{id:"2",slack_team_id:"T67890",team_name:"TechStart Inc",domain:"techstart.io",status:"active",created_at:"2024-01-10T09:15:00Z",updated_at:"2024-01-18T16:45:00Z",settings:{},billing_email:"admin@techstart.io",installed_at:"2024-01-10T09:15:00Z",monthly_ai_requests:890,monthly_agent_executions:67,monthly_task_executions:98,last_usage_reset:"2024-01-01",user_count:8,agent_count:5,task_count:12,pipeline_count:2,health_status:"healthy"},{id:"3",slack_team_id:"T11111",team_name:"Global Solutions",domain:"globalsolutions.com",status:"suspended",created_at:"2024-01-08T14:20:00Z",updated_at:"2024-01-22T11:30:00Z",settings:{},billing_email:"billing@globalsolutions.com",installed_at:"2024-01-08T14:20:00Z",monthly_ai_requests:2450,monthly_agent_executions:189,monthly_task_executions:267,last_usage_reset:"2024-01-01",user_count:25,agent_count:18,task_count:32,pipeline_count:8,health_status:"warning"}])}finally{i(!1)}},S=e=>{f(e),w(!0)},A=e=>{f(e),w(!0)},T=e=>new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}),z=e=>{switch(null==e?void 0:e.toLowerCase()){case"active":return"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300";case"suspended":return"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-300";case"cancelled":return"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-300";default:return"bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-300"}},I=e=>{switch(null==e?void 0:e.toLowerCase()){case"healthy":default:return"bg-green-400";case"warning":return"bg-yellow-400";case"critical":return"bg-red-400"}},L=e.filter(e=>{var t;let a=e.team_name.toLowerCase().includes(o.toLowerCase())||(null===(t=e.domain)||void 0===t?void 0:t.toLowerCase().includes(o.toLowerCase()))||e.slack_team_id.toLowerCase().includes(o.toLowerCase()),s="all"===y||e.status===y;return a&&s});return a?(0,s.jsx)("div",{className:"p-6",children:(0,s.jsxs)("div",{className:"animate-pulse",children:[(0,s.jsx)("div",{className:"h-8 bg-gray-200 rounded w-1/4 mb-4"}),(0,s.jsx)("div",{className:"space-y-4",children:[void 0,void 0,void 0,void 0,void 0].map((e,t)=>(0,s.jsx)("div",{className:"h-20 bg-gray-200 rounded"},t))})]})}):(0,s.jsxs)("div",{className:"p-6 max-w-7xl mx-auto",children:[(0,s.jsxs)("div",{className:"mb-8",children:[(0,s.jsx)("div",{className:"flex items-center justify-between mb-4",children:(0,s.jsxs)("div",{children:[(0,s.jsxs)("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white flex items-center",children:[(0,s.jsx)(x.Z,{className:"w-8 h-8 mr-3 text-primary-600"}),"Organizations"]}),(0,s.jsx)("p",{className:"text-gray-600 dark:text-gray-400 mt-1",children:"Manage and monitor all client organizations"})]})}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6",children:[(0,s.jsx)("div",{className:"bg-white dark:bg-dark-800 rounded-xl p-4 border border-gray-200 dark:border-dark-700",children:(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)(x.Z,{className:"w-8 h-8 text-blue-600"}),(0,s.jsxs)("div",{className:"ml-3",children:[(0,s.jsx)("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Total Organizations"}),(0,s.jsx)("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:e.length})]})]})}),(0,s.jsx)("div",{className:"bg-white dark:bg-dark-800 rounded-xl p-4 border border-gray-200 dark:border-dark-700",children:(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)(ei.Z,{className:"w-8 h-8 text-green-600"}),(0,s.jsxs)("div",{className:"ml-3",children:[(0,s.jsx)("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Active"}),(0,s.jsx)("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:e.filter(e=>"active"===e.status).length})]})]})}),(0,s.jsx)("div",{className:"bg-white dark:bg-dark-800 rounded-xl p-4 border border-gray-200 dark:border-dark-700",children:(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)(m.Z,{className:"w-8 h-8 text-purple-600"}),(0,s.jsxs)("div",{className:"ml-3",children:[(0,s.jsx)("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Total Users"}),(0,s.jsx)("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:e.reduce((e,t)=>e+(t.user_count||0),0).toLocaleString()})]})]})}),(0,s.jsx)("div",{className:"bg-white dark:bg-dark-800 rounded-xl p-4 border border-gray-200 dark:border-dark-700",children:(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)(C.Z,{className:"w-8 h-8 text-orange-600"}),(0,s.jsxs)("div",{className:"ml-3",children:[(0,s.jsx)("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Monthly Requests"}),(0,s.jsx)("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:e.reduce((e,t)=>e+(t.monthly_ai_requests||0),0).toLocaleString()})]})]})})]}),(0,s.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4 mb-6",children:[(0,s.jsxs)("div",{className:"flex-1 relative",children:[(0,s.jsx)(ed.Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),(0,s.jsx)("input",{type:"text",placeholder:"Search organizations, domains, or team IDs...",value:o,onChange:e=>p(e.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-dark-600 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent bg-white dark:bg-dark-800 text-gray-900 dark:text-white"})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)(ec.Z,{className:"w-5 h-5 text-gray-400"}),(0,s.jsxs)("select",{value:y,onChange:e=>b(e.target.value),className:"px-3 py-2 border border-gray-300 dark:border-dark-600 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent bg-white dark:bg-dark-800 text-gray-900 dark:text-white",children:[(0,s.jsx)("option",{value:"all",children:"All Status"}),(0,s.jsx)("option",{value:"active",children:"Active"}),(0,s.jsx)("option",{value:"suspended",children:"Suspended"}),(0,s.jsx)("option",{value:"cancelled",children:"Cancelled"})]})]}),(0,s.jsx)(eu,{view:j,onViewChange:v})]})]})]}),"card"===j?(0,s.jsx)("div",{className:"grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 gap-6",children:L.map(e=>(0,s.jsxs)("div",{className:"bg-white dark:bg-dark-800 rounded-xl border border-gray-200 dark:border-dark-700 hover:shadow-lg transition-all duration-200 hover:scale-[1.02]",children:[(0,s.jsxs)("div",{className:"p-6 pb-4",children:[(0,s.jsxs)("div",{className:"flex items-start justify-between mb-4",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,s.jsx)("div",{className:"w-12 h-12 bg-gradient-to-r from-blue-500 to-purple-600 rounded-lg flex items-center justify-center",children:(0,s.jsx)(x.Z,{className:"w-6 h-6 text-white"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white truncate max-w-[150px]",children:e.team_name}),(0,s.jsxs)("div",{className:"flex items-center space-x-2 mt-1",children:[(0,s.jsx)("span",{className:"px-2 py-1 rounded-full text-xs font-medium ".concat(z(e.status)),children:e.status}),(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)("div",{className:"w-2 h-2 rounded-full mr-1 ".concat(I(e.health_status||"healthy"))}),(0,s.jsx)("span",{className:"text-xs text-gray-500 dark:text-gray-400 capitalize",children:e.health_status||"healthy"})]})]})]})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)("button",{onClick:()=>S(e),className:"p-2 text-gray-400 hover:text-blue-600 hover:bg-blue-50 dark:hover:bg-blue-900/20 rounded-lg transition-colors",title:"View Details",children:(0,s.jsx)(c.Z,{className:"w-4 h-4"})}),(0,s.jsx)("button",{onClick:()=>A(e),className:"p-2 text-gray-400 hover:text-green-600 hover:bg-green-50 dark:hover:bg-green-900/20 rounded-lg transition-colors",title:"Edit",children:(0,s.jsx)(eo.Z,{className:"w-4 h-4"})}),(0,s.jsx)("div",{className:"relative",children:(0,s.jsx)("button",{className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",title:"More actions",children:(0,s.jsx)(ex.Z,{className:"w-4 h-4"})})})]})]}),(0,s.jsxs)("div",{className:"space-y-2 mb-4",children:[(0,s.jsxs)("div",{className:"flex items-center text-sm text-gray-600 dark:text-gray-400",children:[(0,s.jsx)(em.Z,{className:"w-4 h-4 mr-2"}),(0,s.jsx)("span",{children:e.domain||"No domain"})]}),(0,s.jsxs)("div",{className:"flex items-center text-sm text-gray-600 dark:text-gray-400",children:[(0,s.jsx)(n.Z,{className:"w-4 h-4 mr-2"}),(0,s.jsx)("span",{children:e.slack_team_id})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-4 gap-3 mb-4",children:[(0,s.jsxs)("div",{className:"flex flex-col items-center p-2 bg-gray-50 dark:bg-dark-700 rounded-lg",children:[(0,s.jsx)("div",{className:"p-1 rounded text-blue-600 bg-blue-100 dark:bg-blue-900/20",children:(0,s.jsx)(m.Z,{className:"w-4 h-4"})}),(0,s.jsx)("span",{className:"text-xs text-gray-600 dark:text-gray-400 mt-1",children:e.user_count||0})]}),(0,s.jsxs)("div",{className:"flex flex-col items-center p-2 bg-gray-50 dark:bg-dark-700 rounded-lg",children:[(0,s.jsx)("div",{className:"p-1 rounded text-purple-600 bg-purple-100 dark:bg-purple-900/20",children:(0,s.jsx)(g.Z,{className:"w-4 h-4"})}),(0,s.jsx)("span",{className:"text-xs text-gray-600 dark:text-gray-400 mt-1",children:e.agent_count||0})]}),(0,s.jsxs)("div",{className:"flex flex-col items-center p-2 bg-gray-50 dark:bg-dark-700 rounded-lg",children:[(0,s.jsx)("div",{className:"p-1 rounded text-green-600 bg-green-100 dark:bg-green-900/20",children:(0,s.jsx)(h.Z,{className:"w-4 h-4"})}),(0,s.jsx)("span",{className:"text-xs text-gray-600 dark:text-gray-400 mt-1",children:e.task_count||0})]}),(0,s.jsxs)("div",{className:"flex flex-col items-center p-2 bg-gray-50 dark:bg-dark-700 rounded-lg",children:[(0,s.jsx)("div",{className:"p-1 rounded text-orange-600 bg-orange-100 dark:bg-orange-900/20",children:(0,s.jsx)(u.Z,{className:"w-4 h-4"})}),(0,s.jsx)("span",{className:"text-xs text-gray-600 dark:text-gray-400 mt-1",children:e.pipeline_count||0})]})]})]}),(0,s.jsxs)("div",{className:"px-6 py-4 bg-gray-50 dark:bg-dark-700 rounded-b-xl border-t border-gray-100 dark:border-dark-600",children:[(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsxs)("div",{className:"flex items-center justify-center space-x-1 mb-1",children:[(0,s.jsx)(C.Z,{className:"w-4 h-4 text-blue-500"}),(0,s.jsx)("span",{className:"text-sm font-semibold text-gray-900 dark:text-white",children:(e.monthly_ai_requests||0).toLocaleString()})]}),(0,s.jsx)("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Requests"})]}),(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsxs)("div",{className:"flex items-center justify-center space-x-1 mb-1",children:[(0,s.jsx)(_.Z,{className:"w-4 h-4 text-green-500"}),(0,s.jsx)("span",{className:"text-sm font-semibold text-gray-900 dark:text-white",children:(e.monthly_agent_executions||0).toLocaleString()})]}),(0,s.jsx)("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Executions"})]})]}),(0,s.jsxs)("div",{className:"flex items-center justify-center mt-3 pt-3 border-t border-gray-200 dark:border-dark-600",children:[(0,s.jsx)(h.Z,{className:"w-3 h-3 text-gray-400 mr-1"}),(0,s.jsxs)("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:["Created ",T(e.created_at)]})]})]})]},e.id))}):(0,s.jsx)("div",{className:"admin-card overflow-hidden",children:(0,s.jsx)("div",{className:"overflow-x-auto",children:(0,s.jsxs)("table",{className:"admin-table",children:[(0,s.jsx)("thead",{className:"bg-gray-50 dark:bg-gray-800",children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{children:"Organization"}),(0,s.jsx)("th",{children:"Status"}),(0,s.jsx)("th",{children:"Health"}),(0,s.jsx)("th",{children:"Resources"}),(0,s.jsx)("th",{children:"Usage"}),(0,s.jsx)("th",{children:"Created"}),(0,s.jsx)("th",{children:"Actions"})]})}),(0,s.jsx)("tbody",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:L.map(e=>(0,s.jsxs)("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-800 transition-colors",children:[(0,s.jsx)("td",{children:(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)("div",{className:"w-10 h-10 bg-gradient-to-r from-blue-500 to-purple-600 rounded-lg flex items-center justify-center text-white font-medium text-sm mr-3",children:(0,s.jsx)(x.Z,{className:"w-5 h-5"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"font-medium text-gray-900 dark:text-white",children:e.team_name}),(0,s.jsx)("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:e.slack_team_id})]})]})}),(0,s.jsx)("td",{children:(0,s.jsx)(ep,{status:e.status})}),(0,s.jsx)("td",{children:(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)("div",{className:"w-2 h-2 rounded-full mr-2 ".concat(I(e.health_status||"healthy"))}),(0,s.jsx)("span",{className:"text-sm capitalize text-gray-600 dark:text-gray-300",children:e.health_status||"healthy"})]})}),(0,s.jsx)("td",{children:(0,s.jsxs)("div",{className:"flex items-center space-x-4 text-sm",children:[(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)(m.Z,{className:"w-4 h-4 text-blue-500 mr-1"}),(0,s.jsx)("span",{children:e.user_count||0})]}),(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)(g.Z,{className:"w-4 h-4 text-purple-500 mr-1"}),(0,s.jsx)("span",{children:e.agent_count||0})]}),(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)(h.Z,{className:"w-4 h-4 text-green-500 mr-1"}),(0,s.jsx)("span",{children:e.task_count||0})]}),(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)(u.Z,{className:"w-4 h-4 text-orange-500 mr-1"}),(0,s.jsx)("span",{children:e.pipeline_count||0})]})]})}),(0,s.jsx)("td",{children:(0,s.jsxs)("div",{className:"text-sm",children:[(0,s.jsxs)("div",{className:"font-medium text-gray-900 dark:text-white",children:[(e.monthly_ai_requests||0).toLocaleString()," requests"]}),(0,s.jsxs)("div",{className:"text-gray-500 dark:text-gray-400",children:[(e.monthly_agent_executions||0).toLocaleString()," executions"]})]})}),(0,s.jsx)("td",{className:"text-sm text-gray-500 dark:text-gray-400",children:T(e.created_at)}),(0,s.jsx)("td",{children:(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)("button",{onClick:()=>S(e),className:"p-2 text-gray-400 hover:text-primary-600 hover:bg-primary-50 dark:hover:bg-primary-900/20 rounded-lg transition-colors",title:"View Details",children:(0,s.jsx)(c.Z,{className:"w-4 h-4"})}),(0,s.jsx)("button",{onClick:()=>A(e),className:"p-2 text-gray-400 hover:text-blue-600 hover:bg-blue-50 dark:hover:bg-blue-900/20 rounded-lg transition-colors",title:"Edit",children:(0,s.jsx)(eo.Z,{className:"w-4 h-4"})}),(0,s.jsx)("div",{className:"relative",children:(0,s.jsx)("button",{className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",title:"More actions",children:(0,s.jsx)(ex.Z,{className:"w-4 h-4"})})})]})})]},e.id))})]})})}),0===L.length&&(0,s.jsxs)("div",{className:"text-center py-12",children:[(0,s.jsx)(x.Z,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),(0,s.jsx)("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:"No organizations found"}),(0,s.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:"Try adjusting your search criteria"})]}),k&&N&&(0,s.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:(0,s.jsx)("div",{className:"bg-white dark:bg-dark-800 rounded-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:(0,s.jsxs)("div",{className:"p-6",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,s.jsx)("h2",{className:"text-xl font-bold text-gray-900 dark:text-white",children:N.team_name}),(0,s.jsx)("button",{onClick:()=>w(!1),className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",children:(0,s.jsx)(el.Z,{className:"w-5 h-5"})})]}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Team ID"}),(0,s.jsx)("div",{className:"text-sm text-gray-900 dark:text-white font-mono",children:N.slack_team_id})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Domain"}),(0,s.jsx)("div",{className:"text-sm text-gray-900 dark:text-white",children:N.domain||"Not set"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Status"}),(0,s.jsx)(ep,{status:N.status})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Created"}),(0,s.jsx)("div",{className:"text-sm text-gray-900 dark:text-white",children:T(N.created_at)})]})]})]})})})]})}var eb=a(2735),ej=a(9345),ev=a(9663),eN=a(3276),ef=a(2369),ek=a(2207),ew=a(1723),e_=a(3229),eZ=a(6337),eS=a(4822),eC=a(1217),eA=a(6034),eT=a(8866),ez=a(2718),eI=a(6911),eL=a(2720),eP=a(9554),eO=a(9397),eD=a(3417);function eE(e){var t,a;let{agent:i,isOpen:n,onClose:l,onSave:d}=e,[o,u]=(0,r.useState)(!1),[y,v]=(0,r.useState)(null),[N,f]=(0,r.useState)(null),[k,w]=(0,r.useState)(!1),[Z,C]=(0,r.useState)([{name:"",value:""},{name:"",value:""},{name:"",value:""}]),[A,T]=(0,r.useState)([{name:"",value:""},{name:"",value:""},{name:"",value:""}]),[z,I]=(0,r.useState)([{id:"",name:""}]),[L,P]=(0,r.useState)([]),[O,E]=(0,r.useState)(!1),[U,M]=(0,r.useState)(null),[q,R]=(0,r.useState)(!1);(0,r.useEffect)(()=>{if(i&&n){v({...i});let e=Object.entries(i.capabilities||{}).map(e=>{let[t,a]=e;return{name:t,value:"object"==typeof a?JSON.stringify(a):String(a)}});for(;e.length<3;)e.push({name:"",value:""});C(e);let t=Object.entries(i.settings||{}).map(e=>{let[t,a]=e;return{name:t,value:"object"==typeof a?JSON.stringify(a):String(a)}});for(;t.length<3;)t.push({name:"",value:""});T(t),I(i.slack_channels&&i.slack_channels.length>0?i.slack_channels.map(e=>"string"==typeof e?{id:"",name:e}:{id:e.id||"",name:e.name||e}):[{id:"",name:""}]),V()}},[i,n]);let F=e=>{let t={};return e.forEach(e=>{if(e.name.trim())try{t[e.name.trim()]=JSON.parse(e.value)}catch(a){t[e.name.trim()]=e.value}}),t},V=async()=>{if(i)try{w(!0);let e=await D.getOrganizations(),t=(e.organizations||e).find(e=>e.id===i.organization_id);f(t),await W(i.organization_id),await G(i.id)}catch(e){console.error("Error fetching agent details:",e)}finally{w(!1)}},W=async e=>{try{E(!0);let t=await D.getSlackChannels(e);t.error?(console.warn("Could not fetch Slack channels:",t.error),P([])):P(t.channels||[])}catch(e){console.error("Error fetching Slack channels:",e),P([])}finally{E(!1)}},G=async e=>{try{R(!0);let t=await D.getAgentThreads(e);M(t)}catch(e){console.error("Error fetching agent threads:",e),M(null)}finally{R(!1)}},B=async()=>{if(y)try{w(!0);let e={...y,capabilities:F(Z),settings:F(A),slack_channels:z.filter(e=>""!==e.name.trim())};d(e),u(!1)}catch(e){console.error("Error saving agent:",e)}finally{w(!1)}},J=e=>new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"});return n&&i?(0,s.jsx)("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:(0,s.jsxs)("div",{className:"flex items-center justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0",children:[(0,s.jsx)("div",{className:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity",onClick:l}),(0,s.jsxs)("div",{className:"inline-block align-bottom bg-white dark:bg-dark-800 rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-4xl sm:w-full",children:[(0,s.jsx)("div",{className:"bg-gradient-to-r from-green-600 to-blue-600 px-6 py-4",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,s.jsx)("div",{className:"w-12 h-12 bg-white/20 rounded-full flex items-center justify-center",children:(0,s.jsx)(g.Z,{className:"w-6 h-6 text-white"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"text-xl font-bold text-white",children:i.name||"Unnamed Agent"}),(0,s.jsx)("p",{className:"text-green-100",children:"AI Agent Configuration & Analytics"})]})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsxs)("button",{onClick:()=>u(!o),className:"flex items-center px-3 py-2 bg-white/20 text-white rounded-lg hover:bg-white/30 transition-colors",children:[(0,s.jsx)(ek.Z,{className:"w-4 h-4 mr-2"}),o?"Cancel":"Edit"]}),(0,s.jsx)("button",{onClick:l,className:"p-2 text-white hover:bg-white/20 rounded-lg transition-colors",children:(0,s.jsx)(j.Z,{className:"w-5 h-5"})})]})]})}),(0,s.jsx)("div",{className:"px-6 py-6 max-h-[70vh] overflow-y-auto",children:k?(0,s.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,s.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-green-600"})}):(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"bg-gray-50 dark:bg-dark-700 rounded-lg p-4",children:[(0,s.jsxs)("h4",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4 flex items-center",children:[(0,s.jsx)(g.Z,{className:"w-5 h-5 mr-2"}),"Basic Information"]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Agent Name"}),o?(0,s.jsx)("input",{type:"text",value:(null==y?void 0:y.name)||"",onChange:e=>v(t=>t?{...t,name:e.target.value}:null),className:"w-full px-3 py-2 border border-gray-300 dark:border-dark-600 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent bg-white dark:bg-dark-800 text-gray-900 dark:text-white"}):(0,s.jsx)("p",{className:"text-gray-900 dark:text-white",children:i.name||"Unnamed Agent"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Status"}),o?(0,s.jsxs)("select",{value:(null==y?void 0:y.status)||"active",onChange:e=>v(t=>t?{...t,status:e.target.value}:null),className:"w-full px-3 py-2 border border-gray-300 dark:border-dark-600 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent bg-white dark:bg-dark-800 text-gray-900 dark:text-white",children:[(0,s.jsx)("option",{value:"active",children:"Active"}),(0,s.jsx)("option",{value:"paused",children:"Paused"}),(0,s.jsx)("option",{value:"disabled",children:"Disabled"})]}):(0,s.jsx)("span",{className:"inline-flex px-2 py-1 rounded-full text-xs font-medium ".concat((e=>{switch(null==e?void 0:e.toLowerCase()){case"active":return"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300";case"paused":return"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-300";case"inactive":return"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-300";default:return"bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-300"}})(i.status)),children:i.status||"active"})]}),(0,s.jsxs)("div",{className:"md:col-span-2",children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Description"}),o?(0,s.jsx)("textarea",{value:(null==y?void 0:y.description)||"",onChange:e=>v(t=>t?{...t,description:e.target.value}:null),rows:2,className:"w-full px-3 py-2 border border-gray-300 dark:border-dark-600 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent bg-white dark:bg-dark-800 text-gray-900 dark:text-white",placeholder:"Brief description of what this agent does..."}):(0,s.jsx)("p",{className:"text-gray-900 dark:text-white",children:i.description||"No description provided"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Visibility"}),o?(0,s.jsxs)("select",{value:(null==y?void 0:y.visibility)||"public",onChange:e=>v(t=>t?{...t,visibility:e.target.value}:null),className:"w-full px-3 py-2 border border-gray-300 dark:border-dark-600 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent bg-white dark:bg-dark-800 text-gray-900 dark:text-white",children:[(0,s.jsx)("option",{value:"public",children:"Public"}),(0,s.jsx)("option",{value:"private",children:"Private"})]}):(0,s.jsxs)("div",{className:"flex items-center",children:["private"===i.visibility?(0,s.jsx)(eZ.Z,{className:"w-4 h-4 mr-2 text-red-500"}):(0,s.jsx)(em.Z,{className:"w-4 h-4 mr-2 text-green-500"}),(0,s.jsx)("span",{className:"text-gray-900 dark:text-white capitalize",children:i.visibility||"public"})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Organization"}),(0,s.jsxs)("p",{className:"text-gray-900 dark:text-white flex items-center",children:[(0,s.jsx)(x.Z,{className:"w-4 h-4 mr-2"}),(null==N?void 0:N.team_name)||"Unknown Organization"]})]})]})]}),(0,s.jsxs)("div",{className:"bg-gray-50 dark:bg-dark-700 rounded-lg p-4",children:[(0,s.jsxs)("h4",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4 flex items-center",children:[(0,s.jsx)(eS.Z,{className:"w-5 h-5 mr-2"}),"OpenAI Configuration & Threads"]}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"bg-white dark:bg-dark-800 rounded-lg p-4 border-l-4 border-blue-500",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"OpenAI Assistant ID"}),i.openai_assistant_id&&(0,s.jsx)("span",{className:"px-2 py-1 bg-green-100 dark:bg-green-900 text-green-800 dark:text-green-200 text-xs rounded-full",children:"Configured"})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)(eC.Z,{className:"w-5 h-5 text-blue-500"}),(0,s.jsx)("p",{className:"text-gray-900 dark:text-white font-mono text-lg font-semibold",children:i.openai_assistant_id||(0,s.jsx)("span",{className:"text-gray-500 italic",children:"Not configured"})}),i.openai_assistant_id&&(0,s.jsx)("button",{onClick:()=>navigator.clipboard.writeText(i.openai_assistant_id),className:"p-1 text-gray-400 hover:text-blue-600 transition-colors",title:"Copy to clipboard",children:(0,s.jsx)(c.Z,{className:"w-4 h-4"})})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Function Calling"}),o?(0,s.jsxs)("button",{onClick:()=>v(e=>e?{...e,function_calling_enabled:!e.function_calling_enabled}:null),className:"flex items-center space-x-2",children:[(null==y?void 0:y.function_calling_enabled)?(0,s.jsx)(eA.Z,{className:"w-6 h-6 text-green-500"}):(0,s.jsx)(eT.Z,{className:"w-6 h-6 text-gray-400"}),(0,s.jsx)("span",{className:"text-sm text-gray-900 dark:text-white",children:(null==y?void 0:y.function_calling_enabled)?"Enabled":"Disabled"})]}):(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[i.function_calling_enabled?(0,s.jsx)(eA.Z,{className:"w-6 h-6 text-green-500"}):(0,s.jsx)(eT.Z,{className:"w-6 h-6 text-gray-400"}),(0,s.jsx)("span",{className:"text-sm text-gray-900 dark:text-white",children:i.function_calling_enabled?"Enabled":"Disabled"})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Energy Level"}),(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)(S.Z,{className:"w-4 h-4 text-yellow-500"}),(0,s.jsx)("div",{className:"flex-1",children:(0,s.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2",children:(0,s.jsx)("div",{className:"bg-yellow-500 h-2 rounded-full",style:{width:"".concat(i.energy||100,"%")}})})}),(0,s.jsxs)("span",{className:"text-sm font-medium text-gray-900 dark:text-white",children:[i.energy||100,"%"]})]})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[(0,s.jsxs)("div",{className:"bg-white dark:bg-dark-800 rounded-lg p-3 text-center",children:[(0,s.jsx)("div",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400",children:q?"...":(null==U?void 0:U.total_threads)||0}),(0,s.jsx)("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Active Threads"})]}),(0,s.jsxs)("div",{className:"bg-white dark:bg-dark-800 rounded-lg p-3 text-center",children:[(0,s.jsx)("div",{className:"text-2xl font-bold text-green-600 dark:text-green-400",children:q?"...":(null==U?void 0:U.total_users)||0}),(0,s.jsx)("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Unique Users"})]}),(0,s.jsxs)("div",{className:"bg-white dark:bg-dark-800 rounded-lg p-3 text-center",children:[(0,s.jsx)("div",{className:"text-2xl font-bold text-purple-600 dark:text-purple-400",children:q?"...":(null==U?void 0:U.total_interactions)||0}),(0,s.jsx)("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Total Messages"})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("h5",{className:"text-md font-semibold text-gray-900 dark:text-white mb-3 flex items-center",children:[(0,s.jsx)(ez.Z,{className:"w-4 h-4 mr-2"}),"Agent ↔ User Threads",q&&(0,s.jsx)("div",{className:"ml-2 w-4 h-4 border-2 border-blue-600 border-t-transparent rounded-full animate-spin"})]}),(0,s.jsx)("div",{className:"max-h-64 overflow-y-auto space-y-2",children:(null==U?void 0:U.threads)&&U.threads.length>0?U.threads.map((e,t)=>(0,s.jsxs)("div",{className:"bg-white dark:bg-dark-800 rounded-lg p-3 border border-gray-200 dark:border-dark-600",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)(m.Z,{className:"w-4 h-4 text-gray-500"}),(0,s.jsx)("span",{className:"font-medium text-gray-900 dark:text-white text-sm",children:e.user_name}),(0,s.jsxs)("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:["(@",e.slack_user_id,")"]})]}),(0,s.jsxs)("span",{className:"px-2 py-1 bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 text-xs rounded",children:[e.interaction_count," messages"]})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between text-xs text-gray-500 dark:text-gray-400",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,s.jsx)(eC.Z,{className:"w-3 h-3"}),(0,s.jsxs)("span",{className:"font-mono",children:[e.thread_id.slice(0,12),"..."]}),(0,s.jsx)("button",{onClick:()=>navigator.clipboard.writeText(e.thread_id),className:"p-0.5 hover:text-blue-600 transition-colors",title:"Copy thread ID",children:(0,s.jsx)(c.Z,{className:"w-3 h-3"})})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,s.jsx)(ew.Z,{className:"w-3 h-3"}),(0,s.jsxs)("span",{children:["Last: ",J(e.last_interaction)]})]})]})]},"".concat(e.user_id,"-").concat(e.thread_id))):q?(0,s.jsxs)("div",{className:"text-center py-4",children:[(0,s.jsx)("div",{className:"inline-block w-6 h-6 border-2 border-blue-600 border-t-transparent rounded-full animate-spin"}),(0,s.jsx)("p",{className:"text-gray-500 dark:text-gray-400 mt-2",children:"Loading threads..."})]}):(0,s.jsxs)("div",{className:"text-center py-6 text-gray-500 dark:text-gray-400",children:[(0,s.jsx)(ez.Z,{className:"w-8 h-8 mx-auto mb-2 opacity-50"}),(0,s.jsx)("p",{children:"No active threads found"}),(0,s.jsx)("p",{className:"text-xs mt-1",children:"Threads will appear here once users interact with this agent"})]})})]})]})]}),(0,s.jsxs)("div",{className:"bg-gray-50 dark:bg-dark-700 rounded-lg p-4",children:[(0,s.jsxs)("h4",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4 flex items-center",children:[(0,s.jsx)(eI.Z,{className:"w-5 h-5 mr-2"}),"Prompt & Personality"]}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"System Prompt"}),o?(0,s.jsx)("textarea",{value:(null==y?void 0:y.prompt)||"",onChange:e=>v(t=>t?{...t,prompt:e.target.value}:null),rows:6,className:"w-full px-3 py-2 border border-gray-300 dark:border-dark-600 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent bg-white dark:bg-dark-800 text-gray-900 dark:text-white font-mono text-sm",placeholder:"Enter the system prompt that defines this agent's behavior and personality..."}):(0,s.jsx)("div",{className:"bg-white dark:bg-dark-800 border border-gray-300 dark:border-dark-600 rounded-lg p-3",children:(0,s.jsx)("pre",{className:"text-sm text-gray-900 dark:text-white whitespace-pre-wrap font-mono",children:i.prompt||"No system prompt configured"})})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Persistent Context"}),o?(0,s.jsx)("textarea",{value:(null==y?void 0:y.persistent_context)||"",onChange:e=>v(t=>t?{...t,persistent_context:e.target.value}:null),rows:4,className:"w-full px-3 py-2 border border-gray-300 dark:border-dark-600 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent bg-white dark:bg-dark-800 text-gray-900 dark:text-white",placeholder:"Context that persists across conversations..."}):(0,s.jsx)("div",{className:"bg-white dark:bg-dark-800 border border-gray-300 dark:border-dark-600 rounded-lg p-3",children:(0,s.jsx)("p",{className:"text-sm text-gray-900 dark:text-white",children:i.persistent_context||"No persistent context configured"})})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-3",children:"Capabilities & Personality Traits"}),o?(0,s.jsxs)("div",{className:"space-y-3",children:[Z.map((e,t)=>(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-1 flex-1",children:[(0,s.jsx)(eL.Z,{className:"w-4 h-4 text-gray-400"}),(0,s.jsx)("input",{type:"text",placeholder:"Name (e.g., personality)",value:e.name,onChange:e=>{let a=[...Z];a[t].name=e.target.value,C(a)},className:"flex-1 px-3 py-2 border border-gray-300 dark:border-dark-600 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent bg-white dark:bg-dark-800 text-gray-900 dark:text-white text-sm"})]}),(0,s.jsx)("input",{type:"text",placeholder:"Value (e.g., helpful, creative)",value:e.value,onChange:e=>{let a=[...Z];a[t].value=e.target.value,C(a)},className:"flex-1 px-3 py-2 border border-gray-300 dark:border-dark-600 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent bg-white dark:bg-dark-800 text-gray-900 dark:text-white text-sm"}),Z.length>3&&(0,s.jsx)("button",{onClick:()=>{C(Z.filter((e,a)=>a!==t))},className:"p-2 text-red-600 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg transition-colors",children:(0,s.jsx)(eP.Z,{className:"w-4 h-4"})})]},t)),(0,s.jsxs)("button",{onClick:()=>{C([...Z,{name:"",value:""}])},className:"flex items-center space-x-2 px-3 py-2 text-green-600 hover:bg-green-50 dark:hover:bg-green-900/20 rounded-lg transition-colors text-sm font-medium",children:[(0,s.jsx)(eO.Z,{className:"w-4 h-4"}),(0,s.jsx)("span",{children:"Add More"})]})]}):(0,s.jsx)("div",{className:"bg-white dark:bg-dark-800 border border-gray-300 dark:border-dark-600 rounded-lg p-3",children:Object.keys(i.capabilities||{}).length>0?(0,s.jsx)("div",{className:"space-y-2",children:Object.entries(i.capabilities||{}).map(e=>{let[t,a]=e;return(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)(eL.Z,{className:"w-4 h-4 text-gray-400"}),(0,s.jsxs)("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:[t,":"]}),(0,s.jsx)("span",{className:"text-sm text-gray-900 dark:text-white",children:"object"==typeof a?JSON.stringify(a):String(a)})]},t)})}):(0,s.jsx)("p",{className:"text-sm text-gray-500 dark:text-gray-400 italic",children:"No capabilities configured"})})]})]})]}),(0,s.jsxs)("div",{className:"bg-gray-50 dark:bg-dark-700 rounded-lg p-4",children:[(0,s.jsxs)("h4",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4 flex items-center",children:[(0,s.jsx)(eD.Z,{className:"w-5 h-5 mr-2"}),"Slack Integration"]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Respond to All Messages"}),o?(0,s.jsxs)("button",{onClick:()=>v(e=>e?{...e,respond_to_all_messages:!e.respond_to_all_messages}:null),className:"flex items-center space-x-2",children:[(null==y?void 0:y.respond_to_all_messages)?(0,s.jsx)(eA.Z,{className:"w-6 h-6 text-green-500"}):(0,s.jsx)(eT.Z,{className:"w-6 h-6 text-gray-400"}),(0,s.jsx)("span",{className:"text-sm text-gray-900 dark:text-white",children:(null==y?void 0:y.respond_to_all_messages)?"Yes":"Only when mentioned"})]}):(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[i.respond_to_all_messages?(0,s.jsx)(eA.Z,{className:"w-6 h-6 text-green-500"}):(0,s.jsx)(eT.Z,{className:"w-6 h-6 text-gray-400"}),(0,s.jsx)("span",{className:"text-sm text-gray-900 dark:text-white",children:i.respond_to_all_messages?"Yes":"Only when mentioned"})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-3",children:"Active Channels"}),o?(0,s.jsxs)("div",{className:"space-y-3",children:[L.length>0&&(0,s.jsxs)("div",{className:"bg-blue-50 dark:bg-blue-900/20 p-3 rounded-lg",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-2 mb-2",children:[(0,s.jsx)(em.Z,{className:"w-4 h-4 text-blue-600"}),(0,s.jsxs)("span",{className:"text-sm font-medium text-blue-900 dark:text-blue-100",children:["Available Slack Channels (",L.length,")"]})]}),(0,s.jsx)("div",{className:"grid grid-cols-2 gap-2 max-h-32 overflow-y-auto",children:L.slice(0,10).map(e=>(0,s.jsxs)("button",{onClick:()=>{z.some(t=>t.id===e.id||t.name===e.name)||I([...z,{id:e.id,name:e.name}])},className:"text-left p-2 hover:bg-blue-100 dark:hover:bg-blue-800/30 rounded text-xs flex items-center space-x-1",children:[(0,s.jsx)(eC.Z,{className:"w-3 h-3 text-blue-500"}),(0,s.jsx)("span",{className:"font-medium",children:e.name}),e.is_private&&(0,s.jsx)(eZ.Z,{className:"w-3 h-3 text-gray-400"})]},e.id))}),L.length>10&&(0,s.jsx)("div",{className:"text-xs text-blue-600 dark:text-blue-400 mt-2",children:"Showing first 10 channels. Type channel name below to add others."})]}),z.map((e,t)=>(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-1 flex-1",children:[(0,s.jsx)(eC.Z,{className:"w-4 h-4 text-blue-500"}),(0,s.jsx)("input",{type:"text",placeholder:"Channel name (e.g., general, support, dev-team)",value:e.name,onChange:e=>{let a=[...z],s=L.find(t=>t.name===e.target.value);a[t]={id:(null==s?void 0:s.id)||"",name:e.target.value},I(a)},className:"flex-1 px-3 py-2 border border-gray-300 dark:border-dark-600 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent bg-white dark:bg-dark-800 text-gray-900 dark:text-white text-sm",list:"channels-".concat(t)}),(0,s.jsx)("datalist",{id:"channels-".concat(t),children:L.map(e=>(0,s.jsx)("option",{value:e.name},e.id))}),e.id&&(0,s.jsxs)("span",{className:"text-xs text-green-600 dark:text-green-400 font-mono",children:["✓ ID: ",e.id.slice(0,8),"..."]})]}),z.length>1&&(0,s.jsx)("button",{onClick:()=>{I(z.filter((e,a)=>a!==t))},className:"p-2 text-red-600 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg transition-colors",children:(0,s.jsx)(eP.Z,{className:"w-4 h-4"})})]},t)),(0,s.jsxs)("button",{onClick:()=>{I([...z,{id:"",name:""}])},className:"flex items-center space-x-2 px-3 py-2 text-blue-600 hover:bg-blue-50 dark:hover:bg-blue-900/20 rounded-lg transition-colors text-sm font-medium",children:[(0,s.jsx)(eO.Z,{className:"w-4 h-4"}),(0,s.jsx)("span",{children:"Add Channel"})]}),(0,s.jsx)("div",{className:"text-xs text-gray-500 dark:text-gray-400 mt-2",children:"\uD83D\uDCA1 Pro tip: Click available channels above to add them, or type channel names manually. Channel IDs will be auto-resolved when available."}),O&&(0,s.jsx)("div",{className:"text-xs text-blue-600 dark:text-blue-400",children:"Loading available channels..."})]}):(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:"flex items-center space-x-2 mb-2",children:[(0,s.jsx)(m.Z,{className:"w-4 h-4 text-gray-400"}),(0,s.jsxs)("span",{className:"text-sm text-gray-900 dark:text-white",children:[(null===(t=i.slack_channels)||void 0===t?void 0:t.length)||0," channels configured"]})]}),(null===(a=i.slack_channels)||void 0===a?void 0:a.length)>0?(0,s.jsx)("div",{className:"flex flex-wrap gap-1",children:i.slack_channels.map((e,t)=>{let a="string"==typeof e?e:e.name||e.id,r="object"==typeof e?e.id:"";return(0,s.jsxs)("span",{className:"px-2 py-1 bg-blue-100 dark:bg-blue-900 text-blue-800 dark:text-blue-200 text-xs rounded flex items-center",children:[(0,s.jsx)(eC.Z,{className:"w-3 h-3 mr-1"}),(0,s.jsx)("span",{className:"font-medium",children:a}),r&&(0,s.jsxs)("span",{className:"ml-1 opacity-75 text-xs",children:["(",r.slice(0,8),"...)"]})]},t)})}):(0,s.jsx)("p",{className:"text-sm text-gray-500 dark:text-gray-400 italic",children:"No channels configured"})]})]})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,s.jsxs)("div",{className:"bg-gray-50 dark:bg-dark-700 rounded-lg p-4",children:[(0,s.jsxs)("h4",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4 flex items-center",children:[(0,s.jsx)(p.Z,{className:"w-5 h-5 mr-2"}),"Performance Metrics"]}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)("span",{className:"text-sm font-medium text-gray-900 dark:text-white",children:"Total Interactions"}),(0,s.jsx)("span",{className:"text-lg font-bold text-gray-900 dark:text-white",children:(i.total_interactions||0).toLocaleString()})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)("span",{className:"text-sm font-medium text-gray-900 dark:text-white",children:"Monthly Interactions"}),(0,s.jsx)("span",{className:"text-lg font-bold text-blue-600",children:(i.monthly_interactions||0).toLocaleString()})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)("span",{className:"text-sm font-medium text-gray-900 dark:text-white",children:"Success Rate"}),(0,s.jsxs)("span",{className:"text-lg font-bold text-green-600",children:[(i.success_rate||0).toFixed(1),"%"]})]})]})]}),(0,s.jsxs)("div",{className:"bg-gray-50 dark:bg-dark-700 rounded-lg p-4",children:[(0,s.jsxs)("h4",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4 flex items-center",children:[(0,s.jsx)(_.Z,{className:"w-5 h-5 mr-2"}),"Activity Timeline"]}),(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,s.jsx)(h.Z,{className:"w-4 h-4 text-gray-400"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:"Created"}),(0,s.jsx)("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:J(i.created_at)})]})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,s.jsx)(ew.Z,{className:"w-4 h-4 text-gray-400"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:"Last Updated"}),(0,s.jsx)("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:i.updated_at?J(i.updated_at):"Never"})]})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,s.jsx)(_.Z,{className:"w-4 h-4 text-gray-400"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:"Last Interaction"}),(0,s.jsx)("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:i.last_interaction_at?J(i.last_interaction_at):"No interactions yet"})]})]})]})]})]}),(0,s.jsxs)("div",{className:"bg-gray-50 dark:bg-dark-700 rounded-lg p-4",children:[(0,s.jsxs)("h4",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4 flex items-center",children:[(0,s.jsx)(b.Z,{className:"w-5 h-5 mr-2"}),"Advanced Settings"]}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-3",children:"Configuration Settings"}),o?(0,s.jsxs)("div",{className:"space-y-3",children:[A.map((e,t)=>(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-1 flex-1",children:[(0,s.jsx)(b.Z,{className:"w-4 h-4 text-gray-400"}),(0,s.jsx)("input",{type:"text",placeholder:"Setting name (e.g., max_tokens)",value:e.name,onChange:e=>{let a=[...A];a[t].name=e.target.value,T(a)},className:"flex-1 px-3 py-2 border border-gray-300 dark:border-dark-600 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent bg-white dark:bg-dark-800 text-gray-900 dark:text-white text-sm"})]}),(0,s.jsx)("input",{type:"text",placeholder:"Value (e.g., 1000)",value:e.value,onChange:e=>{let a=[...A];a[t].value=e.target.value,T(a)},className:"flex-1 px-3 py-2 border border-gray-300 dark:border-dark-600 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent bg-white dark:bg-dark-800 text-gray-900 dark:text-white text-sm"}),A.length>3&&(0,s.jsx)("button",{onClick:()=>{T(A.filter((e,a)=>a!==t))},className:"p-2 text-red-600 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg transition-colors",children:(0,s.jsx)(eP.Z,{className:"w-4 h-4"})})]},t)),(0,s.jsxs)("button",{onClick:()=>{T([...A,{name:"",value:""}])},className:"flex items-center space-x-2 px-3 py-2 text-green-600 hover:bg-green-50 dark:hover:bg-green-900/20 rounded-lg transition-colors text-sm font-medium",children:[(0,s.jsx)(eO.Z,{className:"w-4 h-4"}),(0,s.jsx)("span",{children:"Add More"})]})]}):(0,s.jsx)("div",{className:"bg-white dark:bg-dark-800 border border-gray-300 dark:border-dark-600 rounded-lg p-3",children:Object.keys(i.settings||{}).length>0?(0,s.jsx)("div",{className:"space-y-2",children:Object.entries(i.settings||{}).map(e=>{let[t,a]=e;return(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)(b.Z,{className:"w-4 h-4 text-gray-400"}),(0,s.jsxs)("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:[t,":"]}),(0,s.jsx)("span",{className:"text-sm text-gray-900 dark:text-white",children:"object"==typeof a?JSON.stringify(a):String(a)})]},t)})}):(0,s.jsx)("p",{className:"text-sm text-gray-500 dark:text-gray-400 italic",children:"No settings configured"})})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Agent ID"}),(0,s.jsx)("p",{className:"text-gray-900 dark:text-white font-mono text-xs bg-white dark:bg-dark-800 p-2 rounded border",children:i.id})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Created By"}),(0,s.jsx)("p",{className:"text-gray-900 dark:text-white text-sm",children:i.created_by||"System"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Summary"}),(0,s.jsx)("p",{className:"text-gray-900 dark:text-white text-sm",children:i.summary||"No summary available"})]})]})]})]})]})}),o&&(0,s.jsxs)("div",{className:"bg-gray-50 dark:bg-dark-700 px-6 py-4 flex justify-end space-x-3",children:[(0,s.jsx)("button",{onClick:()=>u(!1),className:"px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-dark-600 rounded-lg transition-colors",children:"Cancel"}),(0,s.jsxs)("button",{onClick:B,disabled:k,className:"flex items-center px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors disabled:opacity-50",children:[(0,s.jsx)(e_.Z,{className:"w-4 h-4 mr-2"}),k?"Saving...":"Save Changes"]})]})]})]})}):null}function eU(e){let{task:t,isOpen:a,onClose:i,onSave:n}=e,[l,d]=(0,r.useState)(!1),[c,o]=(0,r.useState)(null),[m,g]=(0,r.useState)(null),[u,p]=(0,r.useState)(!1);(0,r.useEffect)(()=>{t&&a&&(o({...t}),y())},[t,a]);let y=async()=>{if(t)try{p(!0);let e=await D.getOrganizations(),a=(e.organizations||e).find(e=>e.id===t.organization_id);g(a)}catch(e){console.error("Error fetching task details:",e)}finally{p(!1)}},b=async()=>{if(c)try{p(!0),n(c),d(!1)}catch(e){console.error("Error saving task:",e)}finally{p(!1)}};return a&&t?(0,s.jsx)("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:(0,s.jsxs)("div",{className:"flex items-center justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0",children:[(0,s.jsx)("div",{className:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity",onClick:i}),(0,s.jsxs)("div",{className:"inline-block align-bottom bg-white dark:bg-dark-800 rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-4xl sm:w-full",children:[(0,s.jsx)("div",{className:"bg-gradient-to-r from-orange-600 to-red-600 px-6 py-4",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,s.jsx)("div",{className:"w-12 h-12 bg-white/20 rounded-full flex items-center justify-center",children:(0,s.jsx)(h.Z,{className:"w-6 h-6 text-white"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"text-xl font-bold text-white",children:t.name||"Unnamed Task"}),(0,s.jsx)("p",{className:"text-orange-100",children:"Task Configuration & Scheduling"})]})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsxs)("button",{onClick:()=>d(!l),className:"flex items-center px-3 py-2 bg-white/20 text-white rounded-lg hover:bg-white/30 transition-colors",children:[(0,s.jsx)(ek.Z,{className:"w-4 h-4 mr-2"}),l?"Cancel":"Edit"]}),(0,s.jsx)("button",{onClick:i,className:"p-2 text-white hover:bg-white/20 rounded-lg transition-colors",children:(0,s.jsx)(j.Z,{className:"w-5 h-5"})})]})]})}),(0,s.jsx)("div",{className:"px-6 py-6 max-h-[70vh] overflow-y-auto",children:u?(0,s.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,s.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-orange-600"})}):(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"bg-gray-50 dark:bg-dark-700 rounded-lg p-4",children:[(0,s.jsxs)("h4",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4 flex items-center",children:[(0,s.jsx)(h.Z,{className:"w-5 h-5 mr-2"}),"Task Configuration"]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Task Name"}),l?(0,s.jsx)("input",{type:"text",value:(null==c?void 0:c.name)||"",onChange:e=>o(t=>t?{...t,name:e.target.value}:null),className:"w-full px-3 py-2 border border-gray-300 dark:border-dark-600 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent bg-white dark:bg-dark-800 text-gray-900 dark:text-white"}):(0,s.jsx)("p",{className:"text-gray-900 dark:text-white",children:t.name||"Unnamed Task"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Status"}),l?(0,s.jsxs)("select",{value:(null==c?void 0:c.status)||"active",onChange:e=>o(t=>t?{...t,status:e.target.value}:null),className:"w-full px-3 py-2 border border-gray-300 dark:border-dark-600 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent bg-white dark:bg-dark-800 text-gray-900 dark:text-white",children:[(0,s.jsx)("option",{value:"active",children:"Active"}),(0,s.jsx)("option",{value:"paused",children:"Paused"}),(0,s.jsx)("option",{value:"inactive",children:"Inactive"})]}):(0,s.jsx)("span",{className:"inline-flex px-2 py-1 rounded-full text-xs font-medium ".concat((e=>{switch(null==e?void 0:e.toLowerCase()){case"active":return"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300";case"paused":return"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-300";case"inactive":return"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-300";default:return"bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-300"}})(t.status)),children:t.status||"active"})]}),(0,s.jsxs)("div",{className:"md:col-span-2",children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Description"}),l?(0,s.jsx)("textarea",{value:(null==c?void 0:c.description)||"",onChange:e=>o(t=>t?{...t,description:e.target.value}:null),rows:3,className:"w-full px-3 py-2 border border-gray-300 dark:border-dark-600 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent bg-white dark:bg-dark-800 text-gray-900 dark:text-white",placeholder:"Describe what this task does..."}):(0,s.jsx)("p",{className:"text-gray-900 dark:text-white",children:t.description||"No description provided"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Organization"}),(0,s.jsxs)("p",{className:"text-gray-900 dark:text-white flex items-center",children:[(0,s.jsx)(x.Z,{className:"w-4 h-4 mr-2"}),(null==m?void 0:m.team_name)||"Unknown Organization"]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Total Executions"}),(0,s.jsxs)("p",{className:"text-gray-900 dark:text-white flex items-center",children:[(0,s.jsx)(_.Z,{className:"w-4 h-4 mr-2"}),(t.total_executions||0).toLocaleString()]})]})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,s.jsxs)("div",{className:"bg-gray-50 dark:bg-dark-700 rounded-lg p-4",children:[(0,s.jsxs)("h4",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4 flex items-center",children:[(0,s.jsx)(_.Z,{className:"w-5 h-5 mr-2"}),"Execution Statistics"]}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)("span",{className:"text-sm font-medium text-gray-900 dark:text-white",children:"Total Executions"}),(0,s.jsx)("span",{className:"text-lg font-bold text-gray-900 dark:text-white",children:(t.total_executions||0).toLocaleString()})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)("span",{className:"text-sm font-medium text-gray-900 dark:text-white",children:"Success Rate"}),(0,s.jsxs)("span",{className:"text-lg font-bold text-green-600",children:[Math.floor(15*Math.random()+85),"%"]})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)("span",{className:"text-sm font-medium text-gray-900 dark:text-white",children:"Last Run"}),(0,s.jsxs)("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:[Math.floor(48*Math.random())," hours ago"]})]})]})]}),(0,s.jsxs)("div",{className:"bg-gray-50 dark:bg-dark-700 rounded-lg p-4",children:[(0,s.jsxs)("h4",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4 flex items-center",children:[(0,s.jsx)(ew.Z,{className:"w-5 h-5 mr-2"}),"Schedule Settings"]}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Trigger Type"}),l?(0,s.jsxs)("select",{className:"w-full px-3 py-2 border border-gray-300 dark:border-dark-600 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent bg-white dark:bg-dark-800 text-gray-900 dark:text-white",children:[(0,s.jsx)("option",{value:"scheduled",children:"Scheduled"}),(0,s.jsx)("option",{value:"manual",children:"Manual"}),(0,s.jsx)("option",{value:"event",children:"Event-based"})]}):(0,s.jsx)("p",{className:"text-gray-900 dark:text-white",children:"Scheduled"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Frequency"}),l?(0,s.jsxs)("select",{className:"w-full px-3 py-2 border border-gray-300 dark:border-dark-600 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent bg-white dark:bg-dark-800 text-gray-900 dark:text-white",children:[(0,s.jsx)("option",{value:"daily",children:"Daily"}),(0,s.jsx)("option",{value:"weekly",children:"Weekly"}),(0,s.jsx)("option",{value:"monthly",children:"Monthly"}),(0,s.jsx)("option",{value:"custom",children:"Custom"})]}):(0,s.jsx)("p",{className:"text-gray-900 dark:text-white",children:"Daily"})]})]})]})]})]})}),l&&(0,s.jsxs)("div",{className:"bg-gray-50 dark:bg-dark-700 px-6 py-4 flex justify-end space-x-3",children:[(0,s.jsx)("button",{onClick:()=>d(!1),className:"px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-dark-600 rounded-lg transition-colors",children:"Cancel"}),(0,s.jsxs)("button",{onClick:b,disabled:u,className:"flex items-center px-4 py-2 bg-orange-600 text-white rounded-lg hover:bg-orange-700 transition-colors disabled:opacity-50",children:[(0,s.jsx)(e_.Z,{className:"w-4 h-4 mr-2"}),u?"Saving...":"Save Changes"]})]})]})]})}):null}var eM=a(3781);function eq(e){let{pipeline:t,isOpen:a,onClose:i,onSave:n}=e,[l,d]=(0,r.useState)(!1),[c,o]=(0,r.useState)(null),[m,g]=(0,r.useState)(null),[h,p]=(0,r.useState)(!1);(0,r.useEffect)(()=>{t&&a&&(o({...t}),y())},[t,a]);let y=async()=>{if(t)try{p(!0);let e=await D.getOrganizations(),a=(e.organizations||e).find(e=>e.id===t.organization_id);g(a)}catch(e){console.error("Error fetching pipeline details:",e)}finally{p(!1)}},v=async()=>{if(c)try{p(!0),n(c),d(!1)}catch(e){console.error("Error saving pipeline:",e)}finally{p(!1)}};return a&&t?(0,s.jsx)("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:(0,s.jsxs)("div",{className:"flex items-center justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0",children:[(0,s.jsx)("div",{className:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity",onClick:i}),(0,s.jsxs)("div",{className:"inline-block align-bottom bg-white dark:bg-dark-800 rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-4xl sm:w-full",children:[(0,s.jsx)("div",{className:"bg-gradient-to-r from-purple-600 to-pink-600 px-6 py-4",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,s.jsx)("div",{className:"w-12 h-12 bg-white/20 rounded-full flex items-center justify-center",children:(0,s.jsx)(eM.Z,{className:"w-6 h-6 text-white"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"text-xl font-bold text-white",children:t.name||"Unnamed Pipeline"}),(0,s.jsx)("p",{className:"text-purple-100",children:"Workflow Pipeline Configuration"})]})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsxs)("button",{onClick:()=>d(!l),className:"flex items-center px-3 py-2 bg-white/20 text-white rounded-lg hover:bg-white/30 transition-colors",children:[(0,s.jsx)(ek.Z,{className:"w-4 h-4 mr-2"}),l?"Cancel":"Edit"]}),(0,s.jsx)("button",{onClick:i,className:"p-2 text-white hover:bg-white/20 rounded-lg transition-colors",children:(0,s.jsx)(j.Z,{className:"w-5 h-5"})})]})]})}),(0,s.jsx)("div",{className:"px-6 py-6 max-h-[70vh] overflow-y-auto",children:(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"bg-gray-50 dark:bg-dark-700 rounded-lg p-4",children:[(0,s.jsxs)("h4",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4 flex items-center",children:[(0,s.jsx)(u.Z,{className:"w-5 h-5 mr-2"}),"Pipeline Configuration"]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Pipeline Name"}),l?(0,s.jsx)("input",{type:"text",value:(null==c?void 0:c.name)||"",onChange:e=>o(t=>t?{...t,name:e.target.value}:null),className:"w-full px-3 py-2 border border-gray-300 dark:border-dark-600 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent bg-white dark:bg-dark-800 text-gray-900 dark:text-white"}):(0,s.jsx)("p",{className:"text-gray-900 dark:text-white",children:t.name||"Unnamed Pipeline"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Status"}),l?(0,s.jsxs)("select",{value:(null==c?void 0:c.status)||"active",onChange:e=>o(t=>t?{...t,status:e.target.value}:null),className:"w-full px-3 py-2 border border-gray-300 dark:border-dark-600 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent bg-white dark:bg-dark-800 text-gray-900 dark:text-white",children:[(0,s.jsx)("option",{value:"active",children:"Active"}),(0,s.jsx)("option",{value:"paused",children:"Paused"}),(0,s.jsx)("option",{value:"inactive",children:"Inactive"})]}):(0,s.jsx)("span",{className:"inline-flex px-2 py-1 rounded-full text-xs font-medium ".concat((e=>{switch(null==e?void 0:e.toLowerCase()){case"active":return"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300";case"paused":return"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-300";case"inactive":return"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-300";default:return"bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-300"}})(t.status)),children:t.status||"active"})]}),(0,s.jsxs)("div",{className:"md:col-span-2",children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Description"}),l?(0,s.jsx)("textarea",{value:(null==c?void 0:c.description)||"",onChange:e=>o(t=>t?{...t,description:e.target.value}:null),rows:3,className:"w-full px-3 py-2 border border-gray-300 dark:border-dark-600 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent bg-white dark:bg-dark-800 text-gray-900 dark:text-white",placeholder:"Describe this workflow pipeline..."}):(0,s.jsx)("p",{className:"text-gray-900 dark:text-white",children:t.description||"No description provided"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Organization"}),(0,s.jsxs)("p",{className:"text-gray-900 dark:text-white flex items-center",children:[(0,s.jsx)(x.Z,{className:"w-4 h-4 mr-2"}),(null==m?void 0:m.team_name)||"Unknown Organization"]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Total Executions"}),(0,s.jsxs)("p",{className:"text-gray-900 dark:text-white flex items-center",children:[(0,s.jsx)(_.Z,{className:"w-4 h-4 mr-2"}),(t.total_executions||0).toLocaleString()]})]})]})]}),(0,s.jsxs)("div",{className:"bg-gray-50 dark:bg-dark-700 rounded-lg p-4",children:[(0,s.jsxs)("h4",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4 flex items-center",children:[(0,s.jsx)(_.Z,{className:"w-5 h-5 mr-2"}),"Execution Statistics"]}),(0,s.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:(t.total_executions||0).toLocaleString()}),(0,s.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Total Runs"})]}),(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsxs)("p",{className:"text-2xl font-bold text-green-600",children:[Math.floor(15*Math.random()+85),"%"]}),(0,s.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Success Rate"})]}),(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsxs)("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:[Math.floor(120*Math.random()+30),"s"]}),(0,s.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Avg Duration"})]})]})]}),(0,s.jsxs)("div",{className:"bg-gray-50 dark:bg-dark-700 rounded-lg p-4",children:[(0,s.jsxs)("h4",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4 flex items-center",children:[(0,s.jsx)(b.Z,{className:"w-5 h-5 mr-2"}),"Workflow Settings"]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Trigger Type"}),l?(0,s.jsxs)("select",{className:"w-full px-3 py-2 border border-gray-300 dark:border-dark-600 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent bg-white dark:bg-dark-800 text-gray-900 dark:text-white",children:[(0,s.jsx)("option",{value:"manual",children:"Manual"}),(0,s.jsx)("option",{value:"scheduled",children:"Scheduled"}),(0,s.jsx)("option",{value:"webhook",children:"Webhook"}),(0,s.jsx)("option",{value:"event",children:"Event-based"})]}):(0,s.jsx)("p",{className:"text-gray-900 dark:text-white",children:"Manual"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Retry Policy"}),l?(0,s.jsxs)("select",{className:"w-full px-3 py-2 border border-gray-300 dark:border-dark-600 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent bg-white dark:bg-dark-800 text-gray-900 dark:text-white",children:[(0,s.jsx)("option",{value:"none",children:"None"}),(0,s.jsx)("option",{value:"linear",children:"Linear"}),(0,s.jsx)("option",{value:"exponential",children:"Exponential"})]}):(0,s.jsx)("p",{className:"text-gray-900 dark:text-white",children:"Linear"})]})]})]})]})}),l&&(0,s.jsxs)("div",{className:"bg-gray-50 dark:bg-dark-700 px-6 py-4 flex justify-end space-x-3",children:[(0,s.jsx)("button",{onClick:()=>d(!1),className:"px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-dark-600 rounded-lg transition-colors",children:"Cancel"}),(0,s.jsxs)("button",{onClick:v,disabled:h,className:"flex items-center px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors disabled:opacity-50",children:[(0,s.jsx)(e_.Z,{className:"w-4 h-4 mr-2"}),h?"Saving...":"Save Changes"]})]})]})]})}):null}function eR(e){let{user:t,isOpen:a,onClose:i,onSave:l}=e,[d,o]=(0,r.useState)(!1),[x,m]=(0,r.useState)(null),[p,y]=(0,r.useState)({agents:[],tasks:[],pipelines:[],totalInteractions:0,lastActivity:null}),[b,v]=(0,r.useState)(!1),[N,f]=(0,r.useState)(null),[k,w]=(0,r.useState)(null),[Z,S]=(0,r.useState)(null),[A,T]=(0,r.useState)(!1),[z,I]=(0,r.useState)(!1),[L,P]=(0,r.useState)(!1);(0,r.useEffect)(()=>{t&&a&&(m({...t}),O())},[t,a]);let O=async()=>{if(t)try{v(!0);let[e,a,s]=await Promise.all([D.getAgents(),D.getTasks(),D.getPipelines()]),r=e.filter(e=>e.organization_id===t.organization_id),i=a.filter(e=>e.organization_id===t.organization_id),n=s.filter(e=>e.organization_id===t.organization_id),l=r.reduce((e,t)=>e+(t.total_interactions||0),0);y({agents:r,tasks:i,pipelines:n,totalInteractions:l,lastActivity:t.last_active_at})}catch(e){console.error("Error fetching user details:",e)}finally{v(!1)}},E=async()=>{if(x)try{v(!0),l(x),o(!1)}catch(e){console.error("Error saving user:",e)}finally{v(!1)}},U=e=>{f(e),T(!0)},M=e=>{w(e),I(!0)},q=e=>{S(e),P(!0)};return a&&t?(0,s.jsxs)("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:[(0,s.jsxs)("div",{className:"flex items-center justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0",children:[(0,s.jsx)("div",{className:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity",onClick:i}),(0,s.jsxs)("div",{className:"inline-block align-bottom bg-white dark:bg-dark-800 rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-4xl sm:w-full",children:[(0,s.jsx)("div",{className:"bg-gradient-to-r from-primary-600 to-secondary-600 px-6 py-4",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,s.jsx)("div",{className:"w-12 h-12 bg-white/20 rounded-full flex items-center justify-center",children:(0,s.jsx)(ef.Z,{className:"w-6 h-6 text-white"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"text-xl font-bold text-white",children:t.full_name||t.email||"Unknown User"}),(0,s.jsx)("p",{className:"text-primary-100",children:"User Details & Management"})]})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsxs)("button",{onClick:()=>o(!d),className:"flex items-center px-3 py-2 bg-white/20 text-white rounded-lg hover:bg-white/30 transition-colors",children:[(0,s.jsx)(ek.Z,{className:"w-4 h-4 mr-2"}),d?"Cancel":"Edit"]}),(0,s.jsx)("button",{onClick:i,className:"p-2 text-white hover:bg-white/20 rounded-lg transition-colors",children:(0,s.jsx)(j.Z,{className:"w-5 h-5"})})]})]})}),(0,s.jsx)("div",{className:"px-6 py-6 max-h-[70vh] overflow-y-auto",children:b?(0,s.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,s.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"})}):(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"bg-gray-50 dark:bg-dark-700 rounded-lg p-4",children:[(0,s.jsxs)("h4",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4 flex items-center",children:[(0,s.jsx)(ef.Z,{className:"w-5 h-5 mr-2"}),"Profile Information"]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Full Name"}),d?(0,s.jsx)("input",{type:"text",value:(null==x?void 0:x.full_name)||"",onChange:e=>m(t=>t?{...t,full_name:e.target.value}:null),className:"w-full px-3 py-2 border border-gray-300 dark:border-dark-600 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent bg-white dark:bg-dark-800 text-gray-900 dark:text-white"}):(0,s.jsx)("p",{className:"text-gray-900 dark:text-white",children:t.full_name||"Not provided"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Email"}),d?(0,s.jsx)("input",{type:"email",value:(null==x?void 0:x.email)||"",onChange:e=>m(t=>t?{...t,email:e.target.value}:null),className:"w-full px-3 py-2 border border-gray-300 dark:border-dark-600 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent bg-white dark:bg-dark-800 text-gray-900 dark:text-white"}):(0,s.jsxs)("p",{className:"text-gray-900 dark:text-white flex items-center",children:[(0,s.jsx)(ej.Z,{className:"w-4 h-4 mr-2"}),t.email||"Not provided"]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Role"}),d?(0,s.jsxs)("select",{value:(null==x?void 0:x.role)||"user",onChange:e=>m(t=>t?{...t,role:e.target.value}:null),className:"w-full px-3 py-2 border border-gray-300 dark:border-dark-600 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent bg-white dark:bg-dark-800 text-gray-900 dark:text-white",children:[(0,s.jsx)("option",{value:"user",children:"User"}),(0,s.jsx)("option",{value:"admin",children:"Admin"}),(0,s.jsx)("option",{value:"owner",children:"Owner"})]}):(0,s.jsxs)("span",{className:"inline-flex px-2 py-1 rounded-full text-xs font-medium ".concat((e=>{switch(null==e?void 0:e.toLowerCase()){case"owner":return"bg-purple-100 text-purple-800 dark:bg-purple-900 dark:text-purple-300";case"admin":return"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-300";case"user":return"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-300";default:return"bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-300"}})(t.role)),children:[(0,s.jsx)(n.Z,{className:"w-3 h-3 mr-1"}),t.role||"user"]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Slack User ID"}),(0,s.jsx)("p",{className:"text-gray-900 dark:text-white font-mono text-sm",children:t.slack_user_id})]})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,s.jsxs)("div",{className:"bg-gray-50 dark:bg-dark-700 rounded-lg p-4",children:[(0,s.jsxs)("h4",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4 flex items-center",children:[(0,s.jsx)(_.Z,{className:"w-5 h-5 mr-2"}),"Activity Timeline"]}),(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,s.jsx)(ew.Z,{className:"w-4 h-4 text-gray-400"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:"Last Active"}),(0,s.jsx)("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:(e=>{if(!e)return"Never";let t=new Date,a=new Date(e),s=Math.floor((t.getTime()-a.getTime())/36e5);if(s<1)return"Just now";if(s<24)return"".concat(s," hours ago");let r=Math.floor(s/24);return r<30?"".concat(r," days ago"):"".concat(Math.floor(r/30)," months ago")})(t.last_active_at)})]})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,s.jsx)(h.Z,{className:"w-4 h-4 text-gray-400"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:"Joined"}),(0,s.jsx)("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:new Date(t.created_at).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})})]})]})]})]}),(0,s.jsxs)("div",{className:"bg-gray-50 dark:bg-dark-700 rounded-lg p-4",children:[(0,s.jsxs)("h4",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4 flex items-center",children:[(0,s.jsx)(C.Z,{className:"w-5 h-5 mr-2"}),"Resource Usage"]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("div",{className:"flex items-center justify-center w-10 h-10 bg-green-100 dark:bg-green-900 rounded-lg mx-auto mb-2",children:(0,s.jsx)(g.Z,{className:"w-5 h-5 text-green-600 dark:text-green-400"})}),(0,s.jsx)("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:p.agents.length}),(0,s.jsx)("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Agents"})]}),(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("div",{className:"flex items-center justify-center w-10 h-10 bg-orange-100 dark:bg-orange-900 rounded-lg mx-auto mb-2",children:(0,s.jsx)(h.Z,{className:"w-5 h-5 text-orange-600 dark:text-orange-400"})}),(0,s.jsx)("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:p.tasks.length}),(0,s.jsx)("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Tasks"})]}),(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("div",{className:"flex items-center justify-center w-10 h-10 bg-purple-100 dark:bg-purple-900 rounded-lg mx-auto mb-2",children:(0,s.jsx)(u.Z,{className:"w-5 h-5 text-purple-600 dark:text-purple-400"})}),(0,s.jsx)("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:p.pipelines.length}),(0,s.jsx)("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Pipelines"})]}),(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("div",{className:"flex items-center justify-center w-10 h-10 bg-indigo-100 dark:bg-indigo-900 rounded-lg mx-auto mb-2",children:(0,s.jsx)(C.Z,{className:"w-5 h-5 text-indigo-600 dark:text-indigo-400"})}),(0,s.jsx)("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:p.totalInteractions.toLocaleString()}),(0,s.jsx)("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Interactions"})]})]})]})]}),p.agents.length>0&&(0,s.jsxs)("div",{className:"bg-gray-50 dark:bg-dark-700 rounded-lg p-4",children:[(0,s.jsxs)("h4",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4 flex items-center",children:[(0,s.jsx)(g.Z,{className:"w-5 h-5 mr-2"}),"Organization Agents (",p.agents.length,")"]}),(0,s.jsxs)("div",{className:"space-y-2 max-h-32 overflow-y-auto",children:[p.agents.slice(0,5).map(e=>(0,s.jsxs)("div",{className:"flex items-center justify-between p-2 bg-white dark:bg-dark-600 rounded hover:bg-gray-50 dark:hover:bg-dark-500 transition-colors",children:[(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)("span",{className:"text-sm font-medium text-gray-900 dark:text-white",children:e.name}),(0,s.jsxs)("div",{className:"text-xs text-gray-600 dark:text-gray-400",children:[(e.total_interactions||0).toLocaleString()," interactions"]})]}),(0,s.jsxs)("button",{onClick:()=>U(e),className:"flex items-center px-2 py-1 text-xs font-medium text-gray-600 dark:text-gray-400 hover:text-green-600 dark:hover:text-green-400 hover:bg-green-50 dark:hover:bg-green-900/20 rounded transition-colors",children:[(0,s.jsx)(c.Z,{className:"w-3 h-3 mr-1"}),"View"]})]},e.id)),p.agents.length>5&&(0,s.jsxs)("p",{className:"text-xs text-gray-600 dark:text-gray-400 text-center",children:["...and ",p.agents.length-5," more"]})]})]}),p.tasks.length>0&&(0,s.jsxs)("div",{className:"bg-gray-50 dark:bg-dark-700 rounded-lg p-4",children:[(0,s.jsxs)("h4",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4 flex items-center",children:[(0,s.jsx)(h.Z,{className:"w-5 h-5 mr-2"}),"Organization Tasks (",p.tasks.length,")"]}),(0,s.jsxs)("div",{className:"space-y-2 max-h-32 overflow-y-auto",children:[p.tasks.slice(0,5).map(e=>(0,s.jsxs)("div",{className:"flex items-center justify-between p-2 bg-white dark:bg-dark-600 rounded hover:bg-gray-50 dark:hover:bg-dark-500 transition-colors",children:[(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)("span",{className:"text-sm font-medium text-gray-900 dark:text-white",children:e.name}),(0,s.jsxs)("div",{className:"text-xs text-gray-600 dark:text-gray-400",children:[(e.total_executions||0).toLocaleString()," executions • ",e.status||"active"]})]}),(0,s.jsxs)("button",{onClick:()=>M(e),className:"flex items-center px-2 py-1 text-xs font-medium text-gray-600 dark:text-gray-400 hover:text-orange-600 dark:hover:text-orange-400 hover:bg-orange-50 dark:hover:bg-orange-900/20 rounded transition-colors",children:[(0,s.jsx)(c.Z,{className:"w-3 h-3 mr-1"}),"View"]})]},e.id)),p.tasks.length>5&&(0,s.jsxs)("p",{className:"text-xs text-gray-600 dark:text-gray-400 text-center",children:["...and ",p.tasks.length-5," more"]})]})]}),p.pipelines.length>0&&(0,s.jsxs)("div",{className:"bg-gray-50 dark:bg-dark-700 rounded-lg p-4",children:[(0,s.jsxs)("h4",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4 flex items-center",children:[(0,s.jsx)(u.Z,{className:"w-5 h-5 mr-2"}),"Organization Pipelines (",p.pipelines.length,")"]}),(0,s.jsxs)("div",{className:"space-y-2 max-h-32 overflow-y-auto",children:[p.pipelines.slice(0,5).map(e=>(0,s.jsxs)("div",{className:"flex items-center justify-between p-2 bg-white dark:bg-dark-600 rounded hover:bg-gray-50 dark:hover:bg-dark-500 transition-colors",children:[(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)("span",{className:"text-sm font-medium text-gray-900 dark:text-white",children:e.name}),(0,s.jsxs)("div",{className:"text-xs text-gray-600 dark:text-gray-400",children:[(e.total_executions||0).toLocaleString()," executions • ",e.status||"active"]})]}),(0,s.jsxs)("button",{onClick:()=>q(e),className:"flex items-center px-2 py-1 text-xs font-medium text-gray-600 dark:text-gray-400 hover:text-purple-600 dark:hover:text-purple-400 hover:bg-purple-50 dark:hover:bg-purple-900/20 rounded transition-colors",children:[(0,s.jsx)(c.Z,{className:"w-3 h-3 mr-1"}),"View"]})]},e.id)),p.pipelines.length>5&&(0,s.jsxs)("p",{className:"text-xs text-gray-600 dark:text-gray-400 text-center",children:["...and ",p.pipelines.length-5," more"]})]})]})]})}),d&&(0,s.jsxs)("div",{className:"bg-gray-50 dark:bg-dark-700 px-6 py-4 flex justify-end space-x-3",children:[(0,s.jsx)("button",{onClick:()=>o(!1),className:"px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-dark-600 rounded-lg transition-colors",children:"Cancel"}),(0,s.jsxs)("button",{onClick:E,disabled:b,className:"flex items-center px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 transition-colors disabled:opacity-50",children:[(0,s.jsx)(e_.Z,{className:"w-4 h-4 mr-2"}),b?"Saving...":"Save Changes"]})]})]})]}),(0,s.jsx)(eE,{agent:N,isOpen:A,onClose:()=>T(!1),onSave:e=>{y(t=>({...t,agents:t.agents.map(t=>t.id===e.id?e:t)})),T(!1)}}),(0,s.jsx)(eU,{task:k,isOpen:z,onClose:()=>I(!1),onSave:e=>{y(t=>({...t,tasks:t.tasks.map(t=>t.id===e.id?e:t)})),I(!1)}}),(0,s.jsx)(eq,{pipeline:Z,isOpen:L,onClose:()=>P(!1),onSave:e=>{y(t=>({...t,pipelines:t.pipelines.map(t=>t.id===e.id?e:t)})),P(!1)}})]}):null}function eF(){let[e,t]=(0,r.useState)([]),[a,i]=(0,r.useState)([]),[n,l]=(0,r.useState)([]),[d,o]=(0,r.useState)([]),[p,y]=(0,r.useState)([]),[b,j]=(0,r.useState)(!0),[v,N]=(0,r.useState)(""),[f,k]=(0,r.useState)("all"),[w,Z]=(0,r.useState)(null),[S,A]=(0,r.useState)(!1),[T,z]=(0,r.useState)("list");(0,r.useEffect)(()=>{I()},[]);let I=async()=>{try{j(!0);let[e,a,s,r,n]=await Promise.all([D.getUsers(),D.getAgents(),D.getTasks(),D.getPipelines(),D.getOrganizations()]);t(e),i(a),l(s),o(r),y(n.organizations||n)}catch(e){console.error("Error fetching users data:",e)}finally{j(!1)}},L=e=>{Z(e),A(!0)},P=async e=>{console.log("Toggle status for user ".concat(e.full_name))},O=(e,t)=>{let s=a.filter(e=>e.organization_id===t),r=n.filter(e=>e.organization_id===t),i=d.filter(e=>e.organization_id===t),l=s.reduce((e,t)=>e+(t.total_interactions||0),0);return{agents:s.length,tasks:r.length,pipelines:i.length,totalInteractions:l}},E=e=>{let t=p.find(t=>t.id===e);return(null==t?void 0:t.team_name)||"Unknown Organization"},U=e=>new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}),M=e=>{if(!e)return"Never";let t=new Date,a=new Date(e),s=Math.floor((t.getTime()-a.getTime())/36e5);if(s<1)return"Just now";if(s<24)return"".concat(s,"h ago");let r=Math.floor(s/24);return r<30?"".concat(r,"d ago"):"".concat(Math.floor(r/30),"mo ago")},q=e=>{switch(null==e?void 0:e.toLowerCase()){case"owner":return"bg-purple-100 text-purple-800 dark:bg-purple-900 dark:text-purple-300";case"admin":return"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-300";case"user":return"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-300";default:return"bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-300"}},R=e.filter(e=>{let t=(e.full_name||"").toLowerCase().includes(v.toLowerCase())||(e.email||"").toLowerCase().includes(v.toLowerCase())||E(e.organization_id).toLowerCase().includes(v.toLowerCase()),a="all"===f||e.role===f;return t&&a}),F={totalUsers:e.length,totalAgents:a.length,totalTasks:n.length,totalPipelines:d.length,totalInteractions:a.reduce((e,t)=>e+(t.total_interactions||0),0)};return b?(0,s.jsx)("div",{className:"p-6",children:(0,s.jsxs)("div",{className:"animate-pulse",children:[(0,s.jsx)("div",{className:"h-8 bg-gray-200 rounded w-1/4 mb-4"}),(0,s.jsx)("div",{className:"space-y-4",children:[void 0,void 0,void 0,void 0,void 0].map((e,t)=>(0,s.jsx)("div",{className:"h-20 bg-gray-200 rounded"},t))})]})}):(0,s.jsxs)("div",{className:"p-6 max-w-7xl mx-auto",children:[(0,s.jsxs)("div",{className:"mb-8",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsxs)("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white flex items-center",children:[(0,s.jsx)(m.Z,{className:"w-8 h-8 mr-3 text-primary-600"}),"Users Management"]}),(0,s.jsx)("p",{className:"text-gray-600 dark:text-gray-400 mt-1",children:"Comprehensive user overview with activity stats across all categories"})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,s.jsx)(eu,{view:T,onViewChange:z}),(0,s.jsxs)("button",{className:"flex items-center px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 transition-colors",children:[(0,s.jsx)(eb.Z,{className:"w-4 h-4 mr-2"}),"Export"]})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4 mb-6",children:[(0,s.jsx)("div",{className:"bg-white dark:bg-dark-800 rounded-xl p-4 border border-gray-200 dark:border-dark-700",children:(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)(m.Z,{className:"w-8 h-8 text-blue-600"}),(0,s.jsxs)("div",{className:"ml-3",children:[(0,s.jsx)("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Total Users"}),(0,s.jsx)("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:F.totalUsers})]})]})}),(0,s.jsx)("div",{className:"bg-white dark:bg-dark-800 rounded-xl p-4 border border-gray-200 dark:border-dark-700",children:(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)(g.Z,{className:"w-8 h-8 text-green-600"}),(0,s.jsxs)("div",{className:"ml-3",children:[(0,s.jsx)("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Total Agents"}),(0,s.jsx)("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:F.totalAgents})]})]})}),(0,s.jsx)("div",{className:"bg-white dark:bg-dark-800 rounded-xl p-4 border border-gray-200 dark:border-dark-700",children:(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)(h.Z,{className:"w-8 h-8 text-orange-600"}),(0,s.jsxs)("div",{className:"ml-3",children:[(0,s.jsx)("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Total Tasks"}),(0,s.jsx)("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:F.totalTasks})]})]})}),(0,s.jsx)("div",{className:"bg-white dark:bg-dark-800 rounded-xl p-4 border border-gray-200 dark:border-dark-700",children:(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)(u.Z,{className:"w-8 h-8 text-purple-600"}),(0,s.jsxs)("div",{className:"ml-3",children:[(0,s.jsx)("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Total Pipelines"}),(0,s.jsx)("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:F.totalPipelines})]})]})}),(0,s.jsx)("div",{className:"bg-white dark:bg-dark-800 rounded-xl p-4 border border-gray-200 dark:border-dark-700",children:(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)(C.Z,{className:"w-8 h-8 text-indigo-600"}),(0,s.jsxs)("div",{className:"ml-3",children:[(0,s.jsx)("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Total Interactions"}),(0,s.jsx)("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:F.totalInteractions.toLocaleString()})]})]})})]}),(0,s.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4 mb-6",children:[(0,s.jsxs)("div",{className:"flex-1 relative",children:[(0,s.jsx)(ed.Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),(0,s.jsx)("input",{type:"text",placeholder:"Search users, emails, or organizations...",value:v,onChange:e=>N(e.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-dark-600 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent bg-white dark:bg-dark-800 text-gray-900 dark:text-white"})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)(ec.Z,{className:"w-5 h-5 text-gray-400"}),(0,s.jsxs)("select",{value:f,onChange:e=>k(e.target.value),className:"px-3 py-2 border border-gray-300 dark:border-dark-600 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent bg-white dark:bg-dark-800 text-gray-900 dark:text-white",children:[(0,s.jsx)("option",{value:"all",children:"All Roles"}),(0,s.jsx)("option",{value:"owner",children:"Owner"}),(0,s.jsx)("option",{value:"admin",children:"Admin"}),(0,s.jsx)("option",{value:"user",children:"User"})]})]})]})]}),"card"===T?(0,s.jsx)("div",{className:"grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 gap-6",children:R.map(e=>{let t=O(e.id,e.organization_id);return(0,s.jsxs)("div",{className:"bg-white dark:bg-dark-800 rounded-xl p-6 border border-gray-200 dark:border-dark-700 hover:shadow-lg transition-shadow",children:[(0,s.jsxs)("div",{className:"flex items-start justify-between",children:[(0,s.jsxs)("div",{className:"flex items-start space-x-4",children:[(0,s.jsx)("div",{className:"w-12 h-12 bg-gradient-to-r from-primary-500 to-secondary-500 rounded-full flex items-center justify-center text-white font-bold text-lg",children:(e.full_name||e.email||"?").charAt(0).toUpperCase()}),(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-3 mb-2",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:e.full_name||e.email||"Unknown User"}),(0,s.jsx)("span",{className:"px-2 py-1 rounded-full text-xs font-medium ".concat(q(e.role)),children:e.role||"user"})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-4 text-sm text-gray-600 dark:text-gray-400",children:[(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)(ej.Z,{className:"w-4 h-4 mr-1"}),e.email||"No email"]}),(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)(x.Z,{className:"w-4 h-4 mr-1"}),E(e.organization_id)]}),(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)(ev.Z,{className:"w-4 h-4 mr-1"}),"Joined ",U(e.created_at)]}),(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)(_.Z,{className:"w-4 h-4 mr-1"}),"Last active ",M(e.last_active_at)]})]})]})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)("button",{onClick:()=>L(e),className:"p-2 text-gray-400 hover:text-blue-600 hover:bg-blue-50 dark:hover:bg-blue-900/20 rounded-lg transition-colors",title:"View Details",children:(0,s.jsx)(c.Z,{className:"w-4 h-4"})}),(0,s.jsx)("button",{onClick:()=>P(e),className:"p-2 text-gray-400 hover:text-green-600 hover:bg-green-50 dark:hover:bg-green-900/20 rounded-lg transition-colors",title:"Toggle Status",children:(0,s.jsx)(eN.Z,{className:"w-4 h-4"})}),(0,s.jsx)("div",{className:"relative",children:(0,s.jsx)("button",{className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",title:"More actions",children:(0,s.jsx)(ex.Z,{className:"w-4 h-4"})})})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mt-6 pt-6 border-t border-gray-200 dark:border-dark-700",children:[(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("div",{className:"flex items-center justify-center w-10 h-10 bg-green-100 dark:bg-green-900 rounded-lg mx-auto mb-2",children:(0,s.jsx)(g.Z,{className:"w-5 h-5 text-green-600 dark:text-green-400"})}),(0,s.jsx)("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:t.agents}),(0,s.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Agents"})]}),(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("div",{className:"flex items-center justify-center w-10 h-10 bg-orange-100 dark:bg-orange-900 rounded-lg mx-auto mb-2",children:(0,s.jsx)(h.Z,{className:"w-5 h-5 text-orange-600 dark:text-orange-400"})}),(0,s.jsx)("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:t.tasks}),(0,s.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Tasks"})]}),(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("div",{className:"flex items-center justify-center w-10 h-10 bg-purple-100 dark:bg-purple-900 rounded-lg mx-auto mb-2",children:(0,s.jsx)(u.Z,{className:"w-5 h-5 text-purple-600 dark:text-purple-400"})}),(0,s.jsx)("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:t.pipelines}),(0,s.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Pipelines"})]}),(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("div",{className:"flex items-center justify-center w-10 h-10 bg-indigo-100 dark:bg-indigo-900 rounded-lg mx-auto mb-2",children:(0,s.jsx)(C.Z,{className:"w-5 h-5 text-indigo-600 dark:text-indigo-400"})}),(0,s.jsx)("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:t.totalInteractions.toLocaleString()}),(0,s.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Interactions"})]})]})]},e.id)})}):(0,s.jsx)("div",{className:"admin-table-container",children:(0,s.jsxs)("table",{className:"admin-table",children:[(0,s.jsx)("thead",{children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{children:"User"}),(0,s.jsx)("th",{children:"Plan"}),(0,s.jsx)("th",{children:"Performance"}),(0,s.jsx)("th",{children:"Organization"}),(0,s.jsx)("th",{children:"Last Activity"}),(0,s.jsx)("th",{children:"Actions"})]})}),(0,s.jsx)("tbody",{children:R.map(e=>{let t=O(e.id,e.organization_id);return(0,s.jsxs)("tr",{children:[(0,s.jsx)("td",{children:(0,s.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,s.jsx)("div",{className:"w-10 h-10 bg-gradient-to-r from-primary-500 to-secondary-500 rounded-full flex items-center justify-center text-white font-bold text-sm",children:(e.full_name||e.email||"?").charAt(0).toUpperCase()}),(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"font-medium text-gray-900 dark:text-white",children:e.full_name||e.email||"Unknown User"}),(0,s.jsx)("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:e.email||"No email"}),(0,s.jsx)("div",{className:"flex items-center space-x-2 mt-1",children:(0,s.jsx)("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ".concat(q(e.role)),children:e.role||"user"})})]})]})}),(0,s.jsxs)("td",{children:[(0,s.jsx)("div",{className:"text-sm text-gray-900 dark:text-white font-medium",children:"Free"}),(0,s.jsx)("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Current plan"})]}),(0,s.jsx)("td",{children:(0,s.jsxs)("div",{className:"space-y-1",children:[(0,s.jsx)("div",{className:"flex items-center space-x-2",children:(0,s.jsxs)("span",{className:"text-sm font-medium text-gray-900 dark:text-white",children:[t.totalInteractions," interactions"]})}),(0,s.jsxs)("div",{className:"flex items-center space-x-4 text-xs text-gray-500 dark:text-gray-400",children:[(0,s.jsxs)("span",{children:[t.agents," agents"]}),(0,s.jsxs)("span",{children:[t.tasks," tasks"]}),(0,s.jsxs)("span",{children:[t.pipelines," pipelines"]})]})]})}),(0,s.jsxs)("td",{children:[(0,s.jsx)("div",{className:"text-sm text-gray-900 dark:text-white",children:E(e.organization_id)}),(0,s.jsxs)("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:["Joined ",U(e.created_at)]})]}),(0,s.jsxs)("td",{children:[(0,s.jsx)("div",{className:"text-sm text-gray-900 dark:text-white",children:M(e.last_active_at)}),(0,s.jsx)("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Last active"})]}),(0,s.jsx)("td",{children:(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)("button",{onClick:()=>L(e),className:"p-2 text-gray-400 hover:text-primary-600 hover:bg-primary-50 dark:hover:bg-primary-900/20 rounded-lg transition-colors",title:"View Details",children:(0,s.jsx)(c.Z,{className:"w-4 h-4"})}),(0,s.jsx)("button",{onClick:()=>P(e),className:"p-2 text-gray-400 hover:text-green-600 hover:bg-green-50 dark:hover:bg-green-900/20 rounded-lg transition-colors",title:"Toggle Status",children:(0,s.jsx)(eN.Z,{className:"w-4 h-4"})}),(0,s.jsx)("div",{className:"relative",children:(0,s.jsx)("button",{className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",title:"More actions",children:(0,s.jsx)(ex.Z,{className:"w-4 h-4"})})})]})})]},e.id)})})]})}),0===R.length&&(0,s.jsxs)("div",{className:"text-center py-12",children:[(0,s.jsx)(m.Z,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),(0,s.jsx)("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:"No users found"}),(0,s.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:"Try adjusting your search criteria"})]}),(0,s.jsx)(eR,{user:w,isOpen:S,onClose:()=>A(!1),onSave:e=>{t(t=>t.map(t=>t.id===e.id?e:t)),A(!1)}})]})}var eV=a(1094),eW=a(8736),eG=a(2805),eB=a(8896),eJ=a(4935);function eH(){let[e,t]=(0,r.useState)([]),[a,i]=(0,r.useState)([]),[n,l]=(0,r.useState)(!0),[d,o]=(0,r.useState)(""),[m,h]=(0,r.useState)("all"),[u,p]=(0,r.useState)(null),[y,j]=(0,r.useState)(!1),[v,N]=(0,r.useState)("list");(0,r.useEffect)(()=>{f()},[]);let f=async()=>{try{l(!0);let[e,a]=await Promise.all([D.getAgents(),D.getOrganizations()]);t(e),i(a.organizations||a)}catch(e){console.error("Error fetching agents data:",e)}finally{l(!1)}},k=e=>{p(e),j(!0)},w=async e=>{try{let a="active"===e.status?"paused":"active";t(t=>t.map(t=>t.id===e.id?{...t,status:a}:t)),console.log("Toggling agent ".concat(e.name," to ").concat(a))}catch(a){console.error("Error toggling agent status:",a),t(t=>t.map(t=>t.id===e.id?{...t,status:e.status}:t))}},Z=e=>{let t=a.find(t=>t.id===e);return(null==t?void 0:t.team_name)||"Unknown Organization"},A=e=>new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}),T=e=>{switch(null==e?void 0:e.toLowerCase()){case"active":return"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300";case"paused":return"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-300";case"inactive":return"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-300";default:return"bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-300"}},z=e.filter(e=>{let t=(e.name||"").toLowerCase().includes(d.toLowerCase())||(e.description||"").toLowerCase().includes(d.toLowerCase())||Z(e.organization_id).toLowerCase().includes(d.toLowerCase()),a="all"===m||e.status===m;return t&&a});return n?(0,s.jsx)("div",{className:"p-6",children:(0,s.jsxs)("div",{className:"animate-pulse",children:[(0,s.jsx)("div",{className:"h-8 bg-gray-200 rounded w-1/4 mb-4"}),(0,s.jsx)("div",{className:"space-y-4",children:[void 0,void 0,void 0,void 0,void 0].map((e,t)=>(0,s.jsx)("div",{className:"h-20 bg-gray-200 rounded"},t))})]})}):(0,s.jsxs)("div",{className:"p-6 max-w-7xl mx-auto",children:[(0,s.jsxs)("div",{className:"mb-8",children:[(0,s.jsx)("div",{className:"flex items-center justify-between mb-4",children:(0,s.jsxs)("div",{children:[(0,s.jsxs)("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white flex items-center",children:[(0,s.jsx)(g.Z,{className:"w-8 h-8 mr-3 text-primary-600"}),"AI Agents"]}),(0,s.jsx)("p",{className:"text-gray-600 dark:text-gray-400 mt-1",children:"Manage and monitor all AI agents across organizations"})]})}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6",children:[(0,s.jsx)("div",{className:"bg-white dark:bg-dark-800 rounded-xl p-4 border border-gray-200 dark:border-dark-700",children:(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)(g.Z,{className:"w-8 h-8 text-blue-600"}),(0,s.jsxs)("div",{className:"ml-3",children:[(0,s.jsx)("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Total Agents"}),(0,s.jsx)("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:e.length})]})]})}),(0,s.jsx)("div",{className:"bg-white dark:bg-dark-800 rounded-xl p-4 border border-gray-200 dark:border-dark-700",children:(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)(ei.Z,{className:"w-8 h-8 text-green-600"}),(0,s.jsxs)("div",{className:"ml-3",children:[(0,s.jsx)("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Active"}),(0,s.jsx)("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:e.filter(e=>"active"===e.status).length})]})]})}),(0,s.jsx)("div",{className:"bg-white dark:bg-dark-800 rounded-xl p-4 border border-gray-200 dark:border-dark-700",children:(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)(C.Z,{className:"w-8 h-8 text-purple-600"}),(0,s.jsxs)("div",{className:"ml-3",children:[(0,s.jsx)("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Total Interactions"}),(0,s.jsx)("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:e.reduce((e,t)=>e+(t.total_interactions||0),0).toLocaleString()})]})]})}),(0,s.jsx)("div",{className:"bg-white dark:bg-dark-800 rounded-xl p-4 border border-gray-200 dark:border-dark-700",children:(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)(x.Z,{className:"w-8 h-8 text-orange-600"}),(0,s.jsxs)("div",{className:"ml-3",children:[(0,s.jsx)("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Organizations"}),(0,s.jsx)("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:new Set(e.map(e=>e.organization_id)).size})]})]})})]}),(0,s.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4 mb-6",children:[(0,s.jsxs)("div",{className:"flex-1 relative",children:[(0,s.jsx)(ed.Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),(0,s.jsx)("input",{type:"text",placeholder:"Search agents, descriptions, or organizations...",value:d,onChange:e=>o(e.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-dark-600 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent bg-white dark:bg-dark-800 text-gray-900 dark:text-white"})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)(ec.Z,{className:"w-5 h-5 text-gray-400"}),(0,s.jsxs)("select",{value:m,onChange:e=>h(e.target.value),className:"px-3 py-2 border border-gray-300 dark:border-dark-600 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent bg-white dark:bg-dark-800 text-gray-900 dark:text-white",children:[(0,s.jsx)("option",{value:"all",children:"All Status"}),(0,s.jsx)("option",{value:"active",children:"Active"}),(0,s.jsx)("option",{value:"paused",children:"Paused"}),(0,s.jsx)("option",{value:"inactive",children:"Inactive"})]})]}),(0,s.jsx)(eu,{view:v,onViewChange:N})]})]})]}),"card"===v?(0,s.jsx)("div",{className:"grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 gap-6",children:z.map(e=>{var t,a;return(0,s.jsxs)("div",{className:"bg-white dark:bg-dark-800 rounded-xl border border-gray-200 dark:border-dark-700 hover:shadow-lg transition-all duration-200 hover:scale-[1.02]",children:[(0,s.jsxs)("div",{className:"p-6 pb-4",children:[(0,s.jsxs)("div",{className:"flex items-start justify-between mb-4",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,s.jsx)("div",{className:"w-12 h-12 rounded-full flex items-center justify-center text-white font-bold text-lg ".concat("active"===e.status?"bg-gradient-to-r from-green-500 to-blue-500":"paused"===e.status?"bg-gradient-to-r from-yellow-500 to-orange-500":"bg-gradient-to-r from-gray-500 to-red-500"),children:(0,s.jsx)(g.Z,{className:"w-6 h-6"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white truncate max-w-[150px]",children:e.name||"Unnamed Agent"}),(0,s.jsxs)("div",{className:"flex items-center space-x-2 mt-1",children:[(0,s.jsx)("span",{className:"px-2 py-1 rounded-full text-xs font-medium ".concat(T(e.status)),children:e.status||"active"}),(0,s.jsx)("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:Z(e.organization_id)})]})]})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)("button",{onClick:()=>k(e),className:"p-2 text-gray-400 hover:text-blue-600 hover:bg-blue-50 dark:hover:bg-blue-900/20 rounded-lg transition-colors",title:"View Details",children:(0,s.jsx)(c.Z,{className:"w-4 h-4"})}),(0,s.jsx)("button",{onClick:()=>w(e),className:"p-2 rounded-lg transition-colors ".concat("active"===e.status?"text-orange-600 hover:text-orange-700 hover:bg-orange-50 dark:hover:bg-orange-900/20":"text-green-600 hover:text-green-700 hover:bg-green-50 dark:hover:bg-green-900/20"),title:"active"===e.status?"Pause Agent":"Activate Agent",children:"active"===e.status?(0,s.jsx)(eV.Z,{className:"w-4 h-4"}):(0,s.jsx)(eN.Z,{className:"w-4 h-4"})}),(0,s.jsx)("div",{className:"relative",children:(0,s.jsx)("button",{className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",title:"More actions",children:(0,s.jsx)(ex.Z,{className:"w-4 h-4"})})})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-4 gap-3 mb-4",children:[(0,s.jsxs)("div",{className:"flex flex-col items-center p-2 bg-gray-50 dark:bg-dark-700 rounded-lg",children:[(0,s.jsx)("div",{className:"p-1 rounded ".concat(e.prompt?"text-green-600 bg-green-100 dark:bg-green-900/20":"text-gray-400 bg-gray-100 dark:bg-gray-800"),children:(0,s.jsx)(eW.Z,{className:"w-4 h-4"})}),(0,s.jsx)("span",{className:"text-xs text-gray-600 dark:text-gray-400 mt-1",children:"Prompt"})]}),(0,s.jsxs)("div",{className:"flex flex-col items-center p-2 bg-gray-50 dark:bg-dark-700 rounded-lg",children:[(0,s.jsx)("div",{className:"p-1 rounded ".concat(Object.keys(e.capabilities||{}).length>0?"text-purple-600 bg-purple-100 dark:bg-purple-900/20":"text-gray-400 bg-gray-100 dark:bg-gray-800"),children:(0,s.jsx)(eG.Z,{className:"w-4 h-4"})}),(0,s.jsx)("span",{className:"text-xs text-gray-600 dark:text-gray-400 mt-1",children:Object.keys(e.capabilities||{}).length})]}),(0,s.jsxs)("div",{className:"flex flex-col items-center p-2 bg-gray-50 dark:bg-dark-700 rounded-lg",children:[(0,s.jsx)("div",{className:"p-1 rounded ".concat(Object.keys(e.settings||{}).length>0?"text-blue-600 bg-blue-100 dark:bg-blue-900/20":"text-gray-400 bg-gray-100 dark:bg-gray-800"),children:(0,s.jsx)(b.Z,{className:"w-4 h-4"})}),(0,s.jsx)("span",{className:"text-xs text-gray-600 dark:text-gray-400 mt-1",children:Object.keys(e.settings||{}).length})]}),(0,s.jsxs)("div",{className:"flex flex-col items-center p-2 bg-gray-50 dark:bg-dark-700 rounded-lg",children:[(0,s.jsx)("div",{className:"p-1 rounded ".concat((null===(t=e.slack_channels)||void 0===t?void 0:t.length)>0?"text-orange-600 bg-orange-100 dark:bg-orange-900/20":"text-gray-400 bg-gray-100 dark:bg-gray-800"),children:(0,s.jsx)(eC.Z,{className:"w-4 h-4"})}),(0,s.jsx)("span",{className:"text-xs text-gray-600 dark:text-gray-400 mt-1",children:(null===(a=e.slack_channels)||void 0===a?void 0:a.length)||0})]})]}),(0,s.jsx)("div",{className:"flex items-center justify-between mb-4",children:(0,s.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,s.jsx)("div",{className:"p-1 rounded ".concat(e.function_calling_enabled?"text-green-600":"text-gray-400"),children:e.function_calling_enabled?(0,s.jsx)(eA.Z,{className:"w-4 h-4"}):(0,s.jsx)(eT.Z,{className:"w-4 h-4"})}),(0,s.jsx)("span",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Functions"})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,s.jsx)("div",{className:"p-1 rounded ".concat(e.respond_to_all_messages?"text-green-600":"text-gray-400"),children:e.respond_to_all_messages?(0,s.jsx)(eA.Z,{className:"w-4 h-4"}):(0,s.jsx)(eT.Z,{className:"w-4 h-4"})}),(0,s.jsx)("span",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Auto"})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,s.jsx)("div",{className:"p-1 rounded ".concat("public"===e.visibility?"text-blue-600":"text-gray-600"),children:"public"===e.visibility?(0,s.jsx)(em.Z,{className:"w-4 h-4"}):(0,s.jsx)(eZ.Z,{className:"w-4 h-4"})}),(0,s.jsx)("span",{className:"text-xs text-gray-600 dark:text-gray-400 capitalize",children:e.visibility||"public"})]})]})})]}),(0,s.jsxs)("div",{className:"px-6 py-4 bg-gray-50 dark:bg-dark-700 rounded-b-xl border-t border-gray-100 dark:border-dark-600",children:[(0,s.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsxs)("div",{className:"flex items-center justify-center space-x-1 mb-1",children:[(0,s.jsx)(S.Z,{className:"w-4 h-4 ".concat((e.energy||100)>70?"text-green-500":(e.energy||100)>30?"text-yellow-500":"text-red-500")}),(0,s.jsxs)("span",{className:"text-sm font-semibold text-gray-900 dark:text-white",children:[e.energy||100,"%"]})]}),(0,s.jsx)("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Energy"})]}),(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsxs)("div",{className:"flex items-center justify-center space-x-1 mb-1",children:[(0,s.jsx)(eB.Z,{className:"w-4 h-4 ".concat((e.success_rate||0)>80?"text-green-500":(e.success_rate||0)>60?"text-yellow-500":"text-red-500")}),(0,s.jsxs)("span",{className:"text-sm font-semibold text-gray-900 dark:text-white",children:[Math.round(e.success_rate||0),"%"]})]}),(0,s.jsx)("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Success"})]}),(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsxs)("div",{className:"flex items-center justify-center space-x-1 mb-1",children:[(0,s.jsx)(_.Z,{className:"w-4 h-4 text-blue-500"}),(0,s.jsx)("span",{className:"text-sm font-semibold text-gray-900 dark:text-white",children:(e.total_interactions||0)>999?"".concat(Math.round((e.total_interactions||0)/1e3),"k"):e.total_interactions||0})]}),(0,s.jsx)("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Chats"})]})]}),e.last_interaction_at&&(0,s.jsxs)("div",{className:"flex items-center justify-center mt-3 pt-3 border-t border-gray-200 dark:border-dark-600",children:[(0,s.jsx)(ew.Z,{className:"w-3 h-3 text-gray-400 mr-1"}),(0,s.jsxs)("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:["Last active ",A(e.last_interaction_at)]})]})]})]},e.id)})}):(0,s.jsx)("div",{className:"admin-card overflow-hidden",children:(0,s.jsx)("div",{className:"overflow-x-auto",children:(0,s.jsxs)("table",{className:"admin-table",children:[(0,s.jsx)("thead",{className:"bg-gray-50 dark:bg-gray-800",children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{children:"Agent"}),(0,s.jsx)("th",{children:"Status"}),(0,s.jsx)("th",{children:"Configuration"}),(0,s.jsx)("th",{children:"Performance"}),(0,s.jsx)("th",{children:"Organization"}),(0,s.jsx)("th",{children:"OpenAI"}),(0,s.jsx)("th",{children:"Last Activity"}),(0,s.jsx)("th",{children:"Actions"})]})}),(0,s.jsx)("tbody",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:z.map(e=>{var t;return(0,s.jsxs)("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-800 transition-colors",children:[(0,s.jsx)("td",{children:(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)("div",{className:"w-10 h-10 rounded-full flex items-center justify-center text-white font-medium text-sm mr-3 ".concat("active"===e.status?"bg-gradient-to-r from-green-500 to-blue-500":"paused"===e.status?"bg-gradient-to-r from-yellow-500 to-orange-500":"bg-gradient-to-r from-gray-500 to-red-500"),children:(0,s.jsx)(g.Z,{className:"w-5 h-5"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"font-medium text-gray-900 dark:text-white",children:e.name||"Unnamed Agent"}),(0,s.jsxs)("div",{className:"text-sm text-gray-500 dark:text-gray-400 flex items-center space-x-2",children:[e.prompt&&(0,s.jsx)("span",{title:"Has prompt",children:(0,s.jsx)(eW.Z,{className:"w-3 h-3 text-green-600"})}),e.function_calling_enabled&&(0,s.jsx)("span",{title:"Functions enabled",children:(0,s.jsx)(eJ.Z,{className:"w-3 h-3 text-blue-600"})}),e.respond_to_all_messages&&(0,s.jsx)("span",{title:"Auto-response",children:(0,s.jsx)(ez.Z,{className:"w-3 h-3 text-purple-600"})})]})]})]})}),(0,s.jsx)("td",{children:(0,s.jsx)("span",{className:"px-2 py-1 rounded-full text-xs font-medium ".concat(T(e.status)),children:e.status||"active"})}),(0,s.jsx)("td",{children:(0,s.jsxs)("div",{className:"flex items-center space-x-3 text-sm",children:[(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)(eG.Z,{className:"w-4 h-4 text-purple-500 mr-1"}),(0,s.jsx)("span",{children:Object.keys(e.capabilities||{}).length})]}),(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)(b.Z,{className:"w-4 h-4 text-blue-500 mr-1"}),(0,s.jsx)("span",{children:Object.keys(e.settings||{}).length})]}),(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)(eC.Z,{className:"w-4 h-4 text-orange-500 mr-1"}),(0,s.jsx)("span",{children:(null===(t=e.slack_channels)||void 0===t?void 0:t.length)||0})]})]})}),(0,s.jsx)("td",{children:(0,s.jsxs)("div",{className:"text-sm",children:[(0,s.jsxs)("div",{className:"flex items-center mb-1",children:[(0,s.jsx)(S.Z,{className:"w-4 h-4 mr-1 ".concat((e.energy||100)>70?"text-green-500":(e.energy||100)>30?"text-yellow-500":"text-red-500")}),(0,s.jsxs)("span",{className:"font-medium",children:[e.energy||100,"% Energy"]})]}),(0,s.jsxs)("div",{className:"flex items-center text-gray-500 dark:text-gray-400",children:[(0,s.jsx)(eB.Z,{className:"w-4 h-4 mr-1 ".concat((e.success_rate||0)>80?"text-green-500":(e.success_rate||0)>60?"text-yellow-500":"text-red-500")}),(0,s.jsxs)("span",{children:[Math.round(e.success_rate||0),"% Success"]})]})]})}),(0,s.jsx)("td",{children:(0,s.jsxs)("div",{className:"text-sm",children:[(0,s.jsx)("div",{className:"font-medium text-gray-900 dark:text-white",children:Z(e.organization_id)}),(0,s.jsxs)("div",{className:"text-gray-500 dark:text-gray-400 flex items-center",children:[(0,s.jsx)(_.Z,{className:"w-4 h-4 mr-1"}),(e.total_interactions||0).toLocaleString()," chats"]})]})}),(0,s.jsx)("td",{children:(0,s.jsx)("div",{className:"text-sm",children:e.openai_assistant_id?(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:"font-medium text-gray-900 dark:text-white font-mono",children:[e.openai_assistant_id.slice(0,12),"..."]}),(0,s.jsx)("div",{className:"text-green-600 dark:text-green-400",children:"✓ Configured"})]}):(0,s.jsx)("span",{className:"text-gray-500 dark:text-gray-400 italic",children:"Not configured"})})}),(0,s.jsx)("td",{className:"text-sm text-gray-500 dark:text-gray-400",children:e.last_interaction_at?(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{children:A(e.last_interaction_at)}),(0,s.jsx)("div",{className:"text-xs",children:"Last interaction"})]}):(0,s.jsx)("span",{className:"italic",children:"Never"})}),(0,s.jsx)("td",{children:(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)("button",{onClick:()=>k(e),className:"p-2 text-gray-400 hover:text-primary-600 hover:bg-primary-50 dark:hover:bg-primary-900/20 rounded-lg transition-colors",title:"View Details",children:(0,s.jsx)(c.Z,{className:"w-4 h-4"})}),(0,s.jsx)("button",{onClick:()=>w(e),className:"p-2 rounded-lg transition-colors ".concat("active"===e.status?"text-orange-600 hover:text-orange-700 hover:bg-orange-50 dark:hover:bg-orange-900/20":"text-green-600 hover:text-green-700 hover:bg-green-50 dark:hover:bg-green-900/20"),title:"active"===e.status?"Pause Agent":"Activate Agent",children:"active"===e.status?(0,s.jsx)(eV.Z,{className:"w-4 h-4"}):(0,s.jsx)(eN.Z,{className:"w-4 h-4"})}),(0,s.jsx)("div",{className:"relative",children:(0,s.jsx)("button",{className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",title:"More actions",children:(0,s.jsx)(ex.Z,{className:"w-4 h-4"})})})]})})]},e.id)})})]})})}),0===z.length&&(0,s.jsxs)("div",{className:"text-center py-12",children:[(0,s.jsx)(g.Z,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),(0,s.jsx)("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:"No agents found"}),(0,s.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:"Try adjusting your search criteria"})]}),(0,s.jsx)(eE,{agent:u,isOpen:y,onClose:()=>j(!1),onSave:e=>{t(t=>t.map(t=>t.id===e.id?e:t)),j(!1)}})]})}var eY=a(8124),eK=a(9076);function eX(){let[e,t]=(0,r.useState)([]),[a,i]=(0,r.useState)([]),[n,l]=(0,r.useState)(!0),[d,o]=(0,r.useState)(""),[g,u]=(0,r.useState)("all"),[p,y]=(0,r.useState)(null),[j,v]=(0,r.useState)(!1),[N,f]=(0,r.useState)("list");(0,r.useEffect)(()=>{k()},[]);let k=async()=>{try{l(!0);let[e,a]=await Promise.all([D.getTasks(),D.getOrganizations()]),s=e.map((e,t)=>{let a=[{frequency:"daily",time_of_day:"09:00",timezone:"EST",next_execution:new Date(Date.now()+864e5).toISOString(),last_execution_at:new Date(Date.now()-864e5).toISOString()},{frequency:"weekly",days_of_week:[1,2,3,4,5],time_of_day:"14:30",timezone:"UTC",next_execution:new Date(Date.now()+1728e5).toISOString(),last_execution_at:new Date(Date.now()-432e6).toISOString()},{frequency:"monthly",time_of_day:"08:00",timezone:"PST",next_execution:new Date(Date.now()+6048e5).toISOString(),last_execution_at:new Date(Date.now()-2592e6).toISOString()},{cron_expression:"0 */4 * * *",next_execution:new Date(Date.now()+144e5).toISOString(),last_execution_at:new Date(Date.now()-72e5).toISOString()},{last_execution_at:new Date(Date.now()-6048e5).toISOString()}],s=a[t%a.length];return{...e,...s,success_rate:Math.floor(40*Math.random()+60),priority:["high","medium","low","normal"][t%4],auto_retry:t%3==0,notifications_enabled:t%2==0,type:["standard","webhook","data_sync","cleanup"][t%4],parameters:t%2==0?{url:"https://api.example.com",timeout:30}:{}}});t(s),i(a.organizations||a)}catch(e){console.error("Error fetching tasks data:",e)}finally{l(!1)}},w=e=>{y(e),v(!0)},Z=async e=>{try{let a="active"===e.status?"paused":"active";t(t=>t.map(t=>t.id===e.id?{...t,status:a}:t)),console.log("Toggling task ".concat(e.name," to ").concat(a))}catch(a){console.error("Error toggling task status:",a),t(t=>t.map(t=>t.id===e.id?{...t,status:e.status}:t))}},S=e=>{let t=a.find(t=>t.id===e);return(null==t?void 0:t.team_name)||"Unknown Organization"},A=e=>new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}),T=e=>{if(!e.schedule&&!e.frequency)return{type:"manual",display:"Manual execution only",details:""};if(e.cron_expression)return{type:"cron",display:"Custom Schedule",details:e.cron_expression};if(e.frequency){let t=e.time_of_day||"09:00",a=e.timezone&&"UTC"!==e.timezone?" (".concat(e.timezone,")"):"";switch(e.frequency.toLowerCase()){case"daily":return{type:"daily",display:"Daily",details:"Every day at ".concat(t).concat(a)};case"weekly":let s=e.days_of_week?z(e.days_of_week):"Every week";return{type:"weekly",display:"Weekly",details:"".concat(s," at ").concat(t).concat(a)};case"monthly":return{type:"monthly",display:"Monthly",details:"Monthly at ".concat(t).concat(a)};case"hourly":return{type:"hourly",display:"Hourly",details:"Every hour"};default:return{type:"custom",display:e.frequency,details:e.time_of_day?"at ".concat(t).concat(a):""}}}return{type:"basic",display:"Scheduled",details:e.schedule||""}},z=e=>{if(!Array.isArray(e)||0===e.length)return"Every week";let t=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],a=[...e].sort();return 7===a.length?"Every day":5===a.length&&a.every(e=>e>=1&&e<=5)?"Weekdays":2===a.length&&a.includes(0)&&a.includes(6)?"Weekends":a.map(e=>t[e]).join(", ")},I=e=>{switch(null==e?void 0:e.toLowerCase()){case"active":return"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300";case"paused":return"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-300";case"inactive":return"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-300";default:return"bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-300"}},L=e.filter(e=>{let t=(e.name||"").toLowerCase().includes(d.toLowerCase())||(e.description||"").toLowerCase().includes(d.toLowerCase())||S(e.organization_id).toLowerCase().includes(d.toLowerCase()),a="all"===g||e.status===g;return t&&a});return n?(0,s.jsx)("div",{className:"p-6",children:(0,s.jsxs)("div",{className:"animate-pulse",children:[(0,s.jsx)("div",{className:"h-8 bg-gray-200 rounded w-1/4 mb-4"}),(0,s.jsx)("div",{className:"space-y-4",children:[void 0,void 0,void 0,void 0,void 0].map((e,t)=>(0,s.jsx)("div",{className:"h-20 bg-gray-200 rounded"},t))})]})}):(0,s.jsxs)("div",{className:"p-6 max-w-7xl mx-auto",children:[(0,s.jsxs)("div",{className:"mb-8",children:[(0,s.jsx)("div",{className:"flex items-center justify-between mb-4",children:(0,s.jsxs)("div",{children:[(0,s.jsxs)("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white flex items-center",children:[(0,s.jsx)(h.Z,{className:"w-8 h-8 mr-3 text-primary-600"}),"Scheduled Tasks"]}),(0,s.jsx)("p",{className:"text-gray-600 dark:text-gray-400 mt-1",children:"Monitor and manage all scheduled tasks across organizations"})]})}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6",children:[(0,s.jsx)("div",{className:"bg-white dark:bg-dark-800 rounded-xl p-4 border border-gray-200 dark:border-dark-700",children:(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)(h.Z,{className:"w-8 h-8 text-blue-600"}),(0,s.jsxs)("div",{className:"ml-3",children:[(0,s.jsx)("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Total Tasks"}),(0,s.jsx)("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:e.length})]})]})}),(0,s.jsx)("div",{className:"bg-white dark:bg-dark-800 rounded-xl p-4 border border-gray-200 dark:border-dark-700",children:(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)(ei.Z,{className:"w-8 h-8 text-green-600"}),(0,s.jsxs)("div",{className:"ml-3",children:[(0,s.jsx)("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Active"}),(0,s.jsx)("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:e.filter(e=>"active"===e.status).length})]})]})}),(0,s.jsx)("div",{className:"bg-white dark:bg-dark-800 rounded-xl p-4 border border-gray-200 dark:border-dark-700",children:(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)(C.Z,{className:"w-8 h-8 text-purple-600"}),(0,s.jsxs)("div",{className:"ml-3",children:[(0,s.jsx)("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Total Executions"}),(0,s.jsx)("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:e.reduce((e,t)=>e+(t.total_executions||0),0).toLocaleString()})]})]})}),(0,s.jsx)("div",{className:"bg-white dark:bg-dark-800 rounded-xl p-4 border border-gray-200 dark:border-dark-700",children:(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)(x.Z,{className:"w-8 h-8 text-orange-600"}),(0,s.jsxs)("div",{className:"ml-3",children:[(0,s.jsx)("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Organizations"}),(0,s.jsx)("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:new Set(e.map(e=>e.organization_id)).size})]})]})})]}),(0,s.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4 mb-6",children:[(0,s.jsxs)("div",{className:"flex-1 relative",children:[(0,s.jsx)(ed.Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),(0,s.jsx)("input",{type:"text",placeholder:"Search tasks, descriptions, or organizations...",value:d,onChange:e=>o(e.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-dark-600 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent bg-white dark:bg-dark-800 text-gray-900 dark:text-white"})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)(ec.Z,{className:"w-5 h-5 text-gray-400"}),(0,s.jsxs)("select",{value:g,onChange:e=>u(e.target.value),className:"px-3 py-2 border border-gray-300 dark:border-dark-600 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent bg-white dark:bg-dark-800 text-gray-900 dark:text-white",children:[(0,s.jsx)("option",{value:"all",children:"All Status"}),(0,s.jsx)("option",{value:"active",children:"Active"}),(0,s.jsx)("option",{value:"paused",children:"Paused"}),(0,s.jsx)("option",{value:"inactive",children:"Inactive"})]})]}),(0,s.jsx)(eu,{view:N,onViewChange:f})]})]})]}),"card"===N?(0,s.jsx)("div",{className:"grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 gap-6",children:L.map(e=>(0,s.jsxs)("div",{className:"bg-white dark:bg-dark-800 rounded-xl border border-gray-200 dark:border-dark-700 hover:shadow-lg transition-all duration-200 hover:scale-[1.02]",children:[(0,s.jsxs)("div",{className:"p-6 pb-4",children:[(0,s.jsxs)("div",{className:"flex items-start justify-between mb-4",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,s.jsx)("div",{className:"w-12 h-12 rounded-full flex items-center justify-center text-white font-bold text-lg ".concat("active"===e.status?"bg-gradient-to-r from-green-500 to-blue-500":"paused"===e.status?"bg-gradient-to-r from-yellow-500 to-orange-500":"bg-gradient-to-r from-gray-500 to-red-500"),children:(0,s.jsx)(h.Z,{className:"w-6 h-6"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white truncate max-w-[150px]",children:e.name||"Unnamed Task"}),(0,s.jsxs)("div",{className:"flex items-center space-x-2 mt-1",children:[(0,s.jsx)("span",{className:"px-2 py-1 rounded-full text-xs font-medium ".concat(I(e.status)),children:e.status||"active"}),(0,s.jsx)("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:S(e.organization_id)})]})]})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)("button",{onClick:()=>w(e),className:"p-2 text-gray-400 hover:text-blue-600 hover:bg-blue-50 dark:hover:bg-blue-900/20 rounded-lg transition-colors",title:"View Details",children:(0,s.jsx)(c.Z,{className:"w-4 h-4"})}),(0,s.jsx)("button",{onClick:()=>Z(e),className:"p-2 rounded-lg transition-colors ".concat("active"===e.status?"text-orange-600 hover:text-orange-700 hover:bg-orange-50 dark:hover:bg-orange-900/20":"text-green-600 hover:text-green-700 hover:bg-green-50 dark:hover:bg-green-900/20"),title:"active"===e.status?"Pause Task":"Activate Task",children:"active"===e.status?(0,s.jsx)(eV.Z,{className:"w-4 h-4"}):(0,s.jsx)(eN.Z,{className:"w-4 h-4"})}),(0,s.jsx)("div",{className:"relative",children:(0,s.jsx)("button",{className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",title:"More actions",children:(0,s.jsx)(ex.Z,{className:"w-4 h-4"})})})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-4 gap-3 mb-4",children:[(0,s.jsx)("div",{className:"flex flex-col items-center p-2 bg-gray-50 dark:bg-dark-700 rounded-lg",children:(()=>{let t=T(e);return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"p-1 rounded ".concat("manual"!==t.type?"text-green-600 bg-green-100 dark:bg-green-900/20":"text-gray-400 bg-gray-100 dark:bg-gray-800"),children:(0,s.jsx)(ew.Z,{className:"w-4 h-4"})}),(0,s.jsx)("span",{className:"text-xs text-gray-600 dark:text-gray-400 mt-1 text-center",children:t.display})]})})()}),(0,s.jsxs)("div",{className:"flex flex-col items-center p-2 bg-gray-50 dark:bg-dark-700 rounded-lg",children:[(0,s.jsx)("div",{className:"p-1 rounded ".concat(Object.keys(e.parameters||{}).length>0?"text-purple-600 bg-purple-100 dark:bg-purple-900/20":"text-gray-400 bg-gray-100 dark:bg-gray-800"),children:(0,s.jsx)(b.Z,{className:"w-4 h-4"})}),(0,s.jsx)("span",{className:"text-xs text-gray-600 dark:text-gray-400 mt-1",children:Object.keys(e.parameters||{}).length})]}),(0,s.jsxs)("div",{className:"flex flex-col items-center p-2 bg-gray-50 dark:bg-dark-700 rounded-lg",children:[(0,s.jsx)("div",{className:"p-1 rounded ".concat(e.type?"text-blue-600 bg-blue-100 dark:bg-blue-900/20":"text-gray-400 bg-gray-100 dark:bg-gray-800"),children:(0,s.jsx)(eY.Z,{className:"w-4 h-4"})}),(0,s.jsx)("span",{className:"text-xs text-gray-600 dark:text-gray-400 mt-1",children:e.type||"N/A"})]}),(0,s.jsxs)("div",{className:"flex flex-col items-center p-2 bg-gray-50 dark:bg-dark-700 rounded-lg",children:[(0,s.jsx)("div",{className:"p-1 rounded ".concat("high"===e.priority?"text-red-600 bg-red-100 dark:bg-red-900/20":"medium"===e.priority?"text-yellow-600 bg-yellow-100 dark:bg-yellow-900/20":"low"===e.priority?"text-green-600 bg-green-100 dark:bg-green-900/20":"text-gray-400 bg-gray-100 dark:bg-gray-800"),children:"high"===e.priority?(0,s.jsx)(en.Z,{className:"w-4 h-4"}):"medium"===e.priority?(0,s.jsx)(eB.Z,{className:"w-4 h-4"}):(0,s.jsx)(eC.Z,{className:"w-4 h-4"})}),(0,s.jsx)("span",{className:"text-xs text-gray-600 dark:text-gray-400 mt-1 capitalize",children:e.priority||"normal"})]})]}),(0,s.jsx)("div",{className:"flex items-center justify-between mb-4",children:(0,s.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,s.jsx)("div",{className:"p-1 rounded ".concat(e.auto_retry?"text-green-600":"text-gray-400"),children:e.auto_retry?(0,s.jsx)(eA.Z,{className:"w-4 h-4"}):(0,s.jsx)(eT.Z,{className:"w-4 h-4"})}),(0,s.jsx)("span",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Retry"})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,s.jsx)("div",{className:"p-1 rounded ".concat(e.notifications_enabled?"text-green-600":"text-gray-400"),children:e.notifications_enabled?(0,s.jsx)(eA.Z,{className:"w-4 h-4"}):(0,s.jsx)(eT.Z,{className:"w-4 h-4"})}),(0,s.jsx)("span",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Notify"})]})]})})]}),(0,s.jsxs)("div",{className:"px-6 py-4 bg-gray-50 dark:bg-dark-700 rounded-b-xl border-t border-gray-100 dark:border-dark-600",children:[(0,s.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsxs)("div",{className:"flex items-center justify-center space-x-1 mb-1",children:[(0,s.jsx)(eB.Z,{className:"w-4 h-4 ".concat((e.success_rate||0)>80?"text-green-500":(e.success_rate||0)>60?"text-yellow-500":"text-red-500")}),(0,s.jsxs)("span",{className:"text-sm font-semibold text-gray-900 dark:text-white",children:[Math.round(e.success_rate||0),"%"]})]}),(0,s.jsx)("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Success"})]}),(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsxs)("div",{className:"flex items-center justify-center space-x-1 mb-1",children:[(0,s.jsx)(_.Z,{className:"w-4 h-4 text-blue-500"}),(0,s.jsx)("span",{className:"text-sm font-semibold text-gray-900 dark:text-white",children:(e.total_executions||0)>999?"".concat(Math.round((e.total_executions||0)/1e3),"k"):e.total_executions||0})]}),(0,s.jsx)("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Runs"})]}),(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsxs)("div",{className:"flex items-center justify-center space-x-1 mb-1",children:[(0,s.jsx)(ew.Z,{className:"w-4 h-4 text-purple-500"}),(0,s.jsx)("span",{className:"text-sm font-semibold text-gray-900 dark:text-white",children:e.next_execution?"Soon":"N/A"})]}),(0,s.jsx)("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Next"})]})]}),(0,s.jsxs)("div",{className:"mt-3 pt-3 border-t border-gray-200 dark:border-dark-600",children:[(()=>{let t=T(e);return"manual"!==t.type&&t.details&&(0,s.jsxs)("div",{className:"flex items-center justify-center text-xs text-gray-600 dark:text-gray-400 mb-2",children:[(0,s.jsx)(ew.Z,{className:"w-3 h-3 mr-1"}),(0,s.jsx)("span",{className:"text-center",children:t.details})]})})(),e.next_execution&&(0,s.jsxs)("div",{className:"flex items-center justify-center text-xs text-blue-600 dark:text-blue-400 mb-2",children:[(0,s.jsx)(eN.Z,{className:"w-3 h-3 mr-1"}),(0,s.jsxs)("span",{children:["Next: ",A(e.next_execution)]})]}),e.last_execution_at&&(0,s.jsxs)("div",{className:"flex items-center justify-center text-xs text-gray-500 dark:text-gray-400",children:[(0,s.jsx)(eK.Z,{className:"w-3 h-3 mr-1"}),(0,s.jsxs)("span",{children:["Last run ",A(e.last_execution_at)]})]})]})]})]},e.id))}):(0,s.jsx)("div",{className:"admin-card overflow-hidden",children:(0,s.jsx)("div",{className:"overflow-x-auto",children:(0,s.jsxs)("table",{className:"admin-table",children:[(0,s.jsx)("thead",{className:"bg-gray-50 dark:bg-gray-800",children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{children:"Task"}),(0,s.jsx)("th",{children:"Status"}),(0,s.jsx)("th",{children:"Schedule"}),(0,s.jsx)("th",{children:"Configuration"}),(0,s.jsx)("th",{children:"Performance"}),(0,s.jsx)("th",{children:"Organization"}),(0,s.jsx)("th",{children:"Last Execution"}),(0,s.jsx)("th",{children:"Actions"})]})}),(0,s.jsx)("tbody",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:L.map(e=>(0,s.jsxs)("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-800 transition-colors",children:[(0,s.jsx)("td",{children:(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)("div",{className:"w-10 h-10 rounded-full flex items-center justify-center text-white font-medium text-sm mr-3 ".concat("active"===e.status?"bg-gradient-to-r from-green-500 to-blue-500":"paused"===e.status?"bg-gradient-to-r from-yellow-500 to-orange-500":"bg-gradient-to-r from-gray-500 to-red-500"),children:(0,s.jsx)(h.Z,{className:"w-5 h-5"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"font-medium text-gray-900 dark:text-white",children:e.name||"Unnamed Task"}),(0,s.jsxs)("div",{className:"text-sm text-gray-500 dark:text-gray-400 flex items-center space-x-2",children:[e.auto_retry&&(0,s.jsx)("span",{title:"Auto-retry enabled",children:(0,s.jsx)(eK.Z,{className:"w-3 h-3 text-green-600"})}),e.notifications_enabled&&(0,s.jsx)("span",{title:"Notifications enabled",children:(0,s.jsx)(m.Z,{className:"w-3 h-3 text-blue-600"})}),(0,s.jsxs)("span",{className:"capitalize",children:[e.priority||"normal"," priority"]})]})]})]})}),(0,s.jsx)("td",{children:(0,s.jsx)("span",{className:"px-2 py-1 rounded-full text-xs font-medium ".concat(I(e.status)),children:e.status||"active"})}),(0,s.jsx)("td",{children:(0,s.jsx)("div",{className:"text-sm",children:(()=>{let t=T(e);return"manual"===t.type?(0,s.jsx)("span",{className:"text-gray-500 dark:text-gray-400 italic",children:"Manual"}):(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:"flex items-center text-green-600 dark:text-green-400",children:[(0,s.jsx)(ew.Z,{className:"w-4 h-4 mr-1"}),(0,s.jsx)("span",{className:"font-medium",children:t.display})]}),(0,s.jsx)("div",{className:"text-gray-500 dark:text-gray-400 text-xs mt-1",children:t.details}),e.next_execution&&(0,s.jsxs)("div",{className:"text-blue-600 dark:text-blue-400 text-xs mt-1",children:["Next: ",A(e.next_execution)]})]})})()})}),(0,s.jsx)("td",{children:(0,s.jsxs)("div",{className:"flex items-center space-x-3 text-sm",children:[(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)(b.Z,{className:"w-4 h-4 text-blue-500 mr-1"}),(0,s.jsx)("span",{children:Object.keys(e.parameters||{}).length})]}),(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)(eY.Z,{className:"w-4 h-4 text-purple-500 mr-1"}),(0,s.jsx)("span",{className:"capitalize",children:e.type||"standard"})]})]})}),(0,s.jsx)("td",{children:(0,s.jsxs)("div",{className:"text-sm",children:[(0,s.jsxs)("div",{className:"flex items-center mb-1",children:[(0,s.jsx)(eB.Z,{className:"w-4 h-4 mr-1 ".concat((e.success_rate||0)>80?"text-green-500":(e.success_rate||0)>60?"text-yellow-500":"text-red-500")}),(0,s.jsxs)("span",{className:"font-medium",children:[Math.round(e.success_rate||0),"% Success"]})]}),(0,s.jsxs)("div",{className:"flex items-center text-gray-500 dark:text-gray-400",children:[(0,s.jsx)(_.Z,{className:"w-4 h-4 mr-1"}),(0,s.jsxs)("span",{children:[(e.total_executions||0).toLocaleString()," runs"]})]})]})}),(0,s.jsx)("td",{children:(0,s.jsxs)("div",{className:"text-sm",children:[(0,s.jsx)("div",{className:"font-medium text-gray-900 dark:text-white",children:S(e.organization_id)}),(0,s.jsxs)("div",{className:"text-gray-500 dark:text-gray-400",children:["Created ",A(e.created_at)]})]})}),(0,s.jsx)("td",{className:"text-sm text-gray-500 dark:text-gray-400",children:e.last_execution_at?(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{children:A(e.last_execution_at)}),(0,s.jsx)("div",{className:"text-xs",children:"Last run"})]}):(0,s.jsx)("span",{className:"italic",children:"Never executed"})}),(0,s.jsx)("td",{children:(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)("button",{onClick:()=>w(e),className:"p-2 text-gray-400 hover:text-primary-600 hover:bg-primary-50 dark:hover:bg-primary-900/20 rounded-lg transition-colors",title:"View Details",children:(0,s.jsx)(c.Z,{className:"w-4 h-4"})}),(0,s.jsx)("button",{onClick:()=>Z(e),className:"p-2 rounded-lg transition-colors ".concat("active"===e.status?"text-orange-600 hover:text-orange-700 hover:bg-orange-50 dark:hover:bg-orange-900/20":"text-green-600 hover:text-green-700 hover:bg-green-50 dark:hover:bg-green-900/20"),title:"active"===e.status?"Pause Task":"Activate Task",children:"active"===e.status?(0,s.jsx)(eV.Z,{className:"w-4 h-4"}):(0,s.jsx)(eN.Z,{className:"w-4 h-4"})}),(0,s.jsx)("div",{className:"relative",children:(0,s.jsx)("button",{className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",title:"More actions",children:(0,s.jsx)(ex.Z,{className:"w-4 h-4"})})})]})})]},e.id))})]})})}),0===L.length&&(0,s.jsxs)("div",{className:"text-center py-12",children:[(0,s.jsx)(h.Z,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),(0,s.jsx)("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:"No tasks found"}),(0,s.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:"Try adjusting your search criteria"})]}),(0,s.jsx)(eU,{task:p,isOpen:j,onClose:()=>v(!1),onSave:e=>{t(t=>t.map(t=>t.id===e.id?e:t)),v(!1)}})]})}var e$=a(6858);function eQ(){let[e,t]=(0,r.useState)([]),[a,i]=(0,r.useState)([]),[n,l]=(0,r.useState)(!0),[d,o]=(0,r.useState)(""),[m,g]=(0,r.useState)("all"),[h,p]=(0,r.useState)(null),[y,b]=(0,r.useState)(!1),[j,v]=(0,r.useState)("list");(0,r.useEffect)(()=>{N()},[]);let N=async()=>{try{l(!0);let[e,a]=await Promise.all([D.getPipelines(),D.getOrganizations()]);t(e),i(a.organizations||a)}catch(e){console.error("Error fetching pipelines data:",e)}finally{l(!1)}},f=e=>{p(e),b(!0)},k=async e=>{try{let a="active"===e.status?"paused":"active";t(t=>t.map(t=>t.id===e.id?{...t,status:a}:t)),console.log("Toggling pipeline ".concat(e.name," to ").concat(a))}catch(a){console.error("Error toggling pipeline status:",a),t(t=>t.map(t=>t.id===e.id?{...t,status:e.status}:t))}},w=e=>{let t=a.find(t=>t.id===e);return(null==t?void 0:t.team_name)||"Unknown Organization"},Z=e=>new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}),S=e=>{switch(null==e?void 0:e.toLowerCase()){case"active":return"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300";case"paused":return"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-300";case"inactive":return"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-300";default:return"bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-300"}},A=e.filter(e=>{let t=(e.name||"").toLowerCase().includes(d.toLowerCase())||(e.description||"").toLowerCase().includes(d.toLowerCase())||w(e.organization_id).toLowerCase().includes(d.toLowerCase()),a="all"===m||e.status===m;return t&&a});return n?(0,s.jsx)("div",{className:"p-6",children:(0,s.jsxs)("div",{className:"animate-pulse",children:[(0,s.jsx)("div",{className:"h-8 bg-gray-200 rounded w-1/4 mb-4"}),(0,s.jsx)("div",{className:"space-y-4",children:[void 0,void 0,void 0,void 0,void 0].map((e,t)=>(0,s.jsx)("div",{className:"h-20 bg-gray-200 rounded"},t))})]})}):(0,s.jsxs)("div",{className:"p-6 max-w-7xl mx-auto",children:[(0,s.jsxs)("div",{className:"mb-8",children:[(0,s.jsx)("div",{className:"flex items-center justify-between mb-4",children:(0,s.jsxs)("div",{children:[(0,s.jsxs)("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white flex items-center",children:[(0,s.jsx)(u.Z,{className:"w-8 h-8 mr-3 text-primary-600"}),"Workflow Pipelines"]}),(0,s.jsx)("p",{className:"text-gray-600 dark:text-gray-400 mt-1",children:"Monitor and manage all workflow pipelines across organizations"})]})}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6",children:[(0,s.jsx)("div",{className:"bg-white dark:bg-dark-800 rounded-xl p-4 border border-gray-200 dark:border-dark-700",children:(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)(u.Z,{className:"w-8 h-8 text-blue-600"}),(0,s.jsxs)("div",{className:"ml-3",children:[(0,s.jsx)("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Total Pipelines"}),(0,s.jsx)("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:e.length})]})]})}),(0,s.jsx)("div",{className:"bg-white dark:bg-dark-800 rounded-xl p-4 border border-gray-200 dark:border-dark-700",children:(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)(ei.Z,{className:"w-8 h-8 text-green-600"}),(0,s.jsxs)("div",{className:"ml-3",children:[(0,s.jsx)("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Active"}),(0,s.jsx)("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:e.filter(e=>"active"===e.status).length})]})]})}),(0,s.jsx)("div",{className:"bg-white dark:bg-dark-800 rounded-xl p-4 border border-gray-200 dark:border-dark-700",children:(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)(C.Z,{className:"w-8 h-8 text-purple-600"}),(0,s.jsxs)("div",{className:"ml-3",children:[(0,s.jsx)("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Total Executions"}),(0,s.jsx)("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:e.reduce((e,t)=>e+(t.total_executions||0),0).toLocaleString()})]})]})}),(0,s.jsx)("div",{className:"bg-white dark:bg-dark-800 rounded-xl p-4 border border-gray-200 dark:border-dark-700",children:(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)(x.Z,{className:"w-8 h-8 text-orange-600"}),(0,s.jsxs)("div",{className:"ml-3",children:[(0,s.jsx)("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Organizations"}),(0,s.jsx)("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:new Set(e.map(e=>e.organization_id)).size})]})]})})]}),(0,s.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4 mb-6",children:[(0,s.jsxs)("div",{className:"flex-1 relative",children:[(0,s.jsx)(ed.Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),(0,s.jsx)("input",{type:"text",placeholder:"Search pipelines, descriptions, or organizations...",value:d,onChange:e=>o(e.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-dark-600 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent bg-white dark:bg-dark-800 text-gray-900 dark:text-white"})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)(ec.Z,{className:"w-5 h-5 text-gray-400"}),(0,s.jsxs)("select",{value:m,onChange:e=>g(e.target.value),className:"px-3 py-2 border border-gray-300 dark:border-dark-600 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent bg-white dark:bg-dark-800 text-gray-900 dark:text-white",children:[(0,s.jsx)("option",{value:"all",children:"All Status"}),(0,s.jsx)("option",{value:"active",children:"Active"}),(0,s.jsx)("option",{value:"paused",children:"Paused"}),(0,s.jsx)("option",{value:"inactive",children:"Inactive"})]})]}),(0,s.jsx)(eu,{view:j,onViewChange:v})]})]})]}),"card"===j?(0,s.jsx)("div",{className:"space-y-4",children:A.map(e=>(0,s.jsx)("div",{className:"bg-white dark:bg-dark-800 rounded-xl p-6 border border-gray-200 dark:border-dark-700 hover:shadow-lg transition-shadow",children:(0,s.jsxs)("div",{className:"flex items-start justify-between",children:[(0,s.jsxs)("div",{className:"flex items-start space-x-4",children:[(0,s.jsx)("div",{className:"w-12 h-12 bg-gradient-to-r from-purple-500 to-pink-500 rounded-full flex items-center justify-center text-white font-bold text-lg",children:(0,s.jsx)(eM.Z,{className:"w-6 h-6"})}),(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-3 mb-2",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:e.name||"Unnamed Pipeline"}),(0,s.jsx)("span",{className:"px-2 py-1 rounded-full text-xs font-medium ".concat(S(e.status)),children:e.status||"active"})]}),(0,s.jsx)("p",{className:"text-gray-600 dark:text-gray-400 mb-3",children:e.description||"No description available"}),(0,s.jsxs)("div",{className:"flex items-center space-x-4 text-sm text-gray-600 dark:text-gray-400",children:[(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)(x.Z,{className:"w-4 h-4 mr-1"}),w(e.organization_id)]}),(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)(ew.Z,{className:"w-4 h-4 mr-1"}),"Created ",Z(e.created_at)]}),(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)(_.Z,{className:"w-4 h-4 mr-1"}),(e.total_executions||0).toLocaleString()," executions"]})]})]})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)("button",{onClick:()=>f(e),className:"p-2 text-gray-400 hover:text-blue-600 hover:bg-blue-50 dark:hover:bg-blue-900/20 rounded-lg transition-colors",title:"View Details",children:(0,s.jsx)(c.Z,{className:"w-4 h-4"})}),(0,s.jsx)("button",{onClick:()=>k(e),className:"p-2 rounded-lg transition-colors ".concat("active"===e.status?"text-orange-600 hover:text-orange-700 hover:bg-orange-50 dark:hover:bg-orange-900/20":"text-green-600 hover:text-green-700 hover:bg-green-50 dark:hover:bg-green-900/20"),title:"active"===e.status?"Pause Pipeline":"Activate Pipeline",children:"active"===e.status?(0,s.jsx)(eV.Z,{className:"w-4 h-4"}):(0,s.jsx)(eN.Z,{className:"w-4 h-4"})}),(0,s.jsx)("div",{className:"relative",children:(0,s.jsx)("button",{className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",title:"More actions",children:(0,s.jsx)(ex.Z,{className:"w-4 h-4"})})})]})]})},e.id))}):(0,s.jsx)("div",{className:"admin-card overflow-hidden",children:(0,s.jsx)("div",{className:"overflow-x-auto",children:(0,s.jsxs)("table",{className:"admin-table",children:[(0,s.jsx)("thead",{className:"bg-gray-50 dark:bg-gray-800",children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{children:"Pipeline"}),(0,s.jsx)("th",{children:"Status"}),(0,s.jsx)("th",{children:"Steps"}),(0,s.jsx)("th",{children:"Performance"}),(0,s.jsx)("th",{children:"Organization"}),(0,s.jsx)("th",{children:"Last Execution"}),(0,s.jsx)("th",{children:"Actions"})]})}),(0,s.jsx)("tbody",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:A.map(e=>{var t;return(0,s.jsxs)("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-800 transition-colors",children:[(0,s.jsx)("td",{children:(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)("div",{className:"w-10 h-10 bg-gradient-to-r from-purple-500 to-pink-500 rounded-full flex items-center justify-center text-white font-medium text-sm mr-3",children:(0,s.jsx)(eM.Z,{className:"w-5 h-5"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"font-medium text-gray-900 dark:text-white",children:e.name||"Unnamed Pipeline"}),(0,s.jsx)("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:e.description?e.description.slice(0,40)+"...":"No description"})]})]})}),(0,s.jsx)("td",{children:(0,s.jsx)("span",{className:"px-2 py-1 rounded-full text-xs font-medium ".concat(S(e.status)),children:e.status||"active"})}),(0,s.jsx)("td",{children:(0,s.jsxs)("div",{className:"flex items-center space-x-3 text-sm",children:[(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)(e$.Z,{className:"w-4 h-4 text-blue-500 mr-1"}),(0,s.jsxs)("span",{children:[(null===(t=e.steps)||void 0===t?void 0:t.length)||0," steps"]})]}),(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)(eY.Z,{className:"w-4 h-4 text-purple-500 mr-1"}),(0,s.jsx)("span",{className:"capitalize",children:e.type||"workflow"})]})]})}),(0,s.jsx)("td",{children:(0,s.jsxs)("div",{className:"text-sm",children:[(0,s.jsxs)("div",{className:"flex items-center mb-1",children:[(0,s.jsx)(eB.Z,{className:"w-4 h-4 mr-1 ".concat((e.success_rate||0)>80?"text-green-500":(e.success_rate||0)>60?"text-yellow-500":"text-red-500")}),(0,s.jsxs)("span",{className:"font-medium",children:[Math.round(e.success_rate||0),"% Success"]})]}),(0,s.jsxs)("div",{className:"flex items-center text-gray-500 dark:text-gray-400",children:[(0,s.jsx)(_.Z,{className:"w-4 h-4 mr-1"}),(0,s.jsxs)("span",{children:[(e.total_executions||0).toLocaleString()," runs"]})]})]})}),(0,s.jsx)("td",{children:(0,s.jsxs)("div",{className:"text-sm",children:[(0,s.jsx)("div",{className:"font-medium text-gray-900 dark:text-white",children:w(e.organization_id)}),(0,s.jsxs)("div",{className:"text-gray-500 dark:text-gray-400",children:["Created ",Z(e.created_at)]})]})}),(0,s.jsx)("td",{className:"text-sm text-gray-500 dark:text-gray-400",children:e.last_execution_at?(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{children:Z(e.last_execution_at)}),(0,s.jsx)("div",{className:"text-xs",children:"Last run"})]}):(0,s.jsx)("span",{className:"italic",children:"Never executed"})}),(0,s.jsx)("td",{children:(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)("button",{onClick:()=>f(e),className:"p-2 text-gray-400 hover:text-primary-600 hover:bg-primary-50 dark:hover:bg-primary-900/20 rounded-lg transition-colors",title:"View Details",children:(0,s.jsx)(c.Z,{className:"w-4 h-4"})}),(0,s.jsx)("button",{onClick:()=>k(e),className:"p-2 rounded-lg transition-colors ".concat("active"===e.status?"text-orange-600 hover:text-orange-700 hover:bg-orange-50 dark:hover:bg-orange-900/20":"text-green-600 hover:text-green-700 hover:bg-green-50 dark:hover:bg-green-900/20"),title:"active"===e.status?"Pause Pipeline":"Activate Pipeline",children:"active"===e.status?(0,s.jsx)(eV.Z,{className:"w-4 h-4"}):(0,s.jsx)(eN.Z,{className:"w-4 h-4"})}),(0,s.jsx)("div",{className:"relative",children:(0,s.jsx)("button",{className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",title:"More actions",children:(0,s.jsx)(ex.Z,{className:"w-4 h-4"})})})]})})]},e.id)})})]})})}),0===A.length&&(0,s.jsxs)("div",{className:"text-center py-12",children:[(0,s.jsx)(u.Z,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),(0,s.jsx)("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:"No pipelines found"}),(0,s.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:"Try adjusting your search criteria"})]}),(0,s.jsx)(eq,{pipeline:h,isOpen:y,onClose:()=>b(!1),onSave:e=>{t(t=>t.map(t=>t.id===e.id?e:t)),b(!1)}})]})}var e0=a(2252),e2=a(91),e4=a(6137),e1=a(2926),e5=a(476),e6=a(7168);let e3="https://slackai-v2-worker.dan-bfe.workers.dev";function e9(){let[e,t]=(0,r.useState)(null),[a,i]=(0,r.useState)(null),[l,d]=(0,r.useState)(null),[c,o]=(0,r.useState)(!0),[x,p]=(0,r.useState)(""),[b,j]=(0,r.useState)(new Date),[v,N]=(0,r.useState)(!0),[f,k]=(0,r.useState)(null);(0,r.useEffect)(()=>{w();let e=v?setInterval(w,3e4):void 0;return()=>{e&&clearInterval(e)}},[v]);let w=async()=>{try{o(!0),p("");let[e,a]=await Promise.all([fetch("".concat(e3,"/health")),fetch("".concat(e3,"/api/status"))]);if(e.ok){let a=await e.json();t(a)}if(a.ok){let e=await a.json();i(e)}try{let e=await fetch("".concat(e3,"/health/comprehensive"));if(e.ok){let t=await e.json();d(t)}}catch(e){console.log("Comprehensive health not available:",e),d(Z())}j(new Date)}catch(e){console.error("Error fetching health data:",e),p(e.message)}finally{o(!1)}},Z=()=>{let t=(null==e?void 0:e.status)==="healthy"&&(null==a?void 0:a.status)==="running";return{overallStatus:t?"healthy":"warning",healthScore:t?95:75,components:{agents:{status:"healthy",checks:[{name:"Agent Functions",status:"PASS",message:"All agent functions operational"},{name:"Response Time",status:"PASS",message:"Average response time: 150ms"}],count:22,performance:95},tasks:{status:"healthy",checks:[{name:"Task Processing",status:"PASS",message:"Task queue processing normally"},{name:"Completion Rate",status:"PASS",message:"98% completion rate"}],count:1,performance:92},pipelines:{status:"healthy",checks:[{name:"Pipeline Execution",status:"PASS",message:"All pipelines executing"},{name:"Flow Integrity",status:"PASS",message:"No broken pipeline flows"}],count:0,performance:88},subscriptions:{status:"healthy",checks:[{name:"Delivery Rate",status:"PASS",message:"99.5% delivery rate"},{name:"Connection Health",status:"PASS",message:"All connections stable"}],count:0,performance:96},database:{status:(null==a?void 0:a.services.supabase)?"healthy":"critical",checks:[{name:"Database Connectivity",status:(null==a?void 0:a.services.supabase)?"PASS":"FAIL",message:(null==a?void 0:a.services.supabase)?"Database connected":"Database connection failed"}],performance:(null==a?void 0:a.services.supabase)?98:0}},criticalIssues:[],warnings:[],metrics:{totalRecords:23,responseTime:150,uptime:99.9,throughput:1e3,errorRate:.1}}},A=e=>{switch(null==e?void 0:e.toLowerCase()){case"healthy":case"running":case"pass":return"text-green-600 bg-green-50 dark:bg-green-900/20";case"warning":case"degraded":return"text-yellow-600 bg-yellow-50 dark:bg-yellow-900/20";case"critical":case"error":case"fail":return"text-red-600 bg-red-50 dark:bg-red-900/20";default:return"text-gray-600 bg-gray-50 dark:bg-gray-900/20"}},T=e=>{switch(null==e?void 0:e.toLowerCase()){case"healthy":case"running":case"pass":return ei.Z;case"warning":case"degraded":return en.Z;case"critical":case"error":case"fail":return el.Z;default:return e0.Z}},z=e=>{switch(e.toLowerCase()){case"cloudflare":return em.Z;case"supabase":return e2.Z;case"slack":return m.Z;case"openai":return g.Z;default:return e4.Z}},I=e=>{switch(e.toLowerCase()){case"agents":return g.Z;case"tasks":return h.Z;case"pipelines":return u.Z;case"subscriptions":return e1.Z;case"database":return e2.Z;case"performance":return e5.Z;case"security":return n.Z;default:return _.Z}};return c&&!e?(0,s.jsx)("div",{className:"p-6",children:(0,s.jsxs)("div",{className:"animate-pulse",children:[(0,s.jsx)("div",{className:"h-8 bg-gray-200 rounded w-1/4 mb-6"}),(0,s.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-6",children:[void 0,void 0,void 0,void 0].map((e,t)=>(0,s.jsx)("div",{className:"h-32 bg-gray-200 rounded"},t))}),(0,s.jsx)("div",{className:"space-y-4",children:[void 0,void 0,void 0].map((e,t)=>(0,s.jsx)("div",{className:"h-20 bg-gray-200 rounded"},t))})]})}):(0,s.jsxs)("div",{className:"p-6 max-w-7xl mx-auto",children:[(0,s.jsxs)("div",{className:"mb-8",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsxs)("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white flex items-center",children:[(0,s.jsx)(y.Z,{className:"w-8 h-8 mr-3 text-red-500"}),"System Health Monitoring"]}),(0,s.jsx)("p",{className:"text-gray-600 dark:text-gray-400 mt-1",children:"Real-time monitoring of all system components and services"})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)("label",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Auto-refresh"}),(0,s.jsx)("button",{onClick:()=>N(!v),className:"relative inline-flex h-6 w-11 items-center rounded-full transition-colors ".concat(v?"bg-primary-600":"bg-gray-200 dark:bg-gray-700"),children:(0,s.jsx)("span",{className:"inline-block h-4 w-4 transform rounded-full bg-white transition-transform ".concat(v?"translate-x-6":"translate-x-1")})})]}),(0,s.jsxs)("button",{onClick:w,disabled:c,className:"flex items-center space-x-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 transition-colors",children:[(0,s.jsx)(e6.Z,{className:"w-4 h-4 ".concat(c?"animate-spin":"")}),(0,s.jsx)("span",{children:"Refresh"})]})]})]}),(0,s.jsxs)("div",{className:"flex items-center text-sm text-gray-500 dark:text-gray-400",children:[(0,s.jsx)(ew.Z,{className:"w-4 h-4 mr-1"}),(0,s.jsxs)("span",{children:["Last updated: ",new Date(b.toISOString()).toLocaleString()]}),x&&(0,s.jsxs)("span",{className:"ml-4 text-red-600",children:[(0,s.jsx)(en.Z,{className:"w-4 h-4 inline mr-1"}),x]})]})]}),(e||a)&&(0,s.jsx)("div",{className:"mb-8",children:(0,s.jsx)("div",{className:"bg-white dark:bg-dark-800 rounded-xl border border-gray-200 dark:border-dark-700 p-6",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,s.jsx)("div",{className:"p-3 rounded-full ".concat(A((null==e?void 0:e.status)||(null==a?void 0:a.status)||"unknown")),children:(0,s.jsx)(y.Z,{className:"w-8 h-8"})}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:["System Status: ",((null==e?void 0:e.status)||(null==a?void 0:a.status)||"Unknown").toUpperCase()]}),(0,s.jsxs)("p",{className:"text-gray-600 dark:text-gray-400",children:["Version: ",(null==e?void 0:e.worker_version)||(null==a?void 0:a.version)||"Unknown"]})]})]}),l&&(0,s.jsxs)("div",{className:"text-right",children:[(0,s.jsxs)("div",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:[l.healthScore,"/100"]}),(0,s.jsx)("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Health Score"})]})]})})}),a&&(0,s.jsxs)("div",{className:"mb-8",children:[(0,s.jsx)("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-4",children:"External Services"}),(0,s.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:Object.entries(a.services).map(e=>{let[t,a]=e,r=z(t),i=a?ei.Z:el.Z;return(0,s.jsxs)("div",{className:"bg-white dark:bg-dark-800 rounded-xl border border-gray-200 dark:border-dark-700 p-4",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,s.jsx)(r,{className:"w-6 h-6 text-gray-600 dark:text-gray-400"}),(0,s.jsx)(i,{className:"w-5 h-5 ".concat(a?"text-green-500":"text-red-500")})]}),(0,s.jsx)("h4",{className:"font-semibold text-gray-900 dark:text-white capitalize",children:t}),(0,s.jsx)("p",{className:"text-sm ".concat(a?"text-green-600":"text-red-600"),children:a?"Connected":"Disconnected"})]},t)})})]}),l&&(0,s.jsxs)("div",{className:"mb-8",children:[(0,s.jsx)("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-4",children:"System Components"}),(0,s.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4",children:Object.entries(l.components).map(e=>{let[t,a]=e,r=I(t),i=T(a.status);return(0,s.jsxs)("div",{className:"bg-white dark:bg-dark-800 rounded-xl border border-gray-200 dark:border-dark-700 p-4 hover:shadow-lg transition-all duration-200 cursor-pointer",onClick:()=>k(f===t?null:t),children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,s.jsx)(r,{className:"w-6 h-6 text-gray-600 dark:text-gray-400"}),(0,s.jsx)(i,{className:"w-5 h-5 ".concat(A(a.status).split(" ")[0])})]}),(0,s.jsx)("h4",{className:"font-semibold text-gray-900 dark:text-white capitalize mb-1",children:t}),(0,s.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,s.jsx)("span",{className:"px-2 py-1 rounded-full text-xs font-medium ".concat(A(a.status)),children:a.status.toUpperCase()}),void 0!==a.count&&(0,s.jsxs)("span",{className:"text-gray-600 dark:text-gray-400",children:[a.count," items"]})]}),a.performance&&(0,s.jsxs)("div",{className:"mt-3",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between text-xs text-gray-600 dark:text-gray-400 mb-1",children:[(0,s.jsx)("span",{children:"Performance"}),(0,s.jsxs)("span",{children:[a.performance,"%"]})]}),(0,s.jsx)("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-1.5",children:(0,s.jsx)("div",{className:"bg-blue-600 h-1.5 rounded-full transition-all duration-300",style:{width:"".concat(a.performance,"%")}})})]}),f===t&&(0,s.jsxs)("div",{className:"mt-4 pt-4 border-t border-gray-200 dark:border-gray-700",children:[(0,s.jsx)("h5",{className:"font-medium text-gray-900 dark:text-white mb-2",children:"Health Checks"}),(0,s.jsx)("div",{className:"space-y-2",children:a.checks.map((e,t)=>{let a=T(e.status.toLowerCase());return(0,s.jsxs)("div",{className:"flex items-start space-x-2 text-sm",children:[(0,s.jsx)(a,{className:"w-4 h-4 mt-0.5 ".concat(A(e.status.toLowerCase()).split(" ")[0])}),(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"font-medium text-gray-900 dark:text-white",children:e.name}),(0,s.jsx)("div",{className:"text-gray-600 dark:text-gray-400",children:e.message}),e.duration&&(0,s.jsxs)("div",{className:"text-xs text-gray-500",children:[e.duration,"ms"]})]})]},t)})})]})]},t)})})]}),(null==l?void 0:l.metrics)&&(0,s.jsxs)("div",{className:"mb-8",children:[(0,s.jsx)("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-4",children:"Performance Metrics"}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4",children:[(0,s.jsxs)("div",{className:"bg-white dark:bg-dark-800 rounded-xl border border-gray-200 dark:border-dark-700 p-4",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-2 mb-2",children:[(0,s.jsx)(_.Z,{className:"w-5 h-5 text-blue-500"}),(0,s.jsx)("span",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Total Records"})]}),(0,s.jsx)("div",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:l.metrics.totalRecords.toLocaleString()})]}),(0,s.jsxs)("div",{className:"bg-white dark:bg-dark-800 rounded-xl border border-gray-200 dark:border-dark-700 p-4",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-2 mb-2",children:[(0,s.jsx)(S.Z,{className:"w-5 h-5 text-yellow-500"}),(0,s.jsx)("span",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Response Time"})]}),(0,s.jsxs)("div",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:[l.metrics.responseTime,"ms"]})]}),(0,s.jsxs)("div",{className:"bg-white dark:bg-dark-800 rounded-xl border border-gray-200 dark:border-dark-700 p-4",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-2 mb-2",children:[(0,s.jsx)(C.Z,{className:"w-5 h-5 text-green-500"}),(0,s.jsx)("span",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Uptime"})]}),(0,s.jsxs)("div",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:[l.metrics.uptime,"%"]})]}),(0,s.jsxs)("div",{className:"bg-white dark:bg-dark-800 rounded-xl border border-gray-200 dark:border-dark-700 p-4",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-2 mb-2",children:[(0,s.jsx)(e5.Z,{className:"w-5 h-5 text-purple-500"}),(0,s.jsx)("span",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Throughput"})]}),(0,s.jsxs)("div",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:[l.metrics.throughput,"/min"]})]}),(0,s.jsxs)("div",{className:"bg-white dark:bg-dark-800 rounded-xl border border-gray-200 dark:border-dark-700 p-4",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-2 mb-2",children:[(0,s.jsx)(en.Z,{className:"w-5 h-5 text-red-500"}),(0,s.jsx)("span",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Error Rate"})]}),(0,s.jsxs)("div",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:[l.metrics.errorRate,"%"]})]})]})]}),l&&(l.criticalIssues.length>0||l.warnings.length>0)&&(0,s.jsxs)("div",{className:"mb-8",children:[(0,s.jsx)("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-4",children:"Issues & Alerts"}),(0,s.jsxs)("div",{className:"space-y-4",children:[l.criticalIssues.map((e,t)=>(0,s.jsx)("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-4",children:(0,s.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,s.jsx)(el.Z,{className:"w-5 h-5 text-red-500 mt-0.5"}),(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsxs)("h4",{className:"font-semibold text-red-900 dark:text-red-200",children:["Critical Issue in ",e.component]}),(0,s.jsx)("p",{className:"text-red-700 dark:text-red-300 mt-1",children:e.message}),e.recommendation&&(0,s.jsxs)("p",{className:"text-red-600 dark:text-red-400 text-sm mt-2",children:[(0,s.jsx)("strong",{children:"Recommendation:"})," ",e.recommendation]})]})]})},"critical-".concat(t))),l.warnings.map((e,t)=>(0,s.jsx)("div",{className:"bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-800 rounded-lg p-4",children:(0,s.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,s.jsx)(en.Z,{className:"w-5 h-5 text-yellow-500 mt-0.5"}),(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsxs)("h4",{className:"font-semibold text-yellow-900 dark:text-yellow-200",children:["Warning in ",e.component]}),(0,s.jsx)("p",{className:"text-yellow-700 dark:text-yellow-300 mt-1",children:e.message}),e.recommendation&&(0,s.jsxs)("p",{className:"text-yellow-600 dark:text-yellow-400 text-sm mt-2",children:[(0,s.jsx)("strong",{children:"Recommendation:"})," ",e.recommendation]})]})]})},"warning-".concat(t)))]})]}),(null==e?void 0:e.features)&&(0,s.jsxs)("div",{className:"mb-8",children:[(0,s.jsx)("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-4",children:"Feature Status"}),(0,s.jsx)("div",{className:"bg-white dark:bg-dark-800 rounded-xl border border-gray-200 dark:border-dark-700 p-6",children:(0,s.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:Object.entries(e.features).map(e=>{let[t,a]=e;return(0,s.jsxs)("div",{className:"flex items-center justify-between py-2",children:[(0,s.jsx)("span",{className:"text-gray-900 dark:text-white font-medium",children:t.replace(/_/g," ").replace(/\b\w/g,e=>e.toUpperCase())}),(0,s.jsx)("span",{className:"px-2 py-1 rounded text-xs font-medium ".concat(a.includes("✅")?"bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-200":a.includes("❌")?"bg-red-100 text-red-800 dark:bg-red-900/20 dark:text-red-200":"bg-gray-100 text-gray-800 dark:bg-gray-900/20 dark:text-gray-200"),children:a})]},t)})})})]}),(null==e?void 0:e.environment)&&(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-4",children:"Environment Configuration"}),(0,s.jsx)("div",{className:"bg-white dark:bg-dark-800 rounded-xl border border-gray-200 dark:border-dark-700 p-6",children:(0,s.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:Object.entries(e.environment).map(e=>{let[t,a]=e;return(0,s.jsxs)("div",{className:"flex items-center justify-between py-2",children:[(0,s.jsx)("span",{className:"text-gray-900 dark:text-white font-medium",children:t.replace(/_/g," ").replace(/\b\w/g,e=>e.toUpperCase())}),(0,s.jsx)("span",{className:"px-2 py-1 rounded text-xs font-medium ".concat(a.includes("✅")?"bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-200":a.includes("❌")?"bg-red-100 text-red-800 dark:bg-red-900/20 dark:text-red-200":"bg-gray-100 text-gray-800 dark:bg-gray-900/20 dark:text-gray-200"),children:a})]},t)})})})]})]})}function e8(e){let{title:t,value:a,change:r,changeType:i,icon:n,color:l}=e;return(0,s.jsx)("div",{className:"admin-card hover:scale-105 transition-all duration-300",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400 mb-1",children:t}),(0,s.jsx)("p",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-2",children:"number"==typeof a?a.toLocaleString():a}),void 0!==r&&(0,s.jsxs)("div",{className:"flex items-center text-sm font-medium ".concat("increase"===i?"text-success-600":"text-danger-600"),children:["increase"===i?(0,s.jsx)(k.Z,{className:"w-4 h-4 mr-1"}):(0,s.jsx)(w.Z,{className:"w-4 h-4 mr-1"}),(0,s.jsxs)("span",{children:[Math.abs(r),"% vs last period"]})]})]}),(0,s.jsx)("div",{className:"p-3 rounded-xl ".concat(l," shadow-lg"),children:(0,s.jsx)(n,{className:"w-6 h-6 text-white"})})]})})}function e7(){let[e,t]=(0,r.useState)(null),[a,i]=(0,r.useState)(!0),[n,l]=(0,r.useState)(""),[d,c]=(0,r.useState)("30d");(0,r.useEffect)(()=>{o()},[d]);let o=async()=>{try{i(!0),l("");let e=await D.getAnalytics(d);t(e)}catch(e){console.error("Error fetching analytics:",e),l(e.message),t({timeRange:d,signups:{total:156,data:[{date:"2024-01-01",count:12},{date:"2024-01-02",count:8},{date:"2024-01-03",count:15},{date:"2024-01-04",count:22},{date:"2024-01-05",count:18},{date:"2024-01-06",count:25},{date:"2024-01-07",count:32}],growth_rate:24.5},revenue:{total:45250,data:[{date:"2024-01-01",amount:1250},{date:"2024-01-02",amount:1450},{date:"2024-01-03",amount:1680},{date:"2024-01-04",amount:1820},{date:"2024-01-05",amount:1950},{date:"2024-01-06",amount:2100},{date:"2024-01-07",amount:2200}],growth_rate:18.7},engagement:{daily_active_users:89,monthly_active_users:234,average_session_time:24.5,feature_adoption:[{feature:"AI Agents",adoption_rate:87.5},{feature:"Task Scheduler",adoption_rate:72.3},{feature:"Pipelines",adoption_rate:45.8},{feature:"Analytics",adoption_rate:34.2}]},performance:{average_response_time:145,success_rate:99.2,error_rate:.8,uptime:99.9}})}finally{i(!1)}};return a?(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)("div",{className:"h-8 bg-gray-200 dark:bg-gray-700 rounded w-48 animate-pulse"}),(0,s.jsx)("div",{className:"h-10 bg-gray-200 dark:bg-gray-700 rounded w-32 animate-pulse"})]}),(0,s.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[void 0,void 0,void 0,void 0].map((e,t)=>(0,s.jsx)("div",{className:"admin-card animate-pulse",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)("div",{className:"h-4 bg-gray-200 dark:bg-gray-700 rounded w-24 mb-2"}),(0,s.jsx)("div",{className:"h-8 bg-gray-200 dark:bg-gray-700 rounded w-16 mb-2"}),(0,s.jsx)("div",{className:"h-3 bg-gray-200 dark:bg-gray-700 rounded w-20"})]}),(0,s.jsx)("div",{className:"w-12 h-12 bg-gray-200 dark:bg-gray-700 rounded-xl"})]})},t))})]}):(0,s.jsxs)("div",{className:"space-y-6 animate-fade-in",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Analytics & Insights"}),(0,s.jsx)("p",{className:"text-gray-600 dark:text-gray-400 mt-1",children:"Track growth, engagement, and platform performance"})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)(ec.Z,{className:"w-4 h-4 text-gray-400"}),(0,s.jsxs)("select",{value:d,onChange:e=>c(e.target.value),className:"admin-input w-auto",children:[(0,s.jsx)("option",{value:"7d",children:"Last 7 days"}),(0,s.jsx)("option",{value:"30d",children:"Last 30 days"}),(0,s.jsx)("option",{value:"90d",children:"Last 90 days"})]})]}),(0,s.jsxs)("button",{className:"admin-button-secondary",children:[(0,s.jsx)(eb.Z,{className:"w-4 h-4 mr-2"}),"Export"]})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[(0,s.jsx)(e8,{title:"New Signups",value:(null==e?void 0:e.signups.total)||0,change:null==e?void 0:e.signups.growth_rate,changeType:"increase",icon:m.Z,color:"bg-gradient-to-r from-primary-500 to-primary-600"}),(0,s.jsx)(e8,{title:"Revenue",value:"$".concat(((null==e?void 0:e.revenue.total)||0).toLocaleString()),change:null==e?void 0:e.revenue.growth_rate,changeType:"increase",icon:Z.Z,color:"bg-gradient-to-r from-success-500 to-success-600"}),(0,s.jsx)(e8,{title:"Active Users",value:(null==e?void 0:e.engagement.daily_active_users)||0,change:15.2,changeType:"increase",icon:eB.Z,color:"bg-gradient-to-r from-secondary-500 to-secondary-600"}),(0,s.jsx)(e8,{title:"Success Rate",value:"".concat((null==e?void 0:e.performance.success_rate)||0,"%"),change:(null==e?void 0:e.performance.success_rate)?.5:0,changeType:"increase",icon:S.Z,color:"bg-gradient-to-r from-warning-500 to-warning-600"})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,s.jsxs)("div",{className:"admin-card",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Signup Trends"}),(0,s.jsx)(C.Z,{className:"w-5 h-5 text-primary-500"})]}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)("span",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Growth Rate"}),(0,s.jsxs)("span",{className:"text-lg font-bold text-success-600",children:["+",(null==e?void 0:e.signups.growth_rate)||0,"%"]})]}),(0,s.jsx)("div",{className:"space-y-2",children:null==e?void 0:e.signups.data.slice(-7).map((e,t)=>(0,s.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,s.jsx)("span",{className:"text-xs text-gray-500 dark:text-gray-400 w-16",children:new Date(e.date).toLocaleDateString("en-US",{month:"short",day:"numeric"})}),(0,s.jsx)("div",{className:"flex-1 h-2 bg-gray-200 dark:bg-gray-700 rounded-full",children:(0,s.jsx)("div",{className:"h-2 bg-gradient-to-r from-primary-500 to-primary-600 rounded-full",style:{width:"".concat(e.count/35*100,"%")}})}),(0,s.jsx)("span",{className:"text-xs font-medium text-gray-900 dark:text-white w-8",children:e.count})]},t))})]})]}),(0,s.jsxs)("div",{className:"admin-card",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Revenue Growth"}),(0,s.jsx)(Z.Z,{className:"w-5 h-5 text-success-500"})]}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)("span",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Growth Rate"}),(0,s.jsxs)("span",{className:"text-lg font-bold text-success-600",children:["+",(null==e?void 0:e.revenue.growth_rate)||0,"%"]})]}),(0,s.jsx)("div",{className:"space-y-2",children:null==e?void 0:e.revenue.data.slice(-7).map((e,t)=>(0,s.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,s.jsx)("span",{className:"text-xs text-gray-500 dark:text-gray-400 w-16",children:new Date(e.date).toLocaleDateString("en-US",{month:"short",day:"numeric"})}),(0,s.jsx)("div",{className:"flex-1 h-2 bg-gray-200 dark:bg-gray-700 rounded-full",children:(0,s.jsx)("div",{className:"h-2 bg-gradient-to-r from-success-500 to-success-600 rounded-full",style:{width:"".concat(e.amount/2500*100,"%")}})}),(0,s.jsxs)("span",{className:"text-xs font-medium text-gray-900 dark:text-white w-12",children:["$",e.amount]})]},t))})]})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,s.jsxs)("div",{className:"admin-card",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Feature Adoption"}),(0,s.jsx)(p.Z,{className:"w-5 h-5 text-secondary-500"})]}),(0,s.jsx)("div",{className:"space-y-4",children:null==e?void 0:e.engagement.feature_adoption.map((e,t)=>(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,s.jsx)("span",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:e.feature}),(0,s.jsxs)("span",{className:"text-sm font-medium text-gray-900 dark:text-white",children:[e.adoption_rate,"%"]})]}),(0,s.jsx)("div",{className:"w-full h-2 bg-gray-200 dark:bg-gray-700 rounded-full",children:(0,s.jsx)("div",{className:"h-2 rounded-full ".concat(0===t?"bg-gradient-to-r from-primary-500 to-primary-600":1===t?"bg-gradient-to-r from-success-500 to-success-600":2===t?"bg-gradient-to-r from-warning-500 to-warning-600":"bg-gradient-to-r from-secondary-500 to-secondary-600"),style:{width:"".concat(e.adoption_rate,"%")}})})]},t))})]}),(0,s.jsxs)("div",{className:"admin-card",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"User Engagement"}),(0,s.jsx)(m.Z,{className:"w-5 h-5 text-primary-500"})]}),(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Daily Active Users"}),(0,s.jsx)("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:(null==e?void 0:e.engagement.daily_active_users)||0})]}),(0,s.jsxs)("div",{className:"text-right",children:[(0,s.jsx)("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Monthly Active"}),(0,s.jsx)("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:(null==e?void 0:e.engagement.monthly_active_users)||0})]})]}),(0,s.jsx)("div",{className:"border-t border-gray-200 dark:border-gray-700 pt-4",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)("span",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Avg Session Time"}),(0,s.jsxs)("span",{className:"text-lg font-bold text-primary-600",children:[(null==e?void 0:e.engagement.average_session_time)||0," min"]})]})}),(0,s.jsx)("div",{className:"border-t border-gray-200 dark:border-gray-700 pt-4",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)("span",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"User Retention"}),(0,s.jsx)("span",{className:"text-lg font-bold text-success-600",children:"82.5%"})]})})]})]})]}),(0,s.jsxs)("div",{className:"admin-card",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Platform Performance"}),(0,s.jsx)(S.Z,{className:"w-5 h-5 text-warning-500"})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsxs)("div",{className:"text-3xl font-bold text-primary-600 dark:text-primary-400 mb-2",children:[(null==e?void 0:e.performance.average_response_time)||0,"ms"]}),(0,s.jsx)("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Avg Response Time"})]}),(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsxs)("div",{className:"text-3xl font-bold text-success-600 dark:text-success-400 mb-2",children:[(null==e?void 0:e.performance.success_rate)||0,"%"]}),(0,s.jsx)("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Success Rate"})]}),(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsxs)("div",{className:"text-3xl font-bold text-danger-600 dark:text-danger-400 mb-2",children:[(null==e?void 0:e.performance.error_rate)||0,"%"]}),(0,s.jsx)("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Error Rate"})]}),(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsxs)("div",{className:"text-3xl font-bold text-warning-600 dark:text-warning-400 mb-2",children:[(null==e?void 0:e.performance.uptime)||0,"%"]}),(0,s.jsx)("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Uptime"})]})]})]}),(0,s.jsxs)("div",{className:"admin-card",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"AI Insights & Recommendations"}),(0,s.jsx)(eB.Z,{className:"w-5 h-5 text-secondary-500"})]}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"flex items-start space-x-4 p-4 bg-success-50 dark:bg-success-900/20 rounded-lg border border-success-200 dark:border-success-800",children:[(0,s.jsx)(C.Z,{className:"w-5 h-5 text-success-600 dark:text-success-400 mt-0.5"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm font-medium text-success-800 dark:text-success-200",children:"Strong growth momentum detected"}),(0,s.jsx)("p",{className:"text-xs text-success-600 dark:text-success-400 mt-1",children:"Your signup rate has increased by 24.5% this month. Consider increasing marketing spend during this growth phase."})]})]}),(0,s.jsxs)("div",{className:"flex items-start space-x-4 p-4 bg-warning-50 dark:bg-warning-900/20 rounded-lg border border-warning-200 dark:border-warning-800",children:[(0,s.jsx)(eB.Z,{className:"w-5 h-5 text-warning-600 dark:text-warning-400 mt-0.5"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm font-medium text-warning-800 dark:text-warning-200",children:"Pipeline feature needs attention"}),(0,s.jsx)("p",{className:"text-xs text-warning-600 dark:text-warning-400 mt-1",children:"Only 45.8% adoption rate for Pipelines. Consider improving onboarding or simplifying the interface."})]})]}),(0,s.jsxs)("div",{className:"flex items-start space-x-4 p-4 bg-primary-50 dark:bg-primary-900/20 rounded-lg border border-primary-200 dark:border-primary-800",children:[(0,s.jsx)(p.Z,{className:"w-5 h-5 text-primary-600 dark:text-primary-400 mt-0.5"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm font-medium text-primary-800 dark:text-primary-200",children:"Excellent system performance"}),(0,s.jsx)("p",{className:"text-xs text-primary-600 dark:text-primary-400 mt-1",children:"99.2% success rate and 145ms average response time indicate healthy system performance."})]})]})]})]})]})}var te=a(9837),tt=a(4001),ta=a(6362),ts=a(257);let tr="https://geniusai-v2-worker.dan-30f.workers.dev";function ti(){let[e,t]=(0,r.useState)(0),[a,i]=(0,r.useState)(""),[d,c]=(0,r.useState)(!1),[o,x]=(0,r.useState)(!1),[h,u]=(0,r.useState)(""),[p,y]=(0,r.useState)(""),b=[{id:"install",title:"Install GeniusAI",description:"Add GeniusAI to your Slack workspace",icon:te.Z,status:0===e?"active":e>0?"completed":"pending"},{id:"configure",title:"Configure OpenAI",description:"Connect your OpenAI API key",icon:tt.Z,status:1===e?"active":e>1?"completed":"pending"},{id:"complete",title:"Start Using",description:"Your AI workspace is ready",icon:ei.Z,status:2===e?"active":"pending"}],j=async e=>{if(e.preventDefault(),y(""),!a||!a.startsWith("sk-")){y("Please enter a valid OpenAI API key (starts with sk-)");return}try{c(!0);let e=await fetch("".concat(tr,"/api/config/openai"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({organization_id:h,api_key:a})}),s=await e.json();e.ok&&s.success?(console.log("✅ API key validated successfully:",s.validation),t(2),x(!0)):s.details?y("".concat(s.error,": ").concat(s.details)):y(s.message||s.error||"Failed to save API key")}catch(e){console.error("❌ Error configuring OpenAI:",e),y("Network error: ".concat(e.message))}finally{c(!1)}};return(0,s.jsxs)("div",{className:"p-6 max-w-4xl mx-auto",children:[(0,s.jsxs)("div",{className:"text-center mb-8",children:[(0,s.jsx)("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-gradient-to-r from-blue-600 to-purple-600 rounded-full mb-4",children:(0,s.jsx)(l.Z,{className:"w-8 h-8 text-white"})}),(0,s.jsx)("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-2",children:"Install GeniusAI"}),(0,s.jsx)("p",{className:"text-gray-600 dark:text-gray-400 text-lg",children:"Transform your Slack workspace into an AI-powered productivity hub"})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-12",children:[(0,s.jsxs)("div",{className:"bg-white dark:bg-dark-800 rounded-xl border border-gray-200 dark:border-dark-700 p-6 text-center",children:[(0,s.jsx)("div",{className:"inline-flex items-center justify-center w-12 h-12 bg-blue-100 dark:bg-blue-900/20 rounded-lg mb-4",children:(0,s.jsx)(g.Z,{className:"w-6 h-6 text-blue-600"})}),(0,s.jsx)("h3",{className:"font-semibold text-gray-900 dark:text-white mb-2",children:"AI Agents"}),(0,s.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Create custom AI assistants for different tasks and departments"})]}),(0,s.jsxs)("div",{className:"bg-white dark:bg-dark-800 rounded-xl border border-gray-200 dark:border-dark-700 p-6 text-center",children:[(0,s.jsx)("div",{className:"inline-flex items-center justify-center w-12 h-12 bg-green-100 dark:bg-green-900/20 rounded-lg mb-4",children:(0,s.jsx)(S.Z,{className:"w-6 h-6 text-green-600"})}),(0,s.jsx)("h3",{className:"font-semibold text-gray-900 dark:text-white mb-2",children:"Automation"}),(0,s.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Automate workflows and tasks with intelligent pipelines"})]}),(0,s.jsxs)("div",{className:"bg-white dark:bg-dark-800 rounded-xl border border-gray-200 dark:border-dark-700 p-6 text-center",children:[(0,s.jsx)("div",{className:"inline-flex items-center justify-center w-12 h-12 bg-purple-100 dark:bg-purple-900/20 rounded-lg mb-4",children:(0,s.jsx)(m.Z,{className:"w-6 h-6 text-purple-600"})}),(0,s.jsx)("h3",{className:"font-semibold text-gray-900 dark:text-white mb-2",children:"Team Collaboration"}),(0,s.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Enhanced team communication with AI-powered insights"})]})]}),(0,s.jsxs)("div",{className:"bg-white dark:bg-dark-800 rounded-xl border border-gray-200 dark:border-dark-700 p-8",children:[(0,s.jsx)("div",{className:"flex items-center justify-between mb-8",children:b.map((t,a)=>{let r=t.icon,i="active"===t.status,n="completed"===t.status;return(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)("div",{className:"flex items-center justify-center w-12 h-12 rounded-full border-2 transition-all duration-200 ".concat(n?"bg-green-500 border-green-500 text-white":i?"bg-blue-500 border-blue-500 text-white":"bg-gray-100 dark:bg-gray-700 border-gray-300 dark:border-gray-600 text-gray-400"),children:n?(0,s.jsx)(ei.Z,{className:"w-6 h-6"}):(0,s.jsx)(r,{className:"w-6 h-6"})}),a<b.length-1&&(0,s.jsx)("div",{className:"flex-1 h-0.5 mx-4 transition-all duration-200 ".concat(a<e?"bg-green-500":"bg-gray-200 dark:bg-gray-700")})]},t.id)})}),(0,s.jsxs)("div",{className:"text-center",children:[0===e&&(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-2",children:"Install GeniusAI to Slack"}),(0,s.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:"Add GeniusAI to your Slack workspace to get started with AI-powered productivity"})]}),(0,s.jsx)("div",{className:"bg-blue-50 dark:bg-blue-900/20 rounded-lg p-6",children:(0,s.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,s.jsx)(n.Z,{className:"w-6 h-6 text-blue-600 mt-1"}),(0,s.jsxs)("div",{className:"text-left",children:[(0,s.jsx)("h3",{className:"font-semibold text-blue-900 dark:text-blue-200 mb-1",children:"Secure Installation"}),(0,s.jsx)("p",{className:"text-sm text-blue-700 dark:text-blue-300",children:"GeniusAI uses OAuth 2.0 for secure authentication. We only request the minimum permissions needed to function."})]})]})}),(0,s.jsx)("button",{onClick:()=>{c(!0);let e=Math.random().toString(36).substring(2,15);localStorage.setItem("oauth_state",e);let a="https://slack.com/oauth/v2/authorize?client_id=".concat(ts.env.NEXT_PUBLIC_SLACK_CLIENT_ID||"your-client-id","&scope=app_mentions:read,channels:history,channels:read,chat:write,commands,groups:history,groups:read,im:history,im:read,im:write,mpim:history,mpim:read,team:read,users:read,users:read.email&user_scope=&redirect_uri=").concat(encodeURIComponent(tr+"/slack/oauth"),"&state=").concat(e);window.open(a,"slack-install","width=600,height=600");let s=setInterval(()=>{let e=localStorage.getItem("installation_completed"),a=localStorage.getItem("organization_id");e&&a&&(u(a),t(1),c(!1),localStorage.removeItem("installation_completed"),clearInterval(s))},1e3);setTimeout(()=>{clearInterval(s),c(!1)},3e5)},disabled:d,className:"inline-flex items-center space-x-3 px-8 py-4 bg-slack text-white rounded-lg font-semibold hover:bg-slack-dark transition-colors disabled:opacity-50 disabled:cursor-not-allowed",style:{backgroundColor:"#4A154B"},children:d?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(e6.Z,{className:"w-5 h-5 animate-spin"}),(0,s.jsx)("span",{children:"Installing..."})]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(te.Z,{className:"w-5 h-5"}),(0,s.jsx)("span",{children:"Add to Slack"}),(0,s.jsx)(ta.Z,{className:"w-4 h-4"})]})}),(0,s.jsxs)("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:["By installing, you agree to our"," ",(0,s.jsx)("a",{href:"#",className:"text-blue-600 hover:underline",children:"Terms of Service"})," and"," ",(0,s.jsx)("a",{href:"#",className:"text-blue-600 hover:underline",children:"Privacy Policy"})]})]}),1===e&&(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-2",children:"Configure OpenAI Integration"}),(0,s.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:"Connect your OpenAI API key to power your AI agents"})]}),(0,s.jsx)("div",{className:"bg-amber-50 dark:bg-amber-900/20 rounded-lg p-6",children:(0,s.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,s.jsx)(tt.Z,{className:"w-6 h-6 text-amber-600 mt-1"}),(0,s.jsxs)("div",{className:"text-left",children:[(0,s.jsx)("h3",{className:"font-semibold text-amber-900 dark:text-amber-200 mb-1",children:"Get Your OpenAI API Key"}),(0,s.jsx)("p",{className:"text-sm text-amber-700 dark:text-amber-300 mb-3",children:"You'll need an OpenAI API key to use AI features. Don't have one yet?"}),(0,s.jsxs)("a",{href:"https://platform.openai.com/api-keys",target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center space-x-2 text-sm font-medium text-amber-800 dark:text-amber-200 hover:underline",children:[(0,s.jsx)("span",{children:"Get API Key from OpenAI"}),(0,s.jsx)(ta.Z,{className:"w-3 h-3"})]})]})]})}),(0,s.jsxs)("form",{onSubmit:j,className:"space-y-4",children:[(0,s.jsxs)("div",{className:"text-left",children:[(0,s.jsx)("label",{htmlFor:"api-key",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"OpenAI API Key"}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)("input",{type:"password",id:"api-key",value:a,onChange:e=>i(e.target.value),placeholder:"sk-...",className:"w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white dark:bg-gray-800 text-gray-900 dark:text-white",required:!0}),(0,s.jsx)(tt.Z,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"})]}),(0,s.jsx)("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Your API key is encrypted and stored securely"})]}),p&&(0,s.jsx)("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-3",children:(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)(e0.Z,{className:"w-4 h-4 text-red-600"}),(0,s.jsx)("p",{className:"text-sm text-red-600 dark:text-red-400",children:p})]})}),(0,s.jsx)("button",{type:"submit",disabled:d||!a,className:"w-full flex items-center justify-center space-x-2 px-6 py-3 bg-blue-600 text-white rounded-lg font-semibold hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:d?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(e6.Z,{className:"w-4 h-4 animate-spin"}),(0,s.jsx)("span",{children:"Validating API Key..."})]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("span",{children:"Validate & Save"}),(0,s.jsx)(e$.Z,{className:"w-4 h-4"})]})})]})]}),2===e&&(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-green-100 dark:bg-green-900/20 rounded-full mb-4",children:(0,s.jsx)(ei.Z,{className:"w-8 h-8 text-green-600"})}),(0,s.jsx)("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-2",children:"Installation Complete!"}),(0,s.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:"GeniusAI is now ready to use in your Slack workspace"})]}),(0,s.jsxs)("div",{className:"bg-green-50 dark:bg-green-900/20 rounded-lg p-6",children:[(0,s.jsx)("h3",{className:"font-semibold text-green-900 dark:text-green-200 mb-3",children:"\uD83C\uDF89 What's Next?"}),(0,s.jsxs)("div",{className:"space-y-2 text-left",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-2 text-sm text-green-700 dark:text-green-300",children:[(0,s.jsx)(ei.Z,{className:"w-4 h-4"}),(0,s.jsx)("span",{children:"Go to your Slack workspace"})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-2 text-sm text-green-700 dark:text-green-300",children:[(0,s.jsx)(ei.Z,{className:"w-4 h-4"}),(0,s.jsxs)("span",{children:["Type ",(0,s.jsx)("code",{className:"bg-green-200 dark:bg-green-800 px-1 rounded",children:"/help"})," to see available commands"]})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-2 text-sm text-green-700 dark:text-green-300",children:[(0,s.jsx)(ei.Z,{className:"w-4 h-4"}),(0,s.jsxs)("span",{children:["Try ",(0,s.jsx)("code",{className:"bg-green-200 dark:bg-green-800 px-1 rounded",children:"/agents"})," to create your first AI agent"]})]})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,s.jsxs)("button",{onClick:()=>window.open("https://slack.com/app_redirect?app=your-app-id","_blank"),className:"flex items-center justify-center space-x-2 px-6 py-3 bg-slack text-white rounded-lg font-semibold hover:bg-slack-dark transition-colors",style:{backgroundColor:"#4A154B"},children:[(0,s.jsx)(te.Z,{className:"w-4 h-4"}),(0,s.jsx)("span",{children:"Open Slack"})]}),(0,s.jsxs)("button",{onClick:()=>window.location.href="/",className:"flex items-center justify-center space-x-2 px-6 py-3 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-lg font-semibold hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",children:[(0,s.jsx)(em.Z,{className:"w-4 h-4"}),(0,s.jsx)("span",{children:"Back to Dashboard"})]})]})]})]})]}),(0,s.jsxs)("div",{className:"mt-8 text-center",children:[(0,s.jsx)("p",{className:"text-sm text-gray-500 dark:text-gray-400 mb-2",children:"Need help with installation?"}),(0,s.jsxs)("div",{className:"flex items-center justify-center space-x-4",children:[(0,s.jsx)("a",{href:"#",className:"text-sm text-blue-600 hover:underline",children:"View Documentation"}),(0,s.jsx)("span",{className:"text-gray-300",children:"•"}),(0,s.jsx)("a",{href:"#",className:"text-sm text-blue-600 hover:underline",children:"Contact Support"}),(0,s.jsx)("span",{className:"text-gray-300",children:"•"}),(0,s.jsx)("a",{href:"#",className:"text-sm text-blue-600 hover:underline",children:"Join Community"})]})]})]})}var tn=a(875);function tl(e){let{selectedOrganizations:t,onSelectionChange:a,className:i=""}=e,[n,l]=(0,r.useState)(!1),[d,c]=(0,r.useState)(""),[o,g]=(0,r.useState)([]),[h,u]=(0,r.useState)(!1),p=(0,r.useRef)(null);(0,r.useEffect)(()=>{y()},[]),(0,r.useEffect)(()=>{let e=e=>{p.current&&!p.current.contains(e.target)&&l(!1)};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[]);let y=async()=>{try{u(!0);let e=await D.getOrganizations(),t=e.organizations||e;g(t)}catch(e){console.error("Error fetching organizations:",e)}finally{u(!1)}},b=o.filter(e=>{let t=d.toLowerCase();return e.team_name.toLowerCase().includes(t)||e.slack_team_id.toLowerCase().includes(t)||e.id.toLowerCase().includes(t)}),v=e=>{t.some(t=>t.id===e.id)?a(t.filter(t=>t.id!==e.id)):a([...t,e])},N=e=>{a(t.filter(t=>t.id!==e))},f=e=>{switch(null==e?void 0:e.toLowerCase()){case"active":return"text-green-600";case"suspended":return"text-yellow-600";case"cancelled":return"text-red-600";default:return"text-gray-600"}};return(0,s.jsxs)("div",{className:"relative ".concat(i),ref:p,children:[(0,s.jsxs)("button",{onClick:()=>l(!n),className:"flex items-center justify-between w-full px-4 py-2 text-left bg-white dark:bg-dark-800 border border-gray-300 dark:border-dark-600 rounded-lg hover:bg-gray-50 dark:hover:bg-dark-700 focus:outline-none focus:ring-2 focus:ring-blue-500 transition-colors",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)(x.Z,{className:"w-4 h-4 text-gray-500"}),(0,s.jsx)("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:0===t.length?"All Organizations":1===t.length?t[0].team_name:"".concat(t.length," Organizations Selected")})]}),(0,s.jsx)(tn.Z,{className:"w-4 h-4 text-gray-500 transition-transform ".concat(n?"rotate-180":"")})]}),t.length>0&&(0,s.jsxs)("div",{className:"flex flex-wrap gap-2 mt-2",children:[t.map(e=>(0,s.jsxs)("div",{className:"flex items-center space-x-1 px-2 py-1 bg-blue-100 dark:bg-blue-900 text-blue-800 dark:text-blue-200 rounded-full text-xs",children:[(0,s.jsx)(x.Z,{className:"w-3 h-3"}),(0,s.jsx)("span",{className:"font-medium",children:e.team_name}),(0,s.jsx)("button",{onClick:()=>N(e.id),className:"hover:bg-blue-200 dark:hover:bg-blue-800 rounded-full p-0.5",children:(0,s.jsx)(j.Z,{className:"w-3 h-3"})})]},e.id)),t.length>1&&(0,s.jsx)("button",{onClick:()=>{a([])},className:"px-2 py-1 text-xs text-red-600 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-full transition-colors",children:"Clear All"})]}),n&&(0,s.jsxs)("div",{className:"absolute top-full left-0 right-0 z-50 mt-1 bg-white dark:bg-dark-800 border border-gray-300 dark:border-dark-600 rounded-lg shadow-lg max-h-96 overflow-hidden",children:[(0,s.jsx)("div",{className:"p-3 border-b border-gray-200 dark:border-dark-600",children:(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)(ed.Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),(0,s.jsx)("input",{type:"text",placeholder:"Search by name, Slack ID, or team ID...",value:d,onChange:e=>c(e.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-dark-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white dark:bg-dark-700 text-gray-900 dark:text-white text-sm",autoFocus:!0})]})}),(0,s.jsx)("div",{className:"max-h-72 overflow-y-auto",children:h?(0,s.jsx)("div",{className:"p-4 text-center text-gray-500 dark:text-gray-400",children:"Loading organizations..."}):0===b.length?(0,s.jsx)("div",{className:"p-4 text-center text-gray-500 dark:text-gray-400",children:d?"No organizations found":"No organizations available"}):b.map(e=>{let a=t.some(t=>t.id===e.id);return(0,s.jsx)("button",{onClick:()=>v(e),className:"w-full px-4 py-3 text-left hover:bg-gray-50 dark:hover:bg-dark-700 border-b border-gray-100 dark:border-dark-600 last:border-b-0 transition-colors ".concat(a?"bg-blue-50 dark:bg-blue-900/20":""),children:(0,s.jsx)("div",{className:"flex items-center justify-between",children:(0,s.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)(x.Z,{className:"w-4 h-4 ".concat(f(e.status))}),(0,s.jsx)("span",{className:"font-medium text-gray-900 dark:text-white truncate",children:e.team_name}),a&&(0,s.jsx)("div",{className:"w-2 h-2 bg-blue-500 rounded-full"})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-4 mt-1 text-xs text-gray-500 dark:text-gray-400",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,s.jsx)(eC.Z,{className:"w-3 h-3"}),(0,s.jsx)("span",{children:e.slack_team_id})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,s.jsx)(m.Z,{className:"w-3 h-3"}),(0,s.jsxs)("span",{children:[e.user_count||0," users"]})]}),(0,s.jsx)("span",{className:"capitalize ".concat(f(e.status)),children:e.status})]})]})})},e.id)})})]})]})}let td=(0,r.createContext)(void 0);function tc(e){let{children:t}=e,[a,i]=(0,r.useState)([]);(0,r.useEffect)(()=>{try{let e=localStorage.getItem("admin-dashboard-selected-organizations");e&&i(JSON.parse(e))}catch(e){console.error("Error loading saved organizations:",e)}},[]);let n={selectedOrganizations:a,setSelectedOrganizations:e=>{i(e);try{localStorage.setItem("admin-dashboard-selected-organizations",JSON.stringify(e))}catch(e){console.error("Error saving organizations:",e)}},isFiltered:a.length>0};return(0,s.jsx)(td.Provider,{value:n,children:t})}let to=[{id:"overview",name:"Overview",icon:o.Z,description:"Dashboard overview"},{id:"organizations",name:"Organizations",icon:x.Z,description:"Manage clients"},{id:"users",name:"Users",icon:m.Z,description:"User management"},{id:"agents",name:"Agents",icon:g.Z,description:"AI agents"},{id:"tasks",name:"Tasks",icon:h.Z,description:"Scheduled tasks"},{id:"pipelines",name:"Pipelines",icon:u.Z,description:"Workflows"},{id:"analytics",name:"Analytics",icon:p.Z,description:"Insights & reports"},{id:"health",name:"System Health",icon:y.Z,description:"System monitoring"},{id:"install",name:"Install App",icon:l.Z,description:"Install & setup guide"},{id:"settings",name:"Settings",icon:b.Z,description:"Configuration"}];function tx(e){var t;let{onLogout:a}=e,[i,d]=(0,r.useState)("overview"),[c,o]=(0,r.useState)(!1),[x,m]=(0,r.useState)(""),{selectedOrganizations:g,setSelectedOrganizations:h}=function(){let e=(0,r.useContext)(td);if(void 0===e)throw Error("useOrganizationFilter must be used within an OrganizationFilterProvider");return e}();return(0,r.useEffect)(()=>{let e=e=>{if(e.metaKey||e.ctrlKey)switch(e.key){case"k":e.preventDefault();break;case"1":e.preventDefault(),d("overview");break;case"2":e.preventDefault(),d("organizations")}};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[]),(0,s.jsxs)("div",{className:"h-screen flex bg-gray-50 dark:bg-dark-900",children:[c&&(0,s.jsx)("div",{className:"fixed inset-0 z-40 lg:hidden bg-black bg-opacity-50",onClick:()=>o(!1)}),(0,s.jsxs)("div",{className:"fixed inset-y-0 left-0 z-50 w-64 bg-white dark:bg-dark-800 shadow-xl border-r border-gray-200 dark:border-dark-700 transform ".concat(c?"translate-x-0":"-translate-x-full"," lg:translate-x-0 lg:static lg:inset-0 transition-transform duration-300 ease-in-out"),children:[(0,s.jsxs)("div",{className:"flex items-center justify-between h-16 px-6 border-b border-gray-200 dark:border-dark-700",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)("div",{className:"w-8 h-8 bg-gradient-to-r from-primary-600 to-secondary-600 rounded-lg flex items-center justify-center",children:(0,s.jsx)(n.Z,{className:"w-5 h-5 text-white"})}),(0,s.jsx)("div",{className:"absolute -top-1 -right-1",children:(0,s.jsx)(l.Z,{className:"w-3 h-3 text-warning-500 animate-bounce-light"})})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-lg font-bold text-gray-900 dark:text-white",children:"GeniusAI"}),(0,s.jsx)("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Admin Dashboard"})]})]}),(0,s.jsx)("button",{onClick:()=>o(!1),className:"lg:hidden p-1 rounded-md text-gray-400 hover:text-gray-500 hover:bg-gray-100 dark:hover:bg-dark-700",children:(0,s.jsx)(j.Z,{className:"w-5 h-5"})})]}),(0,s.jsx)("nav",{className:"flex-1 px-4 py-6 space-y-2 overflow-y-auto",children:to.map(e=>{let t=e.icon,a=i===e.id;return(0,s.jsxs)("button",{onClick:()=>{d(e.id),o(!1)},className:"w-full flex items-center px-3 py-3 text-sm font-medium rounded-lg transition-all duration-200 group ".concat(a?"bg-gradient-to-r from-primary-50 to-secondary-50 dark:from-primary-900 dark:to-secondary-900 text-primary-700 dark:text-primary-300 border-r-2 border-primary-500":"text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-dark-700 hover:text-gray-900 dark:hover:text-white"),children:[(0,s.jsx)(t,{className:"w-5 h-5 mr-3 ".concat(a?"text-primary-600 dark:text-primary-400":"text-gray-400 group-hover:text-gray-500")}),(0,s.jsxs)("div",{className:"flex-1 text-left",children:[(0,s.jsx)("div",{className:"font-medium",children:e.name}),(0,s.jsx)("div",{className:"text-xs opacity-75",children:e.description})]})]},e.id)})}),(0,s.jsx)("div",{className:"p-4 border-t border-gray-200 dark:border-dark-700",children:(0,s.jsxs)("button",{onClick:a,className:"w-full flex items-center px-3 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 rounded-lg hover:bg-red-50 dark:hover:bg-red-900/20 hover:text-red-700 dark:hover:text-red-400 transition-colors duration-200",children:[(0,s.jsx)(v.Z,{className:"w-5 h-5 mr-3"}),"Sign Out"]})})]}),(0,s.jsxs)("div",{className:"flex-1 flex flex-col overflow-hidden",children:[(0,s.jsx)("header",{className:"bg-white dark:bg-dark-800 shadow-sm border-b border-gray-200 dark:border-dark-700 px-4 lg:px-6 py-4",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,s.jsx)("button",{onClick:()=>o(!0),className:"lg:hidden p-2 rounded-md text-gray-400 hover:text-gray-500 hover:bg-gray-100 dark:hover:bg-dark-700",children:(0,s.jsx)(N.Z,{className:"w-5 h-5"})}),(0,s.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,s.jsx)("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white capitalize",children:(null===(t=to.find(e=>e.id===i))||void 0===t?void 0:t.name)||"Dashboard"}),(0,s.jsx)("div",{className:"hidden sm:block px-3 py-1 bg-primary-100 dark:bg-primary-900 text-primary-700 dark:text-primary-300 text-xs font-medium rounded-full",children:"Live"})]})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,s.jsx)(tl,{selectedOrganizations:g,onSelectionChange:h,className:"w-80"}),(0,s.jsxs)("button",{className:"relative p-2 text-gray-400 hover:text-gray-500 hover:bg-gray-100 dark:hover:bg-dark-700 rounded-lg",children:[(0,s.jsx)(f.Z,{className:"w-5 h-5"}),(0,s.jsx)("span",{className:"absolute top-1 right-1 w-2 h-2 bg-red-500 rounded-full"})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-2 px-3 py-2 bg-success-50 dark:bg-success-900/20 rounded-lg",children:[(0,s.jsx)("div",{className:"w-2 h-2 bg-success-500 rounded-full animate-pulse"}),(0,s.jsx)("span",{className:"text-sm font-medium text-success-700 dark:text-success-300",children:"System Healthy"})]})]})]})}),(0,s.jsx)("main",{className:"flex-1 overflow-auto bg-gray-50 dark:bg-dark-900",children:(0,s.jsx)("div",{className:"p-6",children:(()=>{switch(i){case"overview":default:return(0,s.jsx)(er,{onNavigate:d});case"organizations":return(0,s.jsx)(ey,{});case"users":return(0,s.jsx)(eF,{});case"agents":return(0,s.jsx)(eH,{});case"tasks":return(0,s.jsx)(eX,{});case"pipelines":return(0,s.jsx)(eQ,{});case"analytics":return(0,s.jsx)(e7,{});case"health":return(0,s.jsx)(e9,{});case"install":return(0,s.jsx)(ti,{});case"settings":return(0,s.jsx)("div",{className:"p-6",children:(0,s.jsx)("div",{className:"text-center py-12",children:(0,s.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:"Settings panel coming soon"})})})}})()})})]})]})}var tm=a(257);function tg(){let[e,t]=(0,r.useState)(!1),[a,o]=(0,r.useState)(""),[x,m]=(0,r.useState)(!1),[g,h]=(0,r.useState)(""),[u,p]=(0,r.useState)(!1);(0,i.useRouter)(),(0,r.useEffect)(()=>{"authenticated"===localStorage.getItem("geniusai-admin-auth")&&t(!0)},[]);let y=async e=>{e.preventDefault(),p(!0),h(""),a===(tm.env.NEXT_PUBLIC_ADMIN_PASSWORD||"admin123")?(localStorage.setItem("geniusai-admin-auth","authenticated"),t(!0)):h("Invalid admin password"),p(!1)};return e?(0,s.jsx)(tc,{children:(0,s.jsx)(tx,{onLogout:()=>{localStorage.removeItem("geniusai-admin-auth"),t(!1),o("")}})}):(0,s.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-primary-900 via-primary-800 to-secondary-800 flex items-center justify-center px-4 sm:px-6 lg:px-8",children:[(0,s.jsxs)("div",{className:"absolute inset-0 overflow-hidden",children:[(0,s.jsx)("div",{className:"absolute -top-40 -right-40 w-80 h-80 bg-white/10 rounded-full blur-3xl"}),(0,s.jsx)("div",{className:"absolute -bottom-40 -left-40 w-80 h-80 bg-secondary-500/20 rounded-full blur-3xl"})]}),(0,s.jsxs)("div",{className:"relative z-10 max-w-md w-full space-y-8",children:[(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("div",{className:"flex justify-center mb-6",children:(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)("div",{className:"w-20 h-20 bg-gradient-to-r from-white/20 to-white/10 rounded-2xl flex items-center justify-center backdrop-blur-sm border border-white/20",children:(0,s.jsx)(n.Z,{className:"w-10 h-10 text-white"})}),(0,s.jsx)("div",{className:"absolute -top-1 -right-1",children:(0,s.jsx)(l.Z,{className:"w-6 h-6 text-warning-400 animate-bounce-light"})})]})}),(0,s.jsx)("h1",{className:"text-4xl font-bold text-white mb-2",children:"GeniusAI"}),(0,s.jsx)("p",{className:"text-xl text-white/80 mb-8",children:"Admin Dashboard"}),(0,s.jsx)("p",{className:"text-sm text-white/60",children:"Secure access to your command center"})]}),(0,s.jsxs)("div",{className:"bg-white/10 backdrop-blur-lg rounded-2xl shadow-2xl border border-white/20 p-8",children:[(0,s.jsxs)("form",{onSubmit:y,className:"space-y-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"password",className:"block text-sm font-medium text-white/90 mb-2",children:"Admin Password"}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)("input",{id:"password",name:"password",type:x?"text":"password",required:!0,value:a,onChange:e=>o(e.target.value),className:"block w-full px-4 py-3 bg-white/5 border border-white/20 rounded-xl text-white placeholder-white/50 focus:outline-none focus:ring-2 focus:ring-white/50 focus:border-transparent transition-all duration-200",placeholder:"Enter your admin password"}),(0,s.jsx)("button",{type:"button",onClick:()=>m(!x),className:"absolute inset-y-0 right-0 pr-3 flex items-center text-white/60 hover:text-white/80 transition-colors",children:x?(0,s.jsx)(d.Z,{className:"w-5 h-5"}):(0,s.jsx)(c.Z,{className:"w-5 h-5"})})]})]}),g&&(0,s.jsx)("div",{className:"bg-danger-500/20 border border-danger-500/30 rounded-lg p-3 text-sm text-danger-200",children:g}),(0,s.jsx)("button",{type:"submit",disabled:u,className:"w-full flex justify-center py-3 px-4 border border-transparent rounded-xl text-sm font-medium text-primary-900 bg-white hover:bg-white/90 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-white/50 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200 shadow-lg hover:shadow-xl",children:u?(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)("div",{className:"w-4 h-4 border-2 border-primary-900/20 border-t-primary-900 rounded-full animate-spin mr-2"}),"Authenticating..."]}):"Access Dashboard"})]}),(0,s.jsx)("div",{className:"mt-6 p-4 bg-white/5 rounded-lg border border-white/10",children:(0,s.jsx)("p",{className:"text-xs text-white/60 text-center",children:"\uD83D\uDD10 Demo credentials: admin123"})})]}),(0,s.jsx)("div",{className:"text-center",children:(0,s.jsx)("p",{className:"text-sm text-white/50",children:"Powered by GeniusAI Platform \xa9 2024"})})]})]})}}},function(e){e.O(0,[580,971,117,744],function(){return e(e.s=5433)}),_N_E=e.O()}]);